var SlimTabV2=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";var n;i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r}),function(t){t.setAttributes=function(t,e){for(let i in e)t.setAttribute(i,e[i])},t.setStyle=function(t,e){for(let i in e)t.style.setProperty(i,e[i])};const e={C:0,"C#":1,D:2,"D#":3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,"A#":10,B:11},i=/^([CDEFGAB]#?)([0-9])$/;t.noteToDecimal=function(t){let n=i.exec(t);return 3!=n.length?-1:e[n[1]]+12*(Number(n[2])+1)}}(n||(n={}));class s{constructor(){this.funcs=[]}call(...t){this.funcs.forEach(e=>{e(...t)})}push(t){this.funcs.push(t)}}class r{constructor(t){t.forEach(t=>{this[t]=new s})}}},,function(t,e,i){"use strict";i.r(e),i.d(e,"SLTab",function(){return s});var n=i(0);class s{constructor(t){this.lengthPerBeat=4,this.beatPerSection=4,this.sectionWidth=400,this.sectionPerLine=2,this.stringPadding=16,this.linePerPage=20,this.lineMargin=42,this.linePadding=32,this.noteElement=[],this.startPosition=[this.lineMargin+this.linePadding+20,134],this.lineInfo=[0,this.lineMargin,120],Object.assign(this,t)}setNoteData(t){this.notes=t}addNote(t,e){if(-1==t){let t=this.notes.length,i=this.lengthPerBeat/e[0];for(let e=0;e<this.notes[t-1].length;e++)i+=this.lengthPerBeat/this.notes[t-1][e][0];i>this.beatPerSection?this.notes.push([e]):this.notes[t-1].push(e)}else this.notes[t].push(e);this.render()}render(t){if(!this.svgElement){let e=document.createElement("div"),i=this.sectionWidth*this.sectionPerLine+2*this.linePadding+84;e.setAttribute("style","position: relative; background: radial-gradient(#3E3E3E, #000) ; width: fit-content;"),this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.b.setAttributes(this.svgElement,{width:`${i}`,height:"600"}),e.append(this.svgElement),t.appendChild(e)}this.drawAllLine(),this.setAllNoteElementData(this.calNoteRawData())}drawAllLine(){let t=Math.ceil(this.notes.length/this.sectionPerLine);if(t>this.lineInfo[0])for(let e=0;e<t-this.lineInfo[0];e++)this.drawLine(this.lineInfo[1],this.lineInfo[2]),this.lineInfo[2]+=5*this.stringPadding+80;this.lineInfo[0]=t}drawLine(t,e){let i=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","rect");n.b.setAttributes(s,{x:`${t}`,y:`${e}`,style:"fill: rgba(255, 255, 255, 0.09)",width:`${2*this.linePadding+this.sectionWidth*this.sectionPerLine}`,height:`${28+5*this.stringPadding}`}),i.appendChild(s),t+=this.linePadding,e+=14;for(let s=0;s<6;s++){let r=this.sectionPerLine*this.sectionWidth,l=document.createElementNS("http://www.w3.org/2000/svg","line");n.b.setAttributes(l,{x1:`${t}`,y1:`${e+s*this.stringPadding}`,x2:`${t+r}`,y2:`${e+s*this.stringPadding}`,style:"stroke:rgba(255, 255, 255, 0.24) ;stroke-width:2"}),i.appendChild(l)}i.appendChild(this.drawLineTitle(t-30,e)),i.appendChild(this.drawBar(t,e));for(let n=1;n<this.sectionPerLine+1;n++)i.appendChild(this.drawBar(t+this.sectionWidth*n,e));this.svgElement.appendChild(i)}drawLineTitle(t,e){let i=document.createElementNS("http://www.w3.org/2000/svg","g");return i.innerHTML=`\n        <text style="fill:#959595;font:17px arial;">\n            <tspan x='${t+10}' y='${e+26}'>T</tspan>\n            <tspan x='${t+10}' y='${e+22+26}'>A</tspan>\n            <tspan x='${t+10}' y='${e+44+26}'>B</tspan>\n        </text>\n        `,i}drawBar(t,e){let i=document.createElementNS("http://www.w3.org/2000/svg","line");return n.b.setAttributes(i,{style:"stroke:rgba(255, 255, 255, 0.24) ;stroke-width:2"}),n.b.setAttributes(i,{x1:`${t}`,y1:`${e}`,x2:`${t}`,y2:`${e+5*this.stringPadding}`}),i}createNoteElement(t=200,e=20){let i=document.createElementNS("http://www.w3.org/2000/svg","g"),n=`<g>\n        <line style="stroke:white;stroke-width:1" x1="${t}" y1="140" x2="${t}" y2="${e}"></line>\n        <line style="stroke:white;stroke-width:2" x1="${t}" y1="138" x2="${t+10}" y2="138"></line>\n        <line style="stroke:white;stroke-width:2" x1="${t}" y1="130" x2="${t+10}" y2="130"></line>\n        <line style="stroke:white;stroke-width:2"></line>\n        </g>`;for(let i=0;i<6;i++)n+=`\n                <g>\n                <ellipse cx='${t}' cy='${e+this.stringPadding*i}' rx='4' ry='6' fill='#444' stroke-width='0' stroke='black' style='cursor:pointer;'></ellipse>\n                <text x='${t}' y='${e+this.stringPadding*i+4}' text-anchor="middle" style="font:12px Sans-serif; fill:#fff">3</text>\n                </g>\n            `;i.innerHTML=n,this.svgElement.appendChild(i),this.noteElement.push(i)}calNoteRawData(){let[t,e]=this.startPosition,i=(this.sectionWidth-20)/this.beatPerSection,n=[];for(let s=0;s<this.notes.length;s++){s%this.sectionPerLine==0&&(t=this.startPosition[0],0!=s&&(e+=5*this.stringPadding+80));let r=t+this.sectionWidth;for(let r=0;r<this.notes[s].length;r++){let l=this.notes[s][r];n.push([t,e,l[0],l[1]]),t+=i*this.lengthPerBeat/l[0]}t=r}return n}setAllNoteElementData(t){let e=t.length-this.noteElement.length;for(let t=0;t<e;t++)this.createNoteElement();for(let e=0;e<t.length;e++)this.setNoteElementData(this.noteElement[e],t[e])}setNoteElementData(t,e){this.setElementPosition(t,e[0],e[1]),this.setNoteBar(t,e[2]),this.setChordVisiable(t,e[0],e[1],e[3])}setElementPosition(t,e,i){n.b.setAttributes(t.children[0].children[0],{x1:`${e}`,y1:`${26+i+5*this.stringPadding}`,x2:`${e}`,y2:`${i}`}),n.b.setAttributes(t.children[0].children[1],{x1:`${e}`,y1:`${25+i+5*this.stringPadding}`,x2:`${e+10}`,y2:`${25+i+5*this.stringPadding}`}),n.b.setAttributes(t.children[0].children[2],{x1:`${e}`,y1:`${21+i+5*this.stringPadding}`,x2:`${e+10}`,y2:`${21+i+5*this.stringPadding}`}),n.b.setAttributes(t.children[0].children[3],{x1:`${e}`,y1:`${17+i+5*this.stringPadding}`,x2:`${e+10}`,y2:`${17+i+5*this.stringPadding}`});for(let s=1;s<=6;s++)n.b.setAttributes(t.children[s].children[0],{cx:`${e}`,cy:`${i+this.stringPadding*(s-1)}`}),n.b.setAttributes(t.children[s].children[1],{x:`${e}`,y:`${i+this.stringPadding*(s-1)+4}`})}setNoteBar(t,e){let i=e/this.lengthPerBeat;i>1.9?n.b.setStyle(t.children[0].children[1],{display:"block"}):n.b.setStyle(t.children[0].children[1],{display:"none"}),i>3.9?n.b.setStyle(t.children[0].children[2],{display:"block"}):n.b.setStyle(t.children[0].children[2],{display:"none"}),i>7.9?n.b.setStyle(t.children[0].children[3],{display:"block"}):n.b.setStyle(t.children[0].children[3],{display:"none"})}setChordVisiable(t,e,i,s){for(let e=1;e<=6;e++)t.children[e].children[1].innerHTML=`${s[e-1]}`,-1==s[e-1]?(n.b.setStyle(t.children[e].children[0],{display:"none"}),n.b.setStyle(t.children[e].children[1],{display:"none"})):(n.b.setStyle(t.children[e].children[0],{display:"block"}),n.b.setStyle(t.children[e].children[1],{display:"block"}));let r=-1;for(let t=0;t<6;t++)if(-1!=s[t]){r=t;break}-1!=r?(n.b.setAttributes(t.children[0].children[0],{y2:`${i+this.stringPadding*r}`}),n.b.setStyle(t.children[0].children[0],{display:"block"})):n.b.setStyle(t.children[0].children[0],{display:"none"})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9TbGltVGFiVjIudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1dGlscyIsIl9fd2VicGFja19leHBvcnRzX18iLCJDYWxsYmFja3MiLCJzZXRBdHRyaWJ1dGVzIiwiZWwiLCJhdHRyIiwiayIsInNldEF0dHJpYnV0ZSIsInNldFN0eWxlIiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsIm5vdGVOdW1iZXIiLCJDIiwiQyMiLCJEIiwiRCMiLCJFIiwiRiIsIkYjIiwiRyIsIkcjIiwiQSIsIkEjIiwiQiIsInJlZ2V4Iiwibm90ZVRvRGVjaW1hbCIsIm5vdGUiLCJncm91cHMiLCJleGVjIiwibGVuZ3RoIiwiTnVtYmVyIiwiQXJyYXlGdW5jdGlvbiIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJmdW5jcyIsImFyZ3MiLCJmb3JFYWNoIiwiZnVuYyIsImNiayIsInB1c2giLCJldmVudFR5cGUiLCJlbGVtZW50IiwiU0xUYWIiLCJfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsImRhdGEiLCJsZW5ndGhQZXJCZWF0IiwiYmVhdFBlclNlY3Rpb24iLCJzZWN0aW9uV2lkdGgiLCJzZWN0aW9uUGVyTGluZSIsInN0cmluZ1BhZGRpbmciLCJsaW5lUGVyUGFnZSIsImxpbmVNYXJnaW4iLCJsaW5lUGFkZGluZyIsIm5vdGVFbGVtZW50Iiwic3RhcnRQb3NpdGlvbiIsImxpbmVJbmZvIiwiYXNzaWduIiwibm90ZXMiLCJzZWN0aW9uIiwibmwiLCJ0bCIsInJlbmRlciIsImFuY2hvciIsInN2Z0VsZW1lbnQiLCJwYWdlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJjcmVhdGVFbGVtZW50TlMiLCJoZWlnaHQiLCJhcHBlbmQiLCJhcHBlbmRDaGlsZCIsImRyYXdBbGxMaW5lIiwic2V0QWxsTm90ZUVsZW1lbnREYXRhIiwiY2FsTm90ZVJhd0RhdGEiLCJsbiIsIk1hdGgiLCJjZWlsIiwiZHJhd0xpbmUiLCJ4IiwieSIsIm5nIiwibGluZUJhY2siLCJuZXdMaW5lIiwieDEiLCJ5MSIsIngyIiwieTIiLCJkcmF3TGluZVRpdGxlIiwiZHJhd0JhciIsInRpdGxlIiwiaW5uZXJIVE1MIiwiYmFyIiwibm90ZUh0bWwiLCJiZWF0TGVuZ3RoIiwicmF3RGF0YSIsIm54IiwibmUiLCJjcmVhdGVOb3RlRWxlbWVudCIsInNldE5vdGVFbGVtZW50RGF0YSIsInNldEVsZW1lbnRQb3NpdGlvbiIsInNldE5vdGVCYXIiLCJzZXRDaG9yZFZpc2lhYmxlIiwiZSIsImNoaWxkcmVuIiwiY3giLCJjeSIsImxmIiwiZGlzcGxheSIsImhjIl0sIm1hcHBpbmdzIjoiMEJBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxF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TUFDL0IsR0FBZDRFLEVBQUs1RSxFQUFFLElBQ04yRSxFQUFBLEVBQU1uQyxTQUFzQitGLEVBQUVDLFNBQVN4SSxHQUFHd0ksU0FBUyxHQUFHLENBQUNJLFFBQVMsU0FDaEVqRSxFQUFBLEVBQU1uQyxTQUFzQitGLEVBQUVDLFNBQVN4SSxHQUFHd0ksU0FBUyxHQUFHLENBQUNJLFFBQVMsV0FFaEVqRSxFQUFBLEVBQU1uQyxTQUFzQitGLEVBQUVDLFNBQVN4SSxHQUFHd0ksU0FBUyxHQUFHLENBQUNJLFFBQVMsVUFDaEVqRSxFQUFBLEVBQU1uQyxTQUFzQitGLEVBQUVDLFNBQVN4SSxHQUFHd0ksU0FBUyxHQUFHLENBQUNJLFFBQVMsV0FHeEUsSUFBSUMsR0FBYyxFQUNsQixJQUFJLElBQUk3SSxFQUFJLEVBQUlBLEVBQUksRUFBR0EsSUFDbkIsSUFBZSxHQUFaNEUsRUFBSzVFLEdBQVMsQ0FDYjZJLEVBQUs3SSxFQUNMLE9BR0UsR0FBUDZJLEdBQ0NsRSxFQUFBLEVBQU14QyxjQUFjb0csRUFBRUMsU0FBUyxHQUFHQSxTQUFTLEdBQUcsQ0FBQ2pCLE1BQU9QLEVBQUkvQyxLQUFLZ0IsY0FBZ0I0RCxNQUMvRWxFLEVBQUEsRUFBTW5DLFNBQXNCK0YsRUFBRUMsU0FBUyxHQUFHQSxTQUFTLEdBQUcsQ0FBQ0ksUUFBUyxXQUVoRWpFLEVBQUEsRUFBTW5DLFNBQXNCK0YsRUFBRUMsU0FBUyxHQUFHQSxTQUFTLEdBQUcsQ0FBQ0ksUUFBUyIsImZpbGUiOiJTbGltVGFiVjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJleHBvcnQgbmFtZXNwYWNlIHV0aWxzIHtcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhlbDogRWxlbWVudCwgYXR0cjp7W2tleTogc3RyaW5nXTogc3RyaW5nfSl7XG4gICAgICAgIGZvcihsZXQgayBpbiBhdHRyKXtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShrLCBhdHRyW2tdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0U3R5bGUoZWw6IEhUTUxFbGVtZW50LCBzdHlsZTp7W2tleTogc3RyaW5nXTogc3RyaW5nfSl7XG4gICAgICAgIGZvcihsZXQgayBpbiBzdHlsZSl7XG4gICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eShrLCBzdHlsZVtrXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBub3RlTnVtYmVyID0ge1wiQ1wiOiAwLCBcIkMjXCI6IDEsIFwiRFwiOiAyLCBcIkQjXCI6IDMsIFwiRVwiOiA0LCBcIkZcIjogNSwgXCJGI1wiOiA2LCBcIkdcIjogNywgXCJHI1wiOiA4LCBcIkFcIjogOSwgXCJBI1wiOiAxMCwgXCJCXCI6IDExfTtcbiAgICBjb25zdCByZWdleCA9IC9eKFtDREVGR0FCXSM/KShbMC05XSkkLztcbiAgICBleHBvcnQgZnVuY3Rpb24gbm90ZVRvRGVjaW1hbChub3RlOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IGdyb3VwcyA9IHJlZ2V4LmV4ZWMobm90ZSk7XG4gICAgICAgIGlmKGdyb3Vwcy5sZW5ndGggIT0gMylcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgcmV0dXJuIG5vdGVOdW1iZXJbZ3JvdXBzWzFdIGFzIGtleW9mIHR5cGVvZiBub3RlTnVtYmVyXSsoTnVtYmVyKGdyb3Vwc1syXSkrMSkqMTI7XG4gICAgfVxufVxuXG5jbGFzcyBBcnJheUZ1bmN0aW9uIHtcbiAgICBwcml2YXRlIGZ1bmNzOiBBcnJheTxGdW5jdGlvbj4gPSBbXTtcbiAgICBjYWxsKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIHRoaXMuZnVuY3MuZm9yRWFjaCgoZnVuYykgPT4ge1xuICAgICAgICAgICAgZnVuYyguLi5hcmdzKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwdXNoKGNiazogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZnVuY3MucHVzaChjYmspO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjbGFzcyBDYWxsYmFja3Mge1xuICAgIFtrZXk6IHN0cmluZ106IEFycmF5RnVuY3Rpb247XG4gICAgY29uc3RydWN0b3IoZXZlbnRUeXBlOiBBcnJheTxzdHJpbmc+KSB7XG4gICAgICAgIGV2ZW50VHlwZS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgdGhpc1tlbGVtZW50XSA9IG5ldyBBcnJheUZ1bmN0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIi8vVGFibGF0dXJlXG5pbXBvcnQge3V0aWxzfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgU0xUYWIge1xuICAgIHByaXZhdGUgbGVuZ3RoUGVyQmVhdDogbnVtYmVyID0gNDtcbiAgICBwcml2YXRlIGJlYXRQZXJTZWN0aW9uOiBudW1iZXIgPSA0O1xuICAgIHByaXZhdGUgc2VjdGlvbldpZHRoOiBudW1iZXIgPSA0MDA7IC8vIHVuaXQgaW4gcGl4ZWxcbiAgICBwcml2YXRlIHNlY3Rpb25QZXJMaW5lOiBudW1iZXIgPSAyO1xuICAgIHByaXZhdGUgc3RyaW5nUGFkZGluZzogbnVtYmVyID0gMTY7XG4gICAgcHJpdmF0ZSBsaW5lUGVyUGFnZTogbnVtYmVyID0gMjA7XG4gICAgcHJpdmF0ZSBsaW5lTWFyZ2luOiBudW1iZXIgPSA0MjtcbiAgICBwcml2YXRlIGxpbmVQYWRkaW5nOiBudW1iZXIgPSAzMjtcbiAgICBwcml2YXRlIG5vdGVzOiBbbnVtYmVyLCBudW1iZXJbXSwgYW55XVtdW107XG4gICAgcHJpdmF0ZSBub3RlRWxlbWVudDogU1ZHRWxlbWVudFtdID0gW107XG4gICAgcHJpdmF0ZSBzdmdFbGVtZW50OiBTVkdFbGVtZW50O1xuICAgIHByaXZhdGUgc3RhcnRQb3NpdGlvbjogbnVtYmVyW10gPSBbdGhpcy5saW5lTWFyZ2luICsgdGhpcy5saW5lUGFkZGluZyArIDIwLCAxMjAgKyAxNF07IC8vIHgsIHlcbiAgICBwcml2YXRlIGxpbmVJbmZvOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbMCwgdGhpcy5saW5lTWFyZ2luLCAxMjBdOyAvLyB0b3RhbCBsaW5lIG51bWJlciwgbGFzdCBsaW5lIFgsIGxhc3QgbGluZSBZXG5cbiAgICBjb25zdHJ1Y3RvcihkYXRhPzoge2xlbmd0aFBlckJlYXQ/OiBudW1iZXIsIGJlYXRQZXJTZWN0aW9uPzogbnVtYmVyLCBzZWN0aW9uV2lkdGg/OiBudW1iZXIsIHNlY3Rpb25QZXJMaW5lPzogbnVtYmVyLCBsaW5lUGVyUGFnZT86IG51bWJlcn0pIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBkYXRhKTtcbiAgICB9XG5cbiAgICBzZXROb3RlRGF0YShkYXRhOiBbbnVtYmVyLCBudW1iZXJbXSwgYW55XVtdW10pIHtcbiAgICAgICAgdGhpcy5ub3RlcyA9IGRhdGE7XG4gICAgfVxuXG4gICAgYWRkTm90ZShzZWN0aW9uOiBudW1iZXIsIGRhdGE6IFtudW1iZXIsIG51bWJlcltdLCBhbnldKSB7IC8vIGlmIHNlY3Rpb24gPT0gLTEsIG5vdGUgd2lsbCBiZSBhcHBlbmRlZCBhdCBsYXN0IHNlY3Rpb25cbiAgICAgICAgaWYoc2VjdGlvbiA9PSAtMSl7XG4gICAgICAgICAgICBsZXQgbmwgPSB0aGlzLm5vdGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCB0bCA9IHRoaXMubGVuZ3RoUGVyQmVhdCAvIGRhdGFbMF07XG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5ub3Rlc1tubC0xXS5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgdGwgKz0gdGhpcy5sZW5ndGhQZXJCZWF0IC8gdGhpcy5ub3Rlc1tubC0xXVtpXVswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRsID4gdGhpcy5iZWF0UGVyU2VjdGlvbil7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlcy5wdXNoKFtkYXRhXSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVzW25sLTFdLnB1c2goZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5ub3Rlc1tzZWN0aW9uXS5wdXNoKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICAgIFxuICAgIHJlbmRlcihhbmNob3I/OiBFbGVtZW50KSB7XG4gICAgICAgIGlmKCF0aGlzLnN2Z0VsZW1lbnQpe1xuICAgICAgICAgICAgbGV0IHBhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgbGV0IHdpZHRoID0gdGhpcy5zZWN0aW9uV2lkdGggKiB0aGlzLnNlY3Rpb25QZXJMaW5lICsgdGhpcy5saW5lUGFkZGluZyoyICsgNDIqMjtcbiAgICAgICAgICAgIHBhZ2Uuc2V0QXR0cmlidXRlKFwic3R5bGVcIixgcG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoIzNFM0UzRSwgIzAwMCkgOyB3aWR0aDogZml0LWNvbnRlbnQ7YCk7XG4gICAgICAgICAgICB0aGlzLnN2Z0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcInN2Z1wiKTtcbiAgICAgICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXModGhpcy5zdmdFbGVtZW50LHt3aWR0aDogYCR7d2lkdGh9YCwgaGVpZ2h0OiBcIjYwMFwifSk7XG4gICAgICAgICAgICBwYWdlLmFwcGVuZCh0aGlzLnN2Z0VsZW1lbnQpO1xuICAgICAgICAgICAgYW5jaG9yLmFwcGVuZENoaWxkKHBhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhd0FsbExpbmUoKTtcbiAgICAgICAgdGhpcy5zZXRBbGxOb3RlRWxlbWVudERhdGEodGhpcy5jYWxOb3RlUmF3RGF0YSgpKTtcbiAgICB9XG4gICAgcHJpdmF0ZSBkcmF3QWxsTGluZSgpIHtcbiAgICAgICAgbGV0IGxuID0gTWF0aC5jZWlsKHRoaXMubm90ZXMubGVuZ3RoIC8gdGhpcy5zZWN0aW9uUGVyTGluZSk7XG4gICAgICAgIGlmKGxuID4gdGhpcy5saW5lSW5mb1swXSl7XG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbG4gLSB0aGlzLmxpbmVJbmZvWzBdOyBpKyspe1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0xpbmUodGhpcy5saW5lSW5mb1sxXSwgdGhpcy5saW5lSW5mb1syXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5saW5lSW5mb1syXSArPSB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1ICsgODA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saW5lSW5mb1swXSA9IGxuO1xuICAgIH1cbiAgICBwcml2YXRlIGRyYXdMaW5lKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIGxldCBuZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwiZ1wiKTtcbiAgICAgICAgbGV0IGxpbmVCYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJyZWN0XCIpO1xuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGxpbmVCYWNrLHt4OiBgJHt4fWAsIHk6YCR7eX1gLHN0eWxlOiBcImZpbGw6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wOSlcIiwgd2lkdGg6YCR7dGhpcy5saW5lUGFkZGluZyoyICsgdGhpcy5zZWN0aW9uV2lkdGggKiB0aGlzLnNlY3Rpb25QZXJMaW5lfWAsIGhlaWdodDogYCR7MTQqMiArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YH0pO1xuICAgICAgICBuZy5hcHBlbmRDaGlsZChsaW5lQmFjayk7XG4gICAgICAgIHggKz0gdGhpcy5saW5lUGFkZGluZztcbiAgICAgICAgeSArPSAxNDtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDY7IGkrKyl7XG4gICAgICAgICAgICBsZXQgbCA9IHRoaXMuc2VjdGlvblBlckxpbmUgKiB0aGlzLnNlY3Rpb25XaWR0aDtcbiAgICAgICAgICAgIGxldCBuZXdMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJsaW5lXCIpO1xuICAgICAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhuZXdMaW5lLHt4MTogYCR7eH1gLCB5MTogYCR7eSArIGkqdGhpcy5zdHJpbmdQYWRkaW5nfWAsIHgyOiBgJHt4ICsgbH1gLCB5MjogYCR7eSArIGkqdGhpcy5zdHJpbmdQYWRkaW5nfWAsIHN0eWxlOiBcInN0cm9rZTpyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMjQpIDtzdHJva2Utd2lkdGg6MlwifSk7XG4gICAgICAgICAgICBuZy5hcHBlbmRDaGlsZChuZXdMaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBuZy5hcHBlbmRDaGlsZCh0aGlzLmRyYXdMaW5lVGl0bGUoeCAtIDMwLCB5KSk7XG5cbiAgICAgICAgbmcuYXBwZW5kQ2hpbGQodGhpcy5kcmF3QmFyKHggLCB5KSk7XG4gICAgICAgIGZvcihsZXQgaSA9IDE7IGkgPCB0aGlzLnNlY3Rpb25QZXJMaW5lICsgMTsgaSsrKXtcbiAgICAgICAgICAgIG5nLmFwcGVuZENoaWxkKHRoaXMuZHJhd0Jhcih4ICsgdGhpcy5zZWN0aW9uV2lkdGgqaSwgeSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3ZnRWxlbWVudC5hcHBlbmRDaGlsZChuZyk7XG4gICAgfVxuICAgIHByaXZhdGUgZHJhd0xpbmVUaXRsZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IFNWR0VsZW1lbnQge1xuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcImdcIik7XG4gICAgICAgIHRpdGxlLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHRleHQgc3R5bGU9XCJmaWxsOiM5NTk1OTU7Zm9udDoxN3B4IGFyaWFsO1wiPlxuICAgICAgICAgICAgPHRzcGFuIHg9JyR7eCArIDEwfScgeT0nJHt5ICsgMjZ9Jz5UPC90c3Bhbj5cbiAgICAgICAgICAgIDx0c3BhbiB4PScke3ggKyAxMH0nIHk9JyR7eSArIDIyICsgMjZ9Jz5BPC90c3Bhbj5cbiAgICAgICAgICAgIDx0c3BhbiB4PScke3ggKyAxMH0nIHk9JyR7eSArIDQ0ICsgMjZ9Jz5CPC90c3Bhbj5cbiAgICAgICAgPC90ZXh0PlxuICAgICAgICBgO1xuICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgfVxuICAgIHByaXZhdGUgZHJhd0Jhcih4OiBudW1iZXIsIHk6IG51bWJlcik6IFNWR0VsZW1lbnQge1xuICAgICAgICBsZXQgYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJsaW5lXCIpO1xuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGJhcix7c3R5bGU6ICdzdHJva2U6cmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI0KSA7c3Ryb2tlLXdpZHRoOjInfSlcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhiYXIse3gxOiBgJHt4fWAsIHkxOiBgJHt5fWAsIHgyOiBgJHt4fWAsIHkyOiBgJHt5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gfSlcbiAgICAgICAgcmV0dXJuIGJhcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZU5vdGVFbGVtZW50KHg6IG51bWJlciA9IDIwMCwgeTpudW1iZXIgPSAyMCl7XG4gICAgICAgIGxldCBub3RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJnXCIpO1xuICAgICAgICBsZXQgbm90ZUh0bWwgPSBgPGc+XG4gICAgICAgIDxsaW5lIHN0eWxlPVwic3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoxXCIgeDE9XCIke3h9XCIgeTE9XCIxNDBcIiB4Mj1cIiR7eH1cIiB5Mj1cIiR7eX1cIj48L2xpbmU+XG4gICAgICAgIDxsaW5lIHN0eWxlPVwic3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyXCIgeDE9XCIke3h9XCIgeTE9XCIxMzhcIiB4Mj1cIiR7eCsxMH1cIiB5Mj1cIjEzOFwiPjwvbGluZT5cbiAgICAgICAgPGxpbmUgc3R5bGU9XCJzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjJcIiB4MT1cIiR7eH1cIiB5MT1cIjEzMFwiIHgyPVwiJHt4KzEwfVwiIHkyPVwiMTMwXCI+PC9saW5lPlxuICAgICAgICA8bGluZSBzdHlsZT1cInN0cm9rZTp3aGl0ZTtzdHJva2Utd2lkdGg6MlwiPjwvbGluZT5cbiAgICAgICAgPC9nPmA7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCA2IDsgaSsrKXtcbiAgICAgICAgICAgIG5vdGVIdG1sICs9IGBcbiAgICAgICAgICAgICAgICA8Zz5cbiAgICAgICAgICAgICAgICA8ZWxsaXBzZSBjeD0nJHt4fScgY3k9JyR7eSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIGl9JyByeD0nNCcgcnk9JzYnIGZpbGw9JyM0NDQnIHN0cm9rZS13aWR0aD0nMCcgc3Ryb2tlPSdibGFjaycgc3R5bGU9J2N1cnNvcjpwb2ludGVyOyc+PC9lbGxpcHNlPlxuICAgICAgICAgICAgICAgIDx0ZXh0IHg9JyR7eCB9JyB5PScke3kgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiBpICsgNH0nIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgc3R5bGU9XCJmb250OjEycHggU2Fucy1zZXJpZjsgZmlsbDojZmZmXCI+MzwvdGV4dD5cbiAgICAgICAgICAgICAgICA8L2c+XG4gICAgICAgICAgICBgO1xuICAgICAgICB9XG4gICAgICAgIG5vdGUuaW5uZXJIVE1MID0gbm90ZUh0bWw7XG4gICAgICAgIHRoaXMuc3ZnRWxlbWVudC5hcHBlbmRDaGlsZChub3RlKTtcbiAgICAgICAgdGhpcy5ub3RlRWxlbWVudC5wdXNoKG5vdGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsTm90ZVJhd0RhdGEoKTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcltdXVtdeyAvLyB4LCB5ICwgbGVuZ3RoLCBibG9jayBvZiBldmVyeSBjaG9yZFxuICAgICAgICBsZXQgW3gsIHldID0gdGhpcy5zdGFydFBvc2l0aW9uO1xuICAgICAgICBsZXQgYmVhdExlbmd0aCA9ICh0aGlzLnNlY3Rpb25XaWR0aCAtIDIwKSAvIHRoaXMuYmVhdFBlclNlY3Rpb247XG4gICAgICAgIGxldCByYXdEYXRhOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyW11dW10gPSBbXTtcbiAgICAgICAgZm9yKGxldCBzID0gMDsgcyA8IHRoaXMubm90ZXMubGVuZ3RoOyBzKyspeyAvLyBzZWN0aW9uXG4gICAgICAgICAgICBpZihzICUgdGhpcy5zZWN0aW9uUGVyTGluZSA9PSAwKXtcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5zdGFydFBvc2l0aW9uWzBdO1xuICAgICAgICAgICAgICAgIGlmKHMgIT0gMCl5ICs9IHRoaXMuc3RyaW5nUGFkZGluZyAqIDUgKyA4MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBueCA9IHggKyB0aGlzLnNlY3Rpb25XaWR0aDtcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm5vdGVzW3NdLmxlbmd0aDsgaSsrKXsgLy8gbm90ZVxuICAgICAgICAgICAgICAgIGxldCBub3RlID0gdGhpcy5ub3Rlc1tzXVtpXTtcbiAgICAgICAgICAgICAgICByYXdEYXRhLnB1c2goW3gsIHksIG5vdGVbMF0sIG5vdGVbMV1dKTtcbiAgICAgICAgICAgICAgICBsZXQgc3RlcCA9IGJlYXRMZW5ndGggKiB0aGlzLmxlbmd0aFBlckJlYXQgLyBub3RlWzBdO1xuICAgICAgICAgICAgICAgIHggKz0gc3RlcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHggPSBueDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmF3RGF0YTtcbiAgICB9XG4gICAgcHJpdmF0ZSBzZXRBbGxOb3RlRWxlbWVudERhdGEoZGF0YTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcltdXVtdKXtcbiAgICAgICAgbGV0IG5lID0gZGF0YS5sZW5ndGggLSB0aGlzLm5vdGVFbGVtZW50Lmxlbmd0aDtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG5lOyBpKyspe1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVOb3RlRWxlbWVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIHRoaXMuc2V0Tm90ZUVsZW1lbnREYXRhKHRoaXMubm90ZUVsZW1lbnRbaV0sIGRhdGFbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgc2V0Tm90ZUVsZW1lbnREYXRhKGVsOlNWR0VsZW1lbnQsIGRhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJbXV0pe1xuICAgICAgICB0aGlzLnNldEVsZW1lbnRQb3NpdGlvbihlbCwgZGF0YVswXSwgZGF0YVsxXSk7XG4gICAgICAgIHRoaXMuc2V0Tm90ZUJhcihlbCwgZGF0YVsyXSk7XG4gICAgICAgIHRoaXMuc2V0Q2hvcmRWaXNpYWJsZShlbCwgZGF0YVswXSwgZGF0YVsxXSwgZGF0YVszXSk7XG4gICAgfVxuICAgIHByaXZhdGUgc2V0RWxlbWVudFBvc2l0aW9uKGU6U1ZHRWxlbWVudCwgeDpudW1iZXIsIHk6bnVtYmVyKXtcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLHt4MTogYCR7eH1gLCB5MTogYCR7MjYgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gLCB4MjogYCR7eH1gLCB5MjogYCR7eX1gfSk7XG4gICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5jaGlsZHJlblswXS5jaGlsZHJlblsxXSx7eDE6IGAke3h9YCwgeTE6IGAkezI1ICsgeSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YCwgeDI6IGAke3ggKyAxMH1gLCB5MjogYCR7MjUgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gfSk7XG4gICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5jaGlsZHJlblswXS5jaGlsZHJlblsyXSx7eDE6IGAke3h9YCwgeTE6IGAkezIxICsgeSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YCwgeDI6IGAke3ggKyAxMH1gLCB5MjogYCR7MjEgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gfSk7XG4gICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5jaGlsZHJlblswXS5jaGlsZHJlblszXSx7eDE6IGAke3h9YCwgeTE6IGAkezE3ICsgeSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YCwgeDI6IGAke3ggKyAxMH1gLCB5MjogYCR7MTcgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gfSk7XG4gICAgICAgIGZvcihsZXQgaSA9IDEgOyBpIDw9IDY7IGkrKyl7XG4gICAgICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGUuY2hpbGRyZW5baV0uY2hpbGRyZW5bMF0sIHtjeDogYCR7eH1gLCBjeTogYCR7eSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIChpLTEpfWB9KTtcbiAgICAgICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5jaGlsZHJlbltpXS5jaGlsZHJlblsxXSwge3g6IGAke3h9YCwgeTogYCR7eSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIChpLTEpICsgNH1gfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBzZXROb3RlQmFyKGU6U1ZHRWxlbWVudCwgbGVuZ3RoOiBudW1iZXIpe1xuICAgICAgICBsZXQgbGYgPSBsZW5ndGggLyB0aGlzLmxlbmd0aFBlckJlYXQ7XG4gICAgICAgIGlmKGxmID4gMS45KXtcbiAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLHtkaXNwbGF5OiBcImJsb2NrXCJ9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlblswXS5jaGlsZHJlblsxXSx7ZGlzcGxheTogXCJub25lXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICBpZihsZiA+IDMuOSl7XG4gICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlblswXS5jaGlsZHJlblsyXSx7ZGlzcGxheTogXCJibG9ja1wifSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoPEhUTUxFbGVtZW50PmUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMl0se2Rpc3BsYXk6IFwibm9uZVwifSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYobGYgPiA3Ljkpe1xuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoPEhUTUxFbGVtZW50PmUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bM10se2Rpc3BsYXk6IFwiYmxvY2tcIn0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzNdLHtkaXNwbGF5OiBcIm5vbmVcIn0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByaXZhdGUgc2V0Q2hvcmRWaXNpYWJsZShlOlNWR0VsZW1lbnQsIHg6IG51bWJlciwgeTogbnVtYmVyLCBkYXRhOiBudW1iZXJbXSl7XG4gICAgICAgIGZvcihsZXQgaSA9IDEgOyBpIDw9IDY7IGkrKyl7XG4gICAgICAgICAgICBlLmNoaWxkcmVuW2ldLmNoaWxkcmVuWzFdLmlubmVySFRNTCA9IGAke2RhdGFbaS0xXX1gO1xuICAgICAgICAgICAgaWYoZGF0YVtpLTFdID09IC0xKXtcbiAgICAgICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlbltpXS5jaGlsZHJlblswXSx7ZGlzcGxheTogXCJub25lXCJ9KTtcbiAgICAgICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlbltpXS5jaGlsZHJlblsxXSx7ZGlzcGxheTogXCJub25lXCJ9KTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuW2ldLmNoaWxkcmVuWzBdLHtkaXNwbGF5OiBcImJsb2NrXCJ9KTtcbiAgICAgICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlbltpXS5jaGlsZHJlblsxXSx7ZGlzcGxheTogXCJibG9ja1wifSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGhjOiBudW1iZXIgPSAtMTtcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCA2OyBpKyspe1xuICAgICAgICAgICAgaWYoZGF0YVtpXSAhPSAtMSl7XG4gICAgICAgICAgICAgICAgaGMgPSBpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgfVxuICAgICAgICBpZihoYyAhPSAtMSl7XG4gICAgICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0se3kyOiBgJHt5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogaGN9YH0pO1xuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoPEhUTUxFbGVtZW50PmUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0se2Rpc3BsYXk6IFwiYmxvY2tcIn0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLHtkaXNwbGF5OiBcIm5vbmVcIn0pO1xuICAgICAgICB9XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=