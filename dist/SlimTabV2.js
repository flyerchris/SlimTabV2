var SlimTabV2=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";var n;i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r}),function(t){t.setAttributes=function(t,e){for(let i in e)t.setAttribute(i,e[i])},t.setStyle=function(t,e){for(let i in e)t.style.setProperty(i,e[i])};const e={C:0,"C#":1,D:2,"D#":3,E:4,F:5,"F#":6,G:7,"G#":8,A:9,"A#":10,B:11},i=/^([CDEFGAB]#?)([0-9])$/;t.noteToDecimal=function(t){let n=i.exec(t);return 3!=n.length?-1:e[n[1]]+12*(Number(n[2])+1)}}(n||(n={}));class s{constructor(){this.funcs=[]}callAll(...t){this.funcs.forEach(e=>{e(...t)})}push(t){this.funcs.push(t)}}class r{constructor(t){t.forEach(t=>{this[t]=new s})}}},,function(t,e,i){"use strict";i.r(e),i.d(e,"SLTab",function(){return s});var n=i(0);class s{constructor(t){this.lengthPerBeat=4,this.beatPerSection=4,this.sectionWidth=400,this.sectionPerLine=2,this.stringPadding=16,this.linePerPage=20,this.lineMargin=42,this.linePadding=[32,14],this.lineDistance=90,this.noteElement=[],this.startPosition=[this.lineMargin+this.linePadding[0]+20,120+this.linePadding[1]],this.lineInfo=[0,this.lineMargin,120],Object.assign(this,t)}setNoteData(t){this.notes=t}addNote(t,e){if(-1==t){let t=this.notes.length,i=this.lengthPerBeat/e[0];for(let e=0;e<this.notes[t-1].length;e++)i+=this.lengthPerBeat/this.notes[t-1][e][0];i>this.beatPerSection?this.notes.push([e]):this.notes[t-1].push(e)}else this.notes[t].push(e);this.render()}render(t){if(!this.svgElement){let e=document.createElement("div"),i=this.sectionWidth*this.sectionPerLine+2*this.linePadding[0]+84;e.setAttribute("style","position: relative; background: radial-gradient(#3E3E3E, #000) ; width: fit-content;"),this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.b.setAttributes(this.svgElement,{width:`${i}`,height:"600"}),this.svgElement.innerHTML="<g></g><g></g>",e.append(this.svgElement),t.appendChild(e)}this.drawAllLine(),this.setAllNoteElementData(this.calNoteRawData())}drawAllLine(){let t=Math.ceil(this.notes.length/this.sectionPerLine);if(t>this.lineInfo[0])for(let e=0;e<t-this.lineInfo[0];e++){let t=this.drawLine(this.lineInfo[1],this.lineInfo[2]);this.svgElement.children[0].appendChild(t),this.lineInfo[2]+=5*this.stringPadding+this.lineDistance}this.lineInfo[0]=t}drawLine(t,e){let i=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","rect");n.b.setAttributes(s,{x:`${t}`,y:`${e}`,style:"fill: rgba(255, 255, 255, 0.09)",width:`${2*this.linePadding[0]+this.sectionWidth*this.sectionPerLine}`,height:`${2*this.linePadding[1]+5*this.stringPadding}`}),i.appendChild(s),t+=this.linePadding[0],e+=this.linePadding[1];for(let s=0;s<6;s++){let r=this.sectionPerLine*this.sectionWidth,l=document.createElementNS("http://www.w3.org/2000/svg","line");n.b.setAttributes(l,{x1:`${t}`,y1:`${e+s*this.stringPadding}`,x2:`${t+r}`,y2:`${e+s*this.stringPadding}`,style:"stroke:rgba(255, 255, 255, 0.24) ;stroke-width:2"}),i.appendChild(l)}i.appendChild(this.drawLineTitle(t-30,e)),i.appendChild(this.drawBar(t,e));for(let n=1;n<this.sectionPerLine+1;n++)i.appendChild(this.drawBar(t+this.sectionWidth*n,e));return i}drawLineTitle(t,e){let i=document.createElementNS("http://www.w3.org/2000/svg","g");return i.innerHTML=`\n        <text style="fill:#959595;font:17px arial;">\n            <tspan x='${t+10}' y='${e+26}'>T</tspan>\n            <tspan x='${t+10}' y='${e+22+26}'>A</tspan>\n            <tspan x='${t+10}' y='${e+44+26}'>B</tspan>\n        </text>\n        `,i}drawBar(t,e){let i=document.createElementNS("http://www.w3.org/2000/svg","line");return n.b.setAttributes(i,{style:"stroke:rgba(255, 255, 255, 0.24) ;stroke-width:2"}),n.b.setAttributes(i,{x1:`${t}`,y1:`${e}`,x2:`${t}`,y2:`${e+5*this.stringPadding}`}),i}createNoteElement(t=200,e=20){let i=document.createElementNS("http://www.w3.org/2000/svg","g"),n=`<g>\n        <line style="stroke:white;stroke-width:1" x1="${t}" y1="140" x2="${t}" y2="${e}"></line>\n        <line style="stroke:white;stroke-width:2" x1="${t}" y1="138" x2="${t+10}" y2="138"></line>\n        <line style="stroke:white;stroke-width:2" x1="${t}" y1="130" x2="${t+10}" y2="130"></line>\n        <line style="stroke:white;stroke-width:2"></line>\n        </g>`;for(let i=0;i<6;i++)n+=`\n                <g>\n                <ellipse cx='${t}' cy='${e+this.stringPadding*i}' rx='4' ry='6' fill='#444' stroke-width='0' stroke='black' style='cursor:pointer;'></ellipse>\n                <text x='${t}' y='${e+this.stringPadding*i+4}' text-anchor="middle" style="font:12px Sans-serif; fill:#fff">3</text>\n                </g>\n            `;i.innerHTML=n,this.svgElement.children[1].appendChild(i),this.noteElement.push(i)}calNoteRawData(){let[t,e]=this.startPosition,i=(this.sectionWidth-20)/this.beatPerSection,n=[];for(let s=0;s<this.notes.length;s++){s%this.sectionPerLine==0&&(t=this.startPosition[0],0!=s&&(e+=5*this.stringPadding+this.lineDistance));let r=t+this.sectionWidth;for(let r=0;r<this.notes[s].length;r++){let l=this.notes[s][r];n.push([t,e,l[0],l[1]]),t+=i*this.lengthPerBeat/l[0]}t=r}return n}setAllNoteElementData(t){let e=t.length-this.noteElement.length;for(let t=0;t<e;t++)this.createNoteElement();for(let e=0;e<t.length;e++)this.setNoteElementData(this.noteElement[e],t[e])}setNoteElementData(t,e){this.setElementPosition(t,e[0],e[1]),this.setNoteBar(t,e[2]),this.setChordVisiable(t,e[1],e[3])}setElementPosition(t,e,i){n.b.setAttributes(t.children[0].children[0],{x1:`${e}`,y1:`${26+i+5*this.stringPadding}`,x2:`${e}`,y2:`${i}`}),n.b.setAttributes(t.children[0].children[1],{x1:`${e}`,y1:`${25+i+5*this.stringPadding}`,x2:`${e+10}`,y2:`${25+i+5*this.stringPadding}`}),n.b.setAttributes(t.children[0].children[2],{x1:`${e}`,y1:`${21+i+5*this.stringPadding}`,x2:`${e+10}`,y2:`${21+i+5*this.stringPadding}`}),n.b.setAttributes(t.children[0].children[3],{x1:`${e}`,y1:`${17+i+5*this.stringPadding}`,x2:`${e+10}`,y2:`${17+i+5*this.stringPadding}`});for(let s=1;s<=6;s++)n.b.setAttributes(t.children[s].children[0],{cx:`${e}`,cy:`${i+this.stringPadding*(s-1)}`}),n.b.setAttributes(t.children[s].children[1],{x:`${e}`,y:`${i+this.stringPadding*(s-1)+4}`})}setNoteBar(t,e){let i=e/this.lengthPerBeat;i>1.9?n.b.setStyle(t.children[0].children[1],{display:"block"}):n.b.setStyle(t.children[0].children[1],{display:"none"}),i>3.9?n.b.setStyle(t.children[0].children[2],{display:"block"}):n.b.setStyle(t.children[0].children[2],{display:"none"}),i>7.9?n.b.setStyle(t.children[0].children[3],{display:"block"}):n.b.setStyle(t.children[0].children[3],{display:"none"})}setChordVisiable(t,e,i){for(let e=1;e<=6;e++)t.children[e].children[1].innerHTML=`${i[e-1]}`,-1==i[e-1]?(n.b.setStyle(t.children[e].children[0],{display:"none"}),n.b.setStyle(t.children[e].children[1],{display:"none"})):(n.b.setStyle(t.children[e].children[0],{display:"block"}),n.b.setStyle(t.children[e].children[1],{display:"block"}));let s=-1;for(let t=0;t<6;t++)if(-1!=i[t]){s=t;break}-1!=s?(n.b.setAttributes(t.children[0].children[0],{y2:`${e+this.stringPadding*s}`}),n.b.setStyle(t.children[0].children[0],{display:"block"})):n.b.setStyle(t.children[0].children[0],{display:"none"})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9TbGltVGFiVjIudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ1dGlscyIsIl9fd2VicGFja19leHBvcnRzX18iLCJDYWxsYmFja3MiLCJzZXRBdHRyaWJ1dGVzIiwiZWwiLCJhdHRyIiwiayIsInNldEF0dHJpYnV0ZSIsInNldFN0eWxlIiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsIm5vdGVOdW1iZXIiLCJDIiwiQyMiLCJEIiwiRCMiLCJFIiwiRiIsIkYjIiwiRyIsIkcjIiwiQSIsIkEjIiwiQiIsInJlZ2V4Iiwibm90ZVRvRGVjaW1hbCIsIm5vdGUiLCJncm91cHMiLCJleGVjIiwibGVuZ3RoIiwiTnVtYmVyIiwiQXJyYXlGdW5jdGlvbiIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJmdW5jcyIsImFyZ3MiLCJmb3JFYWNoIiwiZnVuYyIsImNiayIsInB1c2giLCJldmVudFR5cGUiLCJlbGVtZW50IiwiU0xUYWIiLCJfdXRpbHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsImRhdGEiLCJsZW5ndGhQZXJCZWF0IiwiYmVhdFBlclNlY3Rpb24iLCJzZWN0aW9uV2lkdGgiLCJzZWN0aW9uUGVyTGluZSIsInN0cmluZ1BhZGRpbmciLCJsaW5lUGVyUGFnZSIsImxpbmVNYXJnaW4iLCJsaW5lUGFkZGluZyIsImxpbmVEaXN0YW5jZSIsIm5vdGVFbGVtZW50Iiwic3RhcnRQb3NpdGlvbiIsImxpbmVJbmZvIiwiYXNzaWduIiwibm90ZXMiLCJzZWN0aW9uIiwibmwiLCJ0bCIsInJlbmRlciIsImFuY2hvciIsInN2Z0VsZW1lbnQiLCJwYWdlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJjcmVhdGVFbGVtZW50TlMiLCJoZWlnaHQiLCJpbm5lckhUTUwiLCJhcHBlbmQiLCJhcHBlbmRDaGlsZCIsImRyYXdBbGxMaW5lIiwic2V0QWxsTm90ZUVsZW1lbnREYXRhIiwiY2FsTm90ZVJhd0RhdGEiLCJsbiIsIk1hdGgiLCJjZWlsIiwiZHJhd0xpbmUiLCJjaGlsZHJlbiIsIngiLCJ5IiwibmciLCJsaW5lQmFjayIsIm5ld0xpbmUiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImRyYXdMaW5lVGl0bGUiLCJkcmF3QmFyIiwidGl0bGUiLCJiYXIiLCJub3RlSHRtbCIsImJlYXRMZW5ndGgiLCJyYXdEYXRhIiwibngiLCJuZSIsImNyZWF0ZU5vdGVFbGVtZW50Iiwic2V0Tm90ZUVsZW1lbnREYXRhIiwic2V0RWxlbWVudFBvc2l0aW9uIiwic2V0Tm90ZUJhciIsInNldENob3JkVmlzaWFibGUiLCJlIiwiY3giLCJjeSIsImxmIiwiZGlzcGxheSIsImhjIl0sIm1hcHBpbmdzIjoiMEJBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9E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Q29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJleHBvcnQgbmFtZXNwYWNlIHV0aWxzIHtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGVsOiBFbGVtZW50LCBhdHRyOntba2V5OiBzdHJpbmddOiBzdHJpbmd9KXtcclxuICAgICAgICBmb3IobGV0IGsgaW4gYXR0cil7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShrLCBhdHRyW2tdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0U3R5bGUoZWw6IEhUTUxFbGVtZW50LCBzdHlsZTp7W2tleTogc3RyaW5nXTogc3RyaW5nfSl7XHJcbiAgICAgICAgZm9yKGxldCBrIGluIHN0eWxlKXtcclxuICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoaywgc3R5bGVba10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub3RlTnVtYmVyID0ge1wiQ1wiOiAwLCBcIkMjXCI6IDEsIFwiRFwiOiAyLCBcIkQjXCI6IDMsIFwiRVwiOiA0LCBcIkZcIjogNSwgXCJGI1wiOiA2LCBcIkdcIjogNywgXCJHI1wiOiA4LCBcIkFcIjogOSwgXCJBI1wiOiAxMCwgXCJCXCI6IDExfTtcclxuICAgIGNvbnN0IHJlZ2V4ID0gL14oW0NERUZHQUJdIz8pKFswLTldKSQvO1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG5vdGVUb0RlY2ltYWwobm90ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwcyA9IHJlZ2V4LmV4ZWMobm90ZSk7XHJcbiAgICAgICAgaWYoZ3JvdXBzLmxlbmd0aCAhPSAzKVxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgcmV0dXJuIG5vdGVOdW1iZXJbZ3JvdXBzWzFdIGFzIGtleW9mIHR5cGVvZiBub3RlTnVtYmVyXSsoTnVtYmVyKGdyb3Vwc1syXSkrMSkqMTI7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBBcnJheUZ1bmN0aW9uIHtcclxuICAgIHByaXZhdGUgZnVuY3M6IEFycmF5PEZ1bmN0aW9uPiA9IFtdO1xyXG4gICAgY2FsbEFsbCguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICAgIHRoaXMuZnVuY3MuZm9yRWFjaCgoZnVuYykgPT4ge1xyXG4gICAgICAgICAgICBmdW5jKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVzaChjYms6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZnVuY3MucHVzaChjYmspO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIENhbGxiYWNrcyB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheUZ1bmN0aW9uO1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRUeXBlOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgZXZlbnRUeXBlLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXNbZWxlbWVudF0gPSBuZXcgQXJyYXlGdW5jdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCIvL1RhYmxhdHVyZVxyXG5cclxuaW1wb3J0IHt1dGlsc30gZnJvbSBcIi4vdXRpbHNcIlxyXG4gLyoqXHJcbiAgKiByZW5kZXIgcGlwZWxpbmU6IGRyYXcgbmVjZXNzYXJ5IGxpbmVzIChkcmF3QWxsTGluZSlcclxuICAqICAgICAgICAgICAgICAgICA9PiBjYWN1bGF0ZSBlYWNoIG5vdGUgcG9zaXRpb24gKGNhbE5vdGVSYXdEYXRhKVxyXG4gICogICAgICAgICAgICAgICAgID0+IGNyZWF0ZSBlbm91Z2ggc3ZnIGVsZW1lbnQgYW5kIHJldXNlIHRoZW0gKHNldEFsbE5vdGVFbGVtZW50RGF0YSlcclxuICAqICAgICAgICAgICAgICAgICA9PiBzZXQgZWxlbWVudHMgZGF0YSAgKHNldE5vdGVFbGVtZW50RGF0YSlcclxuICAqICAgICAgICAgICAgICAgICAgXHJcbiAgKi9cclxuXHJcbmV4cG9ydCBjbGFzcyBTTFRhYiB7XHJcbiAgICBwcml2YXRlIGxlbmd0aFBlckJlYXQ6IG51bWJlciA9IDQ7XHJcbiAgICBwcml2YXRlIGJlYXRQZXJTZWN0aW9uOiBudW1iZXIgPSA0O1xyXG4gICAgcHJpdmF0ZSBzZWN0aW9uV2lkdGg6IG51bWJlciA9IDQwMDsgLy8gdW5pdCBpbiBwaXhlbFxyXG4gICAgcHJpdmF0ZSBzZWN0aW9uUGVyTGluZTogbnVtYmVyID0gMjtcclxuICAgIHByaXZhdGUgc3RyaW5nUGFkZGluZzogbnVtYmVyID0gMTY7IC8vIGRpc3RhbmNlIGJldHdlZW4gZWFjaCBzdHJpbmdcclxuICAgIHByaXZhdGUgbGluZVBlclBhZ2U6IG51bWJlciA9IDIwO1xyXG4gICAgcHJpdmF0ZSBsaW5lTWFyZ2luOiBudW1iZXIgPSA0MjsgLy8gb25seSBmb3IgbGVmdCBhbmQgcmlnaHRcclxuICAgIHByaXZhdGUgbGluZVBhZGRpbmc6IFtudW1iZXIsIG51bWJlcl0gPSBbMzIsIDE0XTtcclxuICAgIHByaXZhdGUgbGluZURpc3RhbmNlOiBudW1iZXIgPSA5MDsgLy8gZGlzdGFuY2UgYmV0d2VlbiBlYWNoIGxpbmVcclxuICAgIHByaXZhdGUgbm90ZXM6IFtudW1iZXIsIG51bWJlcltdLCBhbnldW11bXTtcclxuICAgIHByaXZhdGUgbm90ZUVsZW1lbnQ6IFNWR0VsZW1lbnRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzdmdFbGVtZW50OiBTVkdFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdGFydFBvc2l0aW9uOiBudW1iZXJbXSA9IFt0aGlzLmxpbmVNYXJnaW4gKyB0aGlzLmxpbmVQYWRkaW5nWzBdICsgMjAsIDEyMCArIHRoaXMubGluZVBhZGRpbmdbMV1dOyAvLyB4LCB5XHJcbiAgICBwcml2YXRlIGxpbmVJbmZvOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbMCwgdGhpcy5saW5lTWFyZ2luLCAxMjBdOyAvLyB0b3RhbCBsaW5lIG51bWJlciwgbGFzdCBsaW5lIFgsIGxhc3QgbGluZSBZXHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YT86IHtsZW5ndGhQZXJCZWF0PzogbnVtYmVyLCBiZWF0UGVyU2VjdGlvbj86IG51bWJlciwgc2VjdGlvbldpZHRoPzogbnVtYmVyLCBzZWN0aW9uUGVyTGluZT86IG51bWJlciwgbGluZVBlclBhZ2U/OiBudW1iZXJ9KSB7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgIG5vdGVzIGRhdGEgZXhhbXBsZSA6XHJcbiAgICBbXHJcbiAgICAgICAgWy8vIHNlY3Rpb25cclxuICAgICAgICAgICAgWzQsIFszLCAtMSwgLTEsIDQsIC0xLCAtMV0sIG51bGxdLCAvLyBub3RlIGxlbmd0aCwgW2Jsb2NrIG51bWJlciwgaW5kZXggaXMgc3RyaW5nIG51bWJlcixdLCB1c2VyIGRhdGFcclxuICAgICAgICAgICAgWzgsIFstMSwgNSwgMiwgLTEsIC0xLCAtMV0sIG51bGxdLFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgW1xyXG4gICAgICAgICAgICBbMTYsIFstMSwgNSwgMiwgLTEsIC0xLCAtMV0sIG51bGxdLFxyXG4gICAgICAgIF0sXHJcbiAgICBdXHJcbiAgICAqL1xyXG4gICAgc2V0Tm90ZURhdGEoZGF0YTogW251bWJlciwgbnVtYmVyW10sIGFueV1bXVtdKSB7XHJcbiAgICAgICAgdGhpcy5ub3RlcyA9IGRhdGE7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogYWRkIGEgbm90ZVxyXG4gICAgICogQHBhcmFtIHsgbnVtYmVyIH0gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24sIGlmIGdpdmUgLTEsIG5vdGUgd2lsbCBiZSBhcHBlbmRlZCBhdCBsYXN0IHNlY3Rpb25cclxuICAgICAqIEBwYXJhbSB7IFtudW1iZXIsIG51bWJlcltdLCBhbnldIH0gICBkYXRhXHJcbiAgICAgKi9cclxuICAgIGFkZE5vdGUoc2VjdGlvbjogbnVtYmVyLCBkYXRhOiBbbnVtYmVyLCBudW1iZXJbXSwgYW55XSkge1xyXG4gICAgICAgIGlmKHNlY3Rpb24gPT0gLTEpe1xyXG4gICAgICAgICAgICBsZXQgbmwgPSB0aGlzLm5vdGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgbGV0IHRsID0gdGhpcy5sZW5ndGhQZXJCZWF0IC8gZGF0YVswXTtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubm90ZXNbbmwtMV0ubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdGwgKz0gdGhpcy5sZW5ndGhQZXJCZWF0IC8gdGhpcy5ub3Rlc1tubC0xXVtpXVswXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih0bCA+IHRoaXMuYmVhdFBlclNlY3Rpb24pe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlcy5wdXNoKFtkYXRhXSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3Rlc1tubC0xXS5wdXNoKGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubm90ZXNbc2VjdGlvbl0ucHVzaChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVuZGVyKGFuY2hvcj86IEVsZW1lbnQpIHtcclxuICAgICAgICBpZighdGhpcy5zdmdFbGVtZW50KXsgLy8gbW91bnQgb24gYW4gZWxlbWVudFxyXG4gICAgICAgICAgICBsZXQgcGFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHRoaXMuc2VjdGlvbldpZHRoICogdGhpcy5zZWN0aW9uUGVyTGluZSArIHRoaXMubGluZVBhZGRpbmdbMF0qMiArIDQyKjI7XHJcbiAgICAgICAgICAgIHBhZ2Uuc2V0QXR0cmlidXRlKFwic3R5bGVcIixgcG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoIzNFM0UzRSwgIzAwMCkgOyB3aWR0aDogZml0LWNvbnRlbnQ7YCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3ZnRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwic3ZnXCIpO1xyXG4gICAgICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKHRoaXMuc3ZnRWxlbWVudCx7d2lkdGg6IGAke3dpZHRofWAsIGhlaWdodDogXCI2MDBcIn0pO1xyXG4gICAgICAgICAgICB0aGlzLnN2Z0VsZW1lbnQuaW5uZXJIVE1MID0gXCI8Zz48L2c+PGc+PC9nPlwiOyAvLyBsaW5lcywgbm90ZXNcclxuICAgICAgICAgICAgcGFnZS5hcHBlbmQodGhpcy5zdmdFbGVtZW50KTtcclxuICAgICAgICAgICAgYW5jaG9yLmFwcGVuZENoaWxkKHBhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRyYXdBbGxMaW5lKCk7XHJcbiAgICAgICAgdGhpcy5zZXRBbGxOb3RlRWxlbWVudERhdGEodGhpcy5jYWxOb3RlUmF3RGF0YSgpKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZHJhd0FsbExpbmUoKSB7XHJcbiAgICAgICAgbGV0IGxuID0gTWF0aC5jZWlsKHRoaXMubm90ZXMubGVuZ3RoIC8gdGhpcy5zZWN0aW9uUGVyTGluZSk7XHJcbiAgICAgICAgaWYobG4gPiB0aGlzLmxpbmVJbmZvWzBdKXtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxuIC0gdGhpcy5saW5lSW5mb1swXTsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGxldCBubCA9IHRoaXMuZHJhd0xpbmUodGhpcy5saW5lSW5mb1sxXSwgdGhpcy5saW5lSW5mb1syXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN2Z0VsZW1lbnQuY2hpbGRyZW5bMF0uYXBwZW5kQ2hpbGQobmwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lSW5mb1syXSArPSB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1ICsgdGhpcy5saW5lRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saW5lSW5mb1swXSA9IGxuO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBkcmF3TGluZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IFNWR0VsZW1lbnQge1xyXG4gICAgICAgIGxldCBuZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwiZ1wiKTtcclxuICAgICAgICBsZXQgbGluZUJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcInJlY3RcIik7XHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhsaW5lQmFjayx7eDogYCR7eH1gLCB5OmAke3l9YCxzdHlsZTogXCJmaWxsOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDkpXCIsIHdpZHRoOmAke3RoaXMubGluZVBhZGRpbmdbMF0qMiArIHRoaXMuc2VjdGlvbldpZHRoICogdGhpcy5zZWN0aW9uUGVyTGluZX1gLCBoZWlnaHQ6IGAke3RoaXMubGluZVBhZGRpbmdbMV0qMiArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YH0pO1xyXG4gICAgICAgIG5nLmFwcGVuZENoaWxkKGxpbmVCYWNrKTtcclxuICAgICAgICB4ICs9IHRoaXMubGluZVBhZGRpbmdbMF07XHJcbiAgICAgICAgeSArPSB0aGlzLmxpbmVQYWRkaW5nWzFdO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCA2OyBpKyspe1xyXG4gICAgICAgICAgICBsZXQgbCA9IHRoaXMuc2VjdGlvblBlckxpbmUgKiB0aGlzLnNlY3Rpb25XaWR0aDtcclxuICAgICAgICAgICAgbGV0IG5ld0xpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcImxpbmVcIik7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMobmV3TGluZSx7eDE6IGAke3h9YCwgeTE6IGAke3kgKyBpKnRoaXMuc3RyaW5nUGFkZGluZ31gLCB4MjogYCR7eCArIGx9YCwgeTI6IGAke3kgKyBpKnRoaXMuc3RyaW5nUGFkZGluZ31gLCBzdHlsZTogXCJzdHJva2U6cmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI0KSA7c3Ryb2tlLXdpZHRoOjJcIn0pO1xyXG4gICAgICAgICAgICBuZy5hcHBlbmRDaGlsZChuZXdMaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmcuYXBwZW5kQ2hpbGQodGhpcy5kcmF3TGluZVRpdGxlKHggLSAzMCwgeSkpO1xyXG5cclxuICAgICAgICBuZy5hcHBlbmRDaGlsZCh0aGlzLmRyYXdCYXIoeCAsIHkpKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAxOyBpIDwgdGhpcy5zZWN0aW9uUGVyTGluZSArIDE7IGkrKyl7XHJcbiAgICAgICAgICAgIG5nLmFwcGVuZENoaWxkKHRoaXMuZHJhd0Jhcih4ICsgdGhpcy5zZWN0aW9uV2lkdGgqaSwgeSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmc7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGRyYXdMaW5lVGl0bGUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBTVkdFbGVtZW50IHtcclxuICAgICAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcImdcIik7XHJcbiAgICAgICAgdGl0bGUuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDx0ZXh0IHN0eWxlPVwiZmlsbDojOTU5NTk1O2ZvbnQ6MTdweCBhcmlhbDtcIj5cclxuICAgICAgICAgICAgPHRzcGFuIHg9JyR7eCArIDEwfScgeT0nJHt5ICsgMjZ9Jz5UPC90c3Bhbj5cclxuICAgICAgICAgICAgPHRzcGFuIHg9JyR7eCArIDEwfScgeT0nJHt5ICsgMjIgKyAyNn0nPkE8L3RzcGFuPlxyXG4gICAgICAgICAgICA8dHNwYW4geD0nJHt4ICsgMTB9JyB5PScke3kgKyA0NCArIDI2fSc+QjwvdHNwYW4+XHJcbiAgICAgICAgPC90ZXh0PlxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgcmV0dXJuIHRpdGxlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBkcmF3QmFyKHg6IG51bWJlciwgeTogbnVtYmVyKTogU1ZHRWxlbWVudCB7XHJcbiAgICAgICAgbGV0IGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwibGluZVwiKTtcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGJhcix7c3R5bGU6ICdzdHJva2U6cmdiYSgyNTUsIDI1NSwgMjU1LCAwLjI0KSA7c3Ryb2tlLXdpZHRoOjInfSlcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGJhcix7eDE6IGAke3h9YCwgeTE6IGAke3l9YCwgeDI6IGAke3h9YCwgeTI6IGAke3kgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1fWB9KVxyXG4gICAgICAgIHJldHVybiBiYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVOb3RlRWxlbWVudCh4OiBudW1iZXIgPSAyMDAsIHk6bnVtYmVyID0gMjApe1xyXG4gICAgICAgIGxldCBub3RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJnXCIpO1xyXG4gICAgICAgIGxldCBub3RlSHRtbCA9IGA8Zz5cclxuICAgICAgICA8bGluZSBzdHlsZT1cInN0cm9rZTp3aGl0ZTtzdHJva2Utd2lkdGg6MVwiIHgxPVwiJHt4fVwiIHkxPVwiMTQwXCIgeDI9XCIke3h9XCIgeTI9XCIke3l9XCI+PC9saW5lPlxyXG4gICAgICAgIDxsaW5lIHN0eWxlPVwic3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyXCIgeDE9XCIke3h9XCIgeTE9XCIxMzhcIiB4Mj1cIiR7eCsxMH1cIiB5Mj1cIjEzOFwiPjwvbGluZT5cclxuICAgICAgICA8bGluZSBzdHlsZT1cInN0cm9rZTp3aGl0ZTtzdHJva2Utd2lkdGg6MlwiIHgxPVwiJHt4fVwiIHkxPVwiMTMwXCIgeDI9XCIke3grMTB9XCIgeTI9XCIxMzBcIj48L2xpbmU+XHJcbiAgICAgICAgPGxpbmUgc3R5bGU9XCJzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjJcIj48L2xpbmU+XHJcbiAgICAgICAgPC9nPmA7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDYgOyBpKyspe1xyXG4gICAgICAgICAgICBub3RlSHRtbCArPSBgXHJcbiAgICAgICAgICAgICAgICA8Zz5cclxuICAgICAgICAgICAgICAgIDxlbGxpcHNlIGN4PScke3h9JyBjeT0nJHt5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogaX0nIHJ4PSc0JyByeT0nNicgZmlsbD0nIzQ0NCcgc3Ryb2tlLXdpZHRoPScwJyBzdHJva2U9J2JsYWNrJyBzdHlsZT0nY3Vyc29yOnBvaW50ZXI7Jz48L2VsbGlwc2U+XHJcbiAgICAgICAgICAgICAgICA8dGV4dCB4PScke3ggfScgeT0nJHt5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogaSArIDR9JyB0ZXh0LWFuY2hvcj1cIm1pZGRsZVwiIHN0eWxlPVwiZm9udDoxMnB4IFNhbnMtc2VyaWY7IGZpbGw6I2ZmZlwiPjM8L3RleHQ+XHJcbiAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vdGUuaW5uZXJIVE1MID0gbm90ZUh0bWw7XHJcbiAgICAgICAgdGhpcy5zdmdFbGVtZW50LmNoaWxkcmVuWzFdLmFwcGVuZENoaWxkKG5vdGUpO1xyXG4gICAgICAgIHRoaXMubm90ZUVsZW1lbnQucHVzaChub3RlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJbXV1bXSB9IGFycmF5IG9mIFt4LCB5ICwgbGVuZ3RoLCBibG9jayBvZiBldmVyeSBjaG9yZF1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWxOb3RlUmF3RGF0YSgpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyW11dW117XHJcbiAgICAgICAgbGV0IFt4LCB5XSA9IHRoaXMuc3RhcnRQb3NpdGlvbjtcclxuICAgICAgICBsZXQgYmVhdExlbmd0aCA9ICh0aGlzLnNlY3Rpb25XaWR0aCAtIDIwKSAvIHRoaXMuYmVhdFBlclNlY3Rpb247XHJcbiAgICAgICAgbGV0IHJhd0RhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJbXV1bXSA9IFtdO1xyXG4gICAgICAgIGZvcihsZXQgcyA9IDA7IHMgPCB0aGlzLm5vdGVzLmxlbmd0aDsgcysrKXsgLy8gc2VjdGlvblxyXG4gICAgICAgICAgICBpZihzICUgdGhpcy5zZWN0aW9uUGVyTGluZSA9PSAwKXtcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLnN0YXJ0UG9zaXRpb25bMF07XHJcbiAgICAgICAgICAgICAgICBpZihzICE9IDApeSArPSB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1ICsgdGhpcy5saW5lRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IG54ID0geCArIHRoaXMuc2VjdGlvbldpZHRoO1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5ub3Rlc1tzXS5sZW5ndGg7IGkrKyl7IC8vIG5vdGVcclxuICAgICAgICAgICAgICAgIGxldCBub3RlID0gdGhpcy5ub3Rlc1tzXVtpXTtcclxuICAgICAgICAgICAgICAgIHJhd0RhdGEucHVzaChbeCwgeSwgbm90ZVswXSwgbm90ZVsxXV0pO1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0ZXAgPSBiZWF0TGVuZ3RoICogdGhpcy5sZW5ndGhQZXJCZWF0IC8gbm90ZVswXTtcclxuICAgICAgICAgICAgICAgIHggKz0gc3RlcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4ID0gbng7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByYXdEYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcmVjZWl2ZSBkYXRhIGZyb20gY2FsTm90ZVJhd0RhdGEgYW5kIHNldCBlbGVtZW50c1xyXG4gICAgICogQHBhcmFtIHsgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcltdXVtdIH0gZGF0YSBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXRBbGxOb3RlRWxlbWVudERhdGEoZGF0YTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcltdXVtdKXtcclxuICAgICAgICBsZXQgbmUgPSBkYXRhLmxlbmd0aCAtIHRoaXMubm90ZUVsZW1lbnQubGVuZ3RoO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBuZTsgaSsrKXtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVOb3RlRWxlbWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Tm90ZUVsZW1lbnREYXRhKHRoaXMubm90ZUVsZW1lbnRbaV0sIGRhdGFbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0Tm90ZUVsZW1lbnREYXRhKGVsOlNWR0VsZW1lbnQsIGRhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJbXV0pe1xyXG4gICAgICAgIHRoaXMuc2V0RWxlbWVudFBvc2l0aW9uKGVsLCBkYXRhWzBdLCBkYXRhWzFdKTtcclxuICAgICAgICB0aGlzLnNldE5vdGVCYXIoZWwsIGRhdGFbMl0pO1xyXG4gICAgICAgIHRoaXMuc2V0Q2hvcmRWaXNpYWJsZShlbCwgZGF0YVsxXSwgZGF0YVszXSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldEVsZW1lbnRQb3NpdGlvbihlOlNWR0VsZW1lbnQsIHg6bnVtYmVyLCB5Om51bWJlcil7XHJcbiAgICAgICAgLy8gc2V0IG5vdGUgYmFyJ3MgcG9zaXRpb24gYW5kIGJhciB0YWlsJ3MgbGVuZ3RoXHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLHt4MTogYCR7eH1gLCB5MTogYCR7MjYgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gLCB4MjogYCR7eH1gLCB5MjogYCR7eX1gfSk7XHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLHt4MTogYCR7eH1gLCB5MTogYCR7MjUgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gLCB4MjogYCR7eCArIDEwfWAsIHkyOiBgJHsyNSArIHkgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1fWB9KTtcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMl0se3gxOiBgJHt4fWAsIHkxOiBgJHsyMSArIHkgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1fWAsIHgyOiBgJHt4ICsgMTB9YCwgeTI6IGAkezIxICsgeSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YH0pO1xyXG4gICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5jaGlsZHJlblswXS5jaGlsZHJlblszXSx7eDE6IGAke3h9YCwgeTE6IGAkezE3ICsgeSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YCwgeDI6IGAke3ggKyAxMH1gLCB5MjogYCR7MTcgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gfSk7XHJcbiAgICAgICAgLy8gc2V0IG5vdGUgd29yZCBwb3NpdGlvblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDEgOyBpIDw9IDY7IGkrKyl7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5jaGlsZHJlbltpXS5jaGlsZHJlblswXSwge2N4OiBgJHt4fWAsIGN5OiBgJHt5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogKGktMSl9YH0pO1xyXG4gICAgICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGUuY2hpbGRyZW5baV0uY2hpbGRyZW5bMV0sIHt4OiBgJHt4fWAsIHk6IGAke3kgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiAoaS0xKSArIDR9YH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogc2V0IGRpc3BsYXkgb2YgYmFyIHRhaWxcclxuICAgICAqIEBwYXJhbSBlIFxyXG4gICAgICogQHBhcmFtIGxlbmd0aCBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXROb3RlQmFyKGU6U1ZHRWxlbWVudCwgbGVuZ3RoOiBudW1iZXIpe1xyXG4gICAgICAgIGxldCBsZiA9IGxlbmd0aCAvIHRoaXMubGVuZ3RoUGVyQmVhdDtcclxuICAgICAgICBpZihsZiA+IDEuOSl7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLHtkaXNwbGF5OiBcImJsb2NrXCJ9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoPEhUTUxFbGVtZW50PmUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0se2Rpc3BsYXk6IFwibm9uZVwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGxmID4gMy45KXtcclxuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoPEhUTUxFbGVtZW50PmUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMl0se2Rpc3BsYXk6IFwiYmxvY2tcIn0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlblswXS5jaGlsZHJlblsyXSx7ZGlzcGxheTogXCJub25lXCJ9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYobGYgPiA3Ljkpe1xyXG4gICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlblswXS5jaGlsZHJlblszXSx7ZGlzcGxheTogXCJibG9ja1wifSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzNdLHtkaXNwbGF5OiBcIm5vbmVcIn0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0Q2hvcmRWaXNpYWJsZShlOlNWR0VsZW1lbnQsIHk6IG51bWJlciwgZGF0YTogbnVtYmVyW10pe1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDEgOyBpIDw9IDY7IGkrKyl7XHJcbiAgICAgICAgICAgIGUuY2hpbGRyZW5baV0uY2hpbGRyZW5bMV0uaW5uZXJIVE1MID0gYCR7ZGF0YVtpLTFdfWA7XHJcbiAgICAgICAgICAgIGlmKGRhdGFbaS0xXSA9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlbltpXS5jaGlsZHJlblswXSx7ZGlzcGxheTogXCJub25lXCJ9KTtcclxuICAgICAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuW2ldLmNoaWxkcmVuWzFdLHtkaXNwbGF5OiBcIm5vbmVcIn0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuW2ldLmNoaWxkcmVuWzBdLHtkaXNwbGF5OiBcImJsb2NrXCJ9KTtcclxuICAgICAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmNoaWxkcmVuW2ldLmNoaWxkcmVuWzFdLHtkaXNwbGF5OiBcImJsb2NrXCJ9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBub3RlIGJhciBzaG91bGQgcmVhY2ggdGhlIHRvcCB3b3JkXHJcbiAgICAgICAgbGV0IGhjOiBudW1iZXIgPSAtMTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwIDsgaSA8IDY7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmKGRhdGFbaV0gIT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgaGMgPSBpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGhjICE9IC0xKXtcclxuICAgICAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLHt5MjogYCR7eSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIGhjfWB9KTtcclxuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoPEhUTUxFbGVtZW50PmUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0se2Rpc3BsYXk6IFwiYmxvY2tcIn0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB1dGlscy5zZXRTdHlsZSg8SFRNTEVsZW1lbnQ+ZS5jaGlsZHJlblswXS5jaGlsZHJlblswXSx7ZGlzcGxheTogXCJub25lXCJ9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9