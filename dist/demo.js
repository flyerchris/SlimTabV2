var demo =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/demo.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/DataAdapter.ts":
/*!****************************!*\
  !*** ./src/DataAdapter.ts ***!
  \****************************/
/*! exports provided: DataAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DataAdapter\", function() { return DataAdapter; });\nclass DataAdapter {\r\n    constructor(bpm) {\r\n        this.rawData = [];\r\n        this.spb = 60 * 1000 / 120; // second per beat, defalut value corresponds to 120 bpm\r\n        this.lengthPerBeat = 4;\r\n        if (bpm) {\r\n            this.spb = 60 * 1000 / bpm;\r\n        }\r\n    }\r\n    receiveData(stringIndex, note, amp, time) {\r\n        this.rawData.push([stringIndex, note, time]);\r\n        if (!this.receiveInterval) {\r\n            this.receiveInterval = setTimeout(this.packNote.bind(this), 10);\r\n        }\r\n    }\r\n    setSendDataCallBack(cb) {\r\n        this.sendData = cb;\r\n    }\r\n    packNote() {\r\n        let notes = [-1, -1, -1, -1, -1, -1];\r\n        for (let i = 0; i < this.rawData.length; i++) {\r\n            notes[this.rawData[i][0]] = 3;\r\n        }\r\n        if (this.noteRawData) {\r\n            let duration = this.rawData[0][2] - this.preTime;\r\n            if (duration > this.spb * this.lengthPerBeat) {\r\n                this.noteRawData[0] = 1;\r\n            }\r\n            else {\r\n                let l2 = Math.log(this.spb / duration) / Math.log(2);\r\n                let l3 = Math.log(this.spb / (3 * duration)) / Math.log(2) + 1;\r\n                let bl = Math.pow(2, Math.ceil(l2 - 0.5));\r\n                this.noteRawData[0] = this.lengthPerBeat * bl;\r\n            }\r\n            this.sendData(-1, this.noteRawData);\r\n        }\r\n        this.preTime = this.rawData[0][2];\r\n        this.noteRawData = [8, notes, null];\r\n        this.rawData = [];\r\n        this.receiveInterval = null;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvRGF0YUFkYXB0ZXIudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvRGF0YUFkYXB0ZXIudHM/MjUyMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRGF0YUFkYXB0ZXJ7XHJcbiAgICBwcml2YXRlIHJhd0RhdGE6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdID0gW107XHJcbiAgICBwcml2YXRlIHByZVRpbWU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbm90ZVJhd0RhdGE6IFtudW1iZXIsIG51bWJlcltdLCBhbnldO1xyXG4gICAgcHJpdmF0ZSByZWNlaXZlSW50ZXJ2YWw6bnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzcGI6IG51bWJlciA9IDYwICogMTAwMCAvIDEyMDsgLy8gc2Vjb25kIHBlciBiZWF0LCBkZWZhbHV0IHZhbHVlIGNvcnJlc3BvbmRzIHRvIDEyMCBicG1cclxuICAgIHByaXZhdGUgbGVuZ3RoUGVyQmVhdDogbnVtYmVyID0gNDtcclxuICAgIHByaXZhdGUgc2VuZERhdGE6IEZ1bmN0aW9uO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihicG0/OiBudW1iZXIpe1xyXG4gICAgICAgIGlmKGJwbSl7XHJcbiAgICAgICAgICAgIHRoaXMuc3BiID0gNjAgKjEwMDAgLyBicG07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVjZWl2ZURhdGEoc3RyaW5nSW5kZXg6IG51bWJlciwgbm90ZTogbnVtYmVyLCBhbXA6IG51bWJlciwgdGltZTogbnVtYmVyKXtcclxuICAgICAgICB0aGlzLnJhd0RhdGEucHVzaChbc3RyaW5nSW5kZXgsIG5vdGUsIHRpbWVdKTtcclxuICAgICAgICBpZighdGhpcy5yZWNlaXZlSW50ZXJ2YWwpe1xyXG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVJbnRlcnZhbCA9IHNldFRpbWVvdXQodGhpcy5wYWNrTm90ZS5iaW5kKHRoaXMpLDEwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRTZW5kRGF0YUNhbGxCYWNrKGNiOiBGdW5jdGlvbil7XHJcbiAgICAgICAgdGhpcy5zZW5kRGF0YSA9IGNiO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBwYWNrTm90ZSgpe1xyXG4gICAgICAgIGxldCBub3RlcyA9IFstMSwgLTEsIC0xLCAtMSwgLTEsIC0xXTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5yYXdEYXRhLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgbm90ZXNbdGhpcy5yYXdEYXRhW2ldWzBdXSA9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMubm90ZVJhd0RhdGEpe1xyXG4gICAgICAgICAgICBsZXQgZHVyYXRpb24gPSB0aGlzLnJhd0RhdGFbMF1bMl0gLSB0aGlzLnByZVRpbWU7XHJcbiAgICAgICAgICAgIGlmKGR1cmF0aW9uID4gdGhpcy5zcGIgKiB0aGlzLmxlbmd0aFBlckJlYXQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RlUmF3RGF0YVswXSA9IDE7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgbGV0IGwyID0gTWF0aC5sb2codGhpcy5zcGIgLyBkdXJhdGlvbikgLyBNYXRoLmxvZygyKTtcclxuICAgICAgICAgICAgICAgIGxldCBsMyA9IE1hdGgubG9nKHRoaXMuc3BiIC8gKDMgKiBkdXJhdGlvbikpIC8gTWF0aC5sb2coMikgKyAxO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJsID0gTWF0aC5wb3coMiwgTWF0aC5jZWlsKGwyIC0gMC41KSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGVSYXdEYXRhWzBdID0gdGhpcy5sZW5ndGhQZXJCZWF0ICogYmw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zZW5kRGF0YSgtMSwgdGhpcy5ub3RlUmF3RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucHJlVGltZSA9IHRoaXMucmF3RGF0YVswXVsyXTtcclxuICAgICAgICB0aGlzLm5vdGVSYXdEYXRhID0gWzgsIG5vdGVzLCBudWxsXTtcclxuICAgICAgICB0aGlzLnJhd0RhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLnJlY2VpdmVJbnRlcnZhbCA9IG51bGw7XHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQVNBO0FBUkE7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/DataAdapter.ts\n");

/***/ }),

/***/ "./src/LiCAP.ts":
/*!**********************!*\
  !*** ./src/LiCAP.ts ***!
  \**********************/
/*! exports provided: LiCAP */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LiCAP\", function() { return LiCAP; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nclass LiCAP {\r\n    /**\r\n     * ctor\r\n     * @param device valid MIDIInput\r\n     */\r\n    constructor(device) {\r\n        this.device = device;\r\n        this.callbacks = new _utils__WEBPACK_IMPORTED_MODULE_0__[\"Callbacks\"]([\"pick\"]);\r\n        this.device.onmidimessage = this.onMessage.bind(this);\r\n    }\r\n    on(ename, cbk) {\r\n        if (ename in this.callbacks) {\r\n            this.callbacks[ename].push(cbk);\r\n        }\r\n    }\r\n    /**\r\n     * isSupported\r\n     * Check if LiCAP is supported by computer or not\r\n     */\r\n    static isSupported() {\r\n        return navigator.requestMIDIAccess;\r\n    }\r\n    /**\r\n     * enumerate\r\n     * Enumerate available LiCAP devices\r\n     */\r\n    static enumerate() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let ret = [];\r\n            if (LiCAP.isSupported()) {\r\n                let access = yield navigator.requestMIDIAccess();\r\n                for (let input of access.inputs.values()) {\r\n                    console.log(input.name);\r\n                    if (input.name.match(/STM32 Virtual ComPort/)) {\r\n                        ret.push(new LiCAP(input));\r\n                        console.log(`use ${input.name}`);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return ret;\r\n        });\r\n    }\r\n    onMessage(e) {\r\n        // Simply parse the data\r\n        let stringIdx = e.data[0] & 0xF;\r\n        switch ((e.data[0] >> 4) & 0xF) {\r\n            case 8:\r\n                // note off\r\n                break;\r\n            case 9:\r\n                // note on\r\n                this.callbacks[\"pick\"].callAll(stringIdx, e.data[1], e.data[2] / 255, e.timeStamp); // string idex, note, amp, time stamp\r\n                break;\r\n        }\r\n    }\r\n}\r\n// if(LiCAP.isSupported()) {\r\n//     console.log(\"Your browser supports LiCAP\");\r\n//     LiCAP.enumerate().then((devs) => {\r\n//         if(devs.length > 0) {\r\n//             devs[0].on(\"pick\", \r\n//                 (stringIdx, note, amp, time) => {\r\n//                     console.log(stringIdx, note, time);\r\n//             });\r\n//         }\r\n//     })\r\n// } else {\r\n//     console.log(\"Your browser does not support LiCAP\");\r\n// }\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTGlDQVAudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvTGlDQVAudHM/MTkxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NhbGxiYWNrc30gZnJvbSAnLi91dGlscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExpQ0FQRGV2aWNlIHtcclxuICAgIC8qKlxyXG4gICAgICogb25cclxuICAgICAqIEV2ZW50IHJlZ2lzdGVyYXRpb24oc3VwcG9ydCBtdWx0aXBsZSBldmVudCByZWdpc3RlcmF0aW9uKVxyXG4gICAgICogQHBhcmFtIGVuYW1lIG5hbWUgb2YgdGhlIGV2ZW50XHJcbiAgICAgKiBAcGFyYW0gY2JrIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uKGVuYW1lOiBzdHJpbmcsIGNiazogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExpQ0FQIGltcGxlbWVudHMgTGlDQVBEZXZpY2Uge1xyXG4gICAgcHJpdmF0ZSBkZXZpY2U6IFdlYk1pZGkuTUlESUlucHV0O1xyXG4gICAgcHJpdmF0ZSBjYWxsYmFja3M6IENhbGxiYWNrcztcclxuXHJcbiAgICAvKipcclxuICAgICAqIGN0b3JcclxuICAgICAqIEBwYXJhbSBkZXZpY2UgdmFsaWQgTUlESUlucHV0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoZGV2aWNlOiBXZWJNaWRpLk1JRElJbnB1dCkge1xyXG4gICAgICAgIHRoaXMuZGV2aWNlID0gZGV2aWNlO1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gbmV3IENhbGxiYWNrcyhbXCJwaWNrXCJdKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmRldmljZS5vbm1pZGltZXNzYWdlID0gdGhpcy5vbk1lc3NhZ2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbihlbmFtZTogc3RyaW5nLCBjYms6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIGlmKGVuYW1lIGluIHRoaXMuY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2VuYW1lXS5wdXNoKGNiayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogaXNTdXBwb3J0ZWRcclxuICAgICAqIENoZWNrIGlmIExpQ0FQIGlzIHN1cHBvcnRlZCBieSBjb21wdXRlciBvciBub3RcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzU3VwcG9ydGVkKCk6IGJvb2xlYW4gfCBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAobmF2aWdhdG9yIGFzIGFueSkucmVxdWVzdE1JRElBY2Nlc3MgYXMgYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGVudW1lcmF0ZVxyXG4gICAgICogRW51bWVyYXRlIGF2YWlsYWJsZSBMaUNBUCBkZXZpY2VzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBlbnVtZXJhdGUoKTogUHJvbWlzZTxBcnJheTxMaUNBUERldmljZT4+IHtcclxuICAgICAgICBsZXQgcmV0OiBBcnJheTxMaUNBUERldmljZT4gPSBbXTtcclxuXHJcbiAgICAgICAgaWYoTGlDQVAuaXNTdXBwb3J0ZWQoKSkge1xyXG4gICAgICAgICAgICBsZXQgYWNjZXNzID0gYXdhaXQgbmF2aWdhdG9yLnJlcXVlc3RNSURJQWNjZXNzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvcihsZXQgaW5wdXQgb2YgYWNjZXNzLmlucHV0cy52YWx1ZXMoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaW5wdXQubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZihpbnB1dC5uYW1lLm1hdGNoKC9TVE0zMiBWaXJ0dWFsIENvbVBvcnQvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKG5ldyBMaUNBUChpbnB1dCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGB1c2UgJHtpbnB1dC5uYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvbk1lc3NhZ2UoZTogV2ViTWlkaS5NSURJTWVzc2FnZUV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgLy8gU2ltcGx5IHBhcnNlIHRoZSBkYXRhXHJcbiAgICAgICAgbGV0IHN0cmluZ0lkeCA9IGUuZGF0YVswXSAmIDB4RjtcclxuICAgICAgICBzd2l0Y2goKGUuZGF0YVswXT4+NCkgJiAweEYpIHtcclxuICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgLy8gbm90ZSBvZmZcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAvLyBub3RlIG9uXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tcInBpY2tcIl0uY2FsbEFsbChzdHJpbmdJZHgsIGUuZGF0YVsxXSwgZS5kYXRhWzJdIC8gMjU1LCBlLnRpbWVTdGFtcCk7Ly8gc3RyaW5nIGlkZXgsIG5vdGUsIGFtcCwgdGltZSBzdGFtcFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuLy8gaWYoTGlDQVAuaXNTdXBwb3J0ZWQoKSkge1xyXG4vLyAgICAgY29uc29sZS5sb2coXCJZb3VyIGJyb3dzZXIgc3VwcG9ydHMgTGlDQVBcIik7XHJcblxyXG4vLyAgICAgTGlDQVAuZW51bWVyYXRlKCkudGhlbigoZGV2cykgPT4ge1xyXG4vLyAgICAgICAgIGlmKGRldnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBcclxuLy8gICAgICAgICAgICAgZGV2c1swXS5vbihcInBpY2tcIiwgXHJcbi8vICAgICAgICAgICAgICAgICAoc3RyaW5nSWR4LCBub3RlLCBhbXAsIHRpbWUpID0+IHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdHJpbmdJZHgsIG5vdGUsIHRpbWUpO1xyXG4vLyAgICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KVxyXG4vLyB9IGVsc2Uge1xyXG4vLyAgICAgY29uc29sZS5sb2coXCJZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBMaUNBUFwiKTtcclxuLy8gfVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFZQTtBQUlBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUdBO0FBQ0E7O0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/LiCAP.ts\n");

/***/ }),

/***/ "./src/Metronome.ts":
/*!**************************!*\
  !*** ./src/Metronome.ts ***!
  \**************************/
/*! exports provided: Metronome */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Metronome\", function() { return Metronome; });\nclass Metronome {\r\n    constructor(bpm) {\r\n        this.bpm = 120;\r\n        this.timeOffset = 0.05;\r\n        this.audioContext = new AudioContext();\r\n        if (bpm)\r\n            this.bpm = bpm;\r\n        this.gainNode = this.audioContext.createGain();\r\n        this.gainNode.gain.value = 0.3;\r\n        this.gainNode.connect(this.audioContext.destination);\r\n        fetch(beep)\r\n            .then(res => res.arrayBuffer())\r\n            .then(buffer => this.audioContext.decodeAudioData(buffer))\r\n            .then(decodeBuffer => this.sound = decodeBuffer);\r\n    }\r\n    startTick() {\r\n        if (!this.tickTimer) {\r\n            let cycleTime = 60 / this.bpm;\r\n            this.audioContext.suspend();\r\n            let at = this.audioContext.currentTime;\r\n            this.nextTime = at + cycleTime;\r\n            this.tickTimer = -1 * setTimeout(() => {\r\n                this.tick();\r\n                this.tickTimer = setInterval(() => this.tick(), cycleTime * 1000);\r\n            }, cycleTime * 1000 - this.timeOffset * 1000);\r\n            this.makeSound(at);\r\n            this.audioContext.resume();\r\n        }\r\n    }\r\n    stopTick() {\r\n        if (this.tickTimer < 0) {\r\n            clearTimeout(-1 * this.tickTimer);\r\n        }\r\n        else {\r\n            clearInterval(this.tickTimer);\r\n        }\r\n        this.tickTimer = null;\r\n    }\r\n    setBpm(bpm) {\r\n        this.bpm = bpm;\r\n    }\r\n    tick() {\r\n        let at = this.audioContext.currentTime;\r\n        let cycleTime = 60 / this.bpm;\r\n        if (at > this.nextTime) {\r\n            this.timeOffset += 0.05;\r\n            this.makeSound(at + this.timeOffset);\r\n            this.nextTime = at + this.timeOffset + cycleTime;\r\n        }\r\n        else {\r\n            this.makeSound(this.nextTime);\r\n            this.nextTime += cycleTime;\r\n        }\r\n    }\r\n    makeSound(startTime) {\r\n        let osc = this.audioContext.createBufferSource();\r\n        osc.buffer = this.sound;\r\n        osc.connect(this.gainNode);\r\n        osc.start(startTime);\r\n        osc.stop(startTime + 0.05);\r\n        return osc;\r\n    }\r\n}\r\nlet beep = \"data:audio/wav;base64,UklGRigHAABXQVZFZm10IBAAAAABAAEAgLsAAAB3AQACABAAZGF0YQQHAADw/wAAGAAgAOD+AP0I/Bj7OPr4+Uj5gPhw+BD4gPeQ96j5qPyo/vj9GPwo++j8wP9oAbAC6AOIBBADgADI/kj96PtI+9AB0AtgEYAZyCK4JlAimBkgBmjwAOUI3gDZKNco3LjlEO2o/CAQqBr4FqAM2ASw+njvCOpA+JAPOBzYDejzUOYw8PACmA1IEGAQkA8IC2AE8P44+rj2iPnQ7iDaQNOQ3QjscO6g57DjCOlA8qDzQPHY8QjzGPswBoANSBfAIGgooD51V+Ve1VDAOmgoGCAoHqggqCCYG7gQ4AJo+bj5uPEQ4jDZ2NNQ0HjPwMTbttOyy7kIweDJCNWI4YDwsPwQAwAQqB7II5AaiAxwAwgJ4BUgF6AM8APYAeAEiAZABej3oOjw4hjfGN4Q4ejo4PNQ+xj80Pzg/ggHoBboIegnWDBANZg2yCyQINAgiCcIKxAoQB9YFfAP2AbI/0D9wPqI90j0UOfQ2xjVeNUA3LDfMOXg6uDosOYg6GDrmPIQ+xAAMAoQFYAZCBRoD9gOMA+QD/APcApgEKgbYB3AFigOuAOg77jfgNwY4UDpSO/w7+DvAPE49WD++AV4Avj4cPKQ+qgKmBXgHigiWB+oFagM8AjYFZghUCLgHngX2BC4CEgC2ADQ/3AB8ANgA8j7uPMg71joyONA5ODowO6I8nD4aP44AbAKwBVgGvAY+BNwD+Ab6CzIM/gnYBUICugDsAIwBEgEIAEw/dD2OPEA8MDn4N7Q1+jVUNoQ51j02Pp4/Dj9CP6YBYAOaBLoETATkBRgF7AYcBZgD0ADwPlQ+Dj8OAFQ/wD5APUA/PAHwBCIEdAJqP+w/LgDmA1wFYAZUBewEJgI6ASABcgL8BPQFmgTwA0oCfAEWPxQ9dDzWPYw+jD9kPOQ5gjiaOag7oD2kPyI/iD9UPRA7MjrGPMY/GABCAAI+2j3iABQDsgUYBJICxgCYPz49hD22Pnw/iACMAPYBqAMgA8YDYAIKAaQATj+YP64+7D26PJ49bD70ADAA0ACGP5Y/CgAiAVYCWgJgAWo/xD9mP8gA5gF0AZgCkANyAxgCvgDSP2Y9jjzsPRg+Bj8YP5A/mD64Pao+TgA+ATIAYD6iPVI+EgCSAsIDwgNoAeYAtgA4P+YAVAEgAUgBCACaALAAAj+oPwg+Tj2WPVY9tj5EP6A/1j7+PUI9MjyYPKI9Oj0gPPQ8mj14Pmw/RABSAMYA5ADKAWIBggHcAbgBFAEmARYBIgAOPug+Bj54Pr4/IgAiAR4BmgGiAVgBKgDeAMQA0ACUAF4ADgBaAMABVgEIAIwALD/cABoAagBKAGAAOj+6Pwo/PD9+AAIA4gE8AVIBjgEgABo/Sj7aPkA+Wj5EPog+0D7APpA+XD6mPxI/jD/4P54/Uj86PsQ/Jj8IP14/cj9yP6IABgCQAS4BqgHGAcgBrgE+AHA/uD8CPyI++j7qP3Q/zgBKAE4AFj/sP5Y/mD+EABoAnADaAGI/dj6+PvI/8gCkATgBUgGsAXoBDAE4APQA3AD0AJoAjgCmAIQA/ACkAGw/4j+iP8QAvADGANoAHD+6P0Y/oj+wP6w/qj+QP9QADgBYAAo/oj86Pvg+1D70PpI+8j8wP5oAOD/KP2Q+jD5cPgQ+Pj36Pcw+OD4CPmA+Kj3MPeg9wD6gP3I/9gAwAEYAiACSAJQAqgCoAOoBDgG+AdQCQAKCAs4DIgM+AqgCCAHiAYwBgAGcAWIBOgD+AJoARAAQACoAdgCeALoAIj/YP1Y+jj4ePhg+mD8WP1Y/fj8yPyw/HD8cPtI+iD64Pqw+yj8kPwQ/bD9oP3I/MD76Ps4/eD+uABgAsgCCAIoAXgAMABoAOAAKAIQBGAFkAUQBQAEyAIYAtgBuAFwAVgBcAGAAZABqAFAATgAKAAYAbABCAG4/+D+2P5A/6j/CACAAPgAKAHYAGgAOABAAEAAGAD4/9j/sP9w/+D/+ADQARAC8AGYAWAAcP4A/eD8yP3Q/lD/UP8g/5D+mP3I/LD8MP3I/Vj+mP5o/vj9wP3o/fD9CP6A/lD/0P+w/yj/QP6I/cD8ePz4/PD9EP8IAGgA8ACwAQgCwAFAAagAoAAwAZABKAIYA7AD8AMIBKADkAJgAdgA4AAQASABAAEIAbAA+P9Y/4D/GAB4AAgASP84/xD/cP4A/iD+iP7A/rD+oP7Q/qD/gADAAOD/yP4w/lj+0P4g/0D/cP/Q//D/oP8o/0j/0P8gADgAYABQAFgAiACQABAAcP8w/5D/MACQACgAcP8Q/6j+KP7o/cj9yP0o/kD/aADwAHgBCAIwAtABQAGgAIgA4AD4AKAAWAB4AFAAsP8I/6D+wP5I/9j/EAB4/5D++P2o/Uj9OP04/sD/8ADIAUgCeAKQAg==\";\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTWV0cm9ub21lLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL01ldHJvbm9tZS50cz9iY2E4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBNZXRyb25vbWUge1xyXG4gICAgcHJpdmF0ZSBhdWRpb0NvbnRleHQ6IEF1ZGlvQ29udGV4dDtcclxuICAgIHByaXZhdGUgbmV4dFRpbWU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZ2Fpbk5vZGU6IEdhaW5Ob2RlO1xyXG4gICAgcHJpdmF0ZSB0aWNrVGltZXI6IG51bWJlcjtcclxuICAgIHByaXZhdGUgYnBtOiBudW1iZXIgPSAxMjA7XHJcbiAgICBwcml2YXRlIHRpbWVPZmZzZXQgPSAwLjA1O1xyXG4gICAgcHJpdmF0ZSBzb3VuZDogQXVkaW9CdWZmZXI7XHJcbiAgICBjb25zdHJ1Y3RvcihicG06IG51bWJlcil7XHJcbiAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7XHJcbiAgICAgICAgaWYoYnBtKXRoaXMuYnBtID0gYnBtO1xyXG4gICAgICAgIHRoaXMuZ2Fpbk5vZGUgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XHJcbiAgICAgICAgdGhpcy5nYWluTm9kZS5nYWluLnZhbHVlID0gMC4zO1xyXG4gICAgICAgIHRoaXMuZ2Fpbk5vZGUuY29ubmVjdCh0aGlzLmF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XHJcbiAgICAgICAgZmV0Y2goYmVlcClcclxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLmFycmF5QnVmZmVyKCkpXHJcbiAgICAgICAgLnRoZW4oYnVmZmVyID0+IHRoaXMuYXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YShidWZmZXIpKVxyXG4gICAgICAgIC50aGVuKGRlY29kZUJ1ZmZlciA9PiB0aGlzLnNvdW5kID0gZGVjb2RlQnVmZmVyKTtcclxuICAgIH1cclxuICAgIHN0YXJ0VGljaygpe1xyXG4gICAgICAgIGlmKCF0aGlzLnRpY2tUaW1lcil7XHJcbiAgICAgICAgICAgIGxldCBjeWNsZVRpbWUgPSA2MCAvIHRoaXMuYnBtO1xyXG4gICAgICAgICAgICB0aGlzLmF1ZGlvQ29udGV4dC5zdXNwZW5kKCk7XHJcbiAgICAgICAgICAgIGxldCBhdCA9IHRoaXMuYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lO1xyXG4gICAgICAgICAgICB0aGlzLm5leHRUaW1lID0gYXQgKyBjeWNsZVRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMudGlja1RpbWVyID0gLTEgKiBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGljaygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aWNrVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnRpY2soKSwgY3ljbGVUaW1lICogMTAwMCk7XHJcbiAgICAgICAgICAgIH0sIGN5Y2xlVGltZSAqIDEwMDAgLSB0aGlzLnRpbWVPZmZzZXQqMTAwMCk7XHJcbiAgICAgICAgICAgIHRoaXMubWFrZVNvdW5kKGF0KTtcclxuICAgICAgICAgICAgdGhpcy5hdWRpb0NvbnRleHQucmVzdW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RvcFRpY2soKXtcclxuICAgICAgICBpZih0aGlzLnRpY2tUaW1lciA8IDApe1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoLTEgKiB0aGlzLnRpY2tUaW1lcik7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aWNrVGltZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpY2tUaW1lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRCcG0oYnBtOiBudW1iZXIpe1xyXG4gICAgICAgIHRoaXMuYnBtID0gYnBtO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0aWNrKCl7XHJcbiAgICAgICAgbGV0IGF0ID0gdGhpcy5hdWRpb0NvbnRleHQuY3VycmVudFRpbWU7XHJcbiAgICAgICAgbGV0IGN5Y2xlVGltZSA9IDYwIC8gdGhpcy5icG07XHJcbiAgICAgICAgaWYoYXQgPiB0aGlzLm5leHRUaW1lKXtcclxuICAgICAgICAgICAgdGhpcy50aW1lT2Zmc2V0ICs9IDAuMDU7XHJcbiAgICAgICAgICAgIHRoaXMubWFrZVNvdW5kKGF0ICsgdGhpcy50aW1lT2Zmc2V0KTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0VGltZSA9IGF0ICsgdGhpcy50aW1lT2Zmc2V0ICsgY3ljbGVUaW1lO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLm1ha2VTb3VuZCh0aGlzLm5leHRUaW1lKTtcclxuICAgICAgICAgICAgdGhpcy5uZXh0VGltZSArPSBjeWNsZVRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBtYWtlU291bmQoIHN0YXJ0VGltZTogbnVtYmVyKTogQXVkaW9CdWZmZXJTb3VyY2VOb2Rle1xyXG4gICAgICAgIGxldCBvc2MgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcclxuICAgICAgICBvc2MuYnVmZmVyID0gdGhpcy5zb3VuZDtcclxuICAgICAgICBvc2MuY29ubmVjdCh0aGlzLmdhaW5Ob2RlKTtcclxuICAgICAgICBvc2Muc3RhcnQoc3RhcnRUaW1lKTtcclxuICAgICAgICBvc2Muc3RvcChzdGFydFRpbWUgKyAwLjA1KTtcclxuICAgICAgICByZXR1cm4gb3NjO1xyXG4gICAgfVxyXG59XHJcblxyXG5sZXQgYmVlcCA9IFwiZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSaWdIQUFCWFFWWkZabTEwSUJBQUFBQUJBQUVBZ0xzQUFBQjNBUUFDQUJBQVpHRjBZUVFIQUFEdy93QUFHQUFnQU9EK0FQMEkvQmo3T1ByNCtVajVnUGh3K0JENGdQZVE5Nmo1cVB5by92ajlHUHdvKytqOHdQOW9BYkFDNkFPSUJCQURnQURJL2tqOTZQdEkrOUFCMEF0Z0VZQVp5Q0s0SmxBaW1Ca2dCbWp3QU9VSTNnRFpLTmNvM0xqbEVPMm8vQ0FRcUJyNEZxQU0yQVN3K25qdkNPcEErSkFQT0J6WURlanpVT1l3OFBBQ21BMUlFR0FRa0E4SUMyQUU4UDQ0K3JqMmlQblE3aURhUU5PUTNRanNjTzZnNTdEakNPbEE4cUR6UVBIWThRanpHUHN3Qm9BTlNCZkFJR2dvb0Q1MVYrVmUxVkRBT21nb0dDQW9IcWdncUNDWUc3Z1E0QUpvK2JqNXVQRVE0akRaMk5OUTBIalB3TVRidHRPeXk3a0l3ZURKQ05XSTRZRHdzUHdRQXdBUXFCN0lJNUFhaUF4d0F3Z0o0QlVnRjZBTThBUFlBZUFFaUFaQUJlajNvT2p3NGhqZkdONFE0ZWpvNFBOUSt4ajgwUHpnL2dnSG9CYm9JZWduV0RCQU5aZzJ5Q3lRSU5BZ2lDY0lLeEFvUUI5WUZmQVAyQWJJLzBEOXdQcUk5MGowVU9mUTJ4alZlTlVBM0xEZk1PWGc2dURvc09ZZzZHRHJtUElRK3hBQU1Bb1FGWUFaQ0JSb0Q5Z09NQStRRC9BUGNBcGdFS2diWUIzQUZpZ091QU9nNzdqZmdOd1k0VURwU08vdzcrRHZBUEU0OVdEKytBVjRBdmo0Y1BLUStxZ0ttQlhnSGlnaVdCK29GYWdNOEFqWUZaZ2hVQ0xnSG5nWDJCQzRDRWdDMkFEUS8zQUI4QU5nQThqN3VQTWc3MWpveU9OQTVPRG93TzZJOG5ENGFQNDRBYkFLd0JWZ0d2QVkrQk53RCtBYjZDeklNL2duWUJVSUN1Z0RzQUl3QkVnRUlBRXcvZEQyT1BFQThNRG40TjdRMStqVlVOb1E1MWowMlBwNC9EajlDUDZZQllBT2FCTG9FVEFUa0JSZ0Y3QVljQlpnRDBBRHdQbFErRGo4T0FGUS93RDVBUFVBL1BBSHdCQ0lFZEFKcVArdy9MZ0RtQTF3RllBWlVCZXdFSmdJNkFTQUJjZ0w4QlBRRm1nVHdBMG9DZkFFV1B4UTlkRHpXUFl3K2pEOWtQT1E1Z2ppYU9hZzdvRDJrUHlJL2lEOVVQUkE3TWpyR1BNWS9HQUJDQUFJKzJqM2lBQlFEc2dVWUJKSUN4Z0NZUHo0OWhEMjJQbncvaUFDTUFQWUJxQU1nQThZRFlBSUtBYVFBVGorWVA2NCs3RDI2UEo0OWJENzBBREFBMEFDR1A1WS9DZ0FpQVZZQ1dnSmdBV28veEQ5bVA4Z0E1Z0YwQVpnQ2tBTnlBeGdDdmdEU1AyWTlqanpzUFJnK0JqOFlQNUEvbUQ2NFBhbytUZ0ErQVRJQVlENmlQVkkrRWdDU0FzSUR3Z05vQWVZQXRnQTRQK1lBVkFFZ0FVZ0JDQUNhQUxBQUFqK29Qd2crVGoyV1BWWTl0ajVFUDZBLzFqNytQVUk5TWp5WVBLSTlPajBnUFBROG1qMTRQbXcvUkFCU0FNWUE1QURLQVdJQmdnSGNBYmdCRkFFbUFSWUJJZ0FPUHVnK0JqNTRQcjQvSWdBaUFSNEJtZ0dpQVZnQktnRGVBTVFBMEFDVUFGNEFEZ0JhQU1BQlZnRUlBSXdBTEQvY0FCb0FhZ0JLQUdBQU9qKzZQd28vUEQ5K0FBSUE0Z0U4QVZJQmpnRWdBQm8vU2o3YVBrQStXajVFUG9nKzBEN0FQcEErWEQ2bVB4SS9qRC80UDU0L1VqODZQc1EvSmo4SVAxNC9jajl5UDZJQUJnQ1FBUzRCcWdIR0FjZ0JyZ0UrQUhBL3VEOENQeUkrK2o3cVAzUS96Z0JLQUU0QUZqL3NQNVkvbUQrRUFCb0FuQURhQUdJL2RqNitQdkkvOGdDa0FUZ0JVZ0dzQVhvQkRBRTRBUFFBM0FEMEFKb0FqZ0NtQUlRQS9BQ2tBR3cvNGoraVA4UUF2QURHQU5vQUhEKzZQMFkvb2ord1A2dy9xaitRUDlRQURnQllBQW8vb2o4NlB2ZysxRDcwUHBJKzhqOHdQNW9BT0QvS1AyUStqRDVjUGdRK1BqMzZQY3crT0Q0Q1BtQStLajNNUGVnOXdENmdQM0kvOWdBd0FFWUFpQUNTQUpRQXFnQ29BT29CRGdHK0FkUUNRQUtDQXM0RElnTStBcWdDQ0FIaUFZd0JnQUdjQVdJQk9nRCtBSm9BUkFBUUFDb0FkZ0NlQUxvQUlqL1lQMVkramo0ZVBoZyttRDhXUDFZL2ZqOHlQeXcvSEQ4Y1B0SStpRDY0UHF3K3lqOGtQd1EvYkQ5b1AzSS9NRDc2UHM0L2VEK3VBQmdBc2dDQ0FJb0FYZ0FNQUJvQU9BQUtBSVFCR0FGa0FVUUJRQUV5QUlZQXRnQnVBRndBVmdCY0FHQUFaQUJxQUZBQVRnQUtBQVlBYkFCQ0FHNC8rRCsyUDVBLzZqL0NBQ0FBUGdBS0FIWUFHZ0FPQUJBQUVBQUdBRDQvOWovc1A5dy8rRC8rQURRQVJBQzhBR1lBV0FBY1A0QS9lRDh5UDNRL2xEL1VQOGcvNUQrbVAzSS9MRDhNUDNJL1ZqK21QNW8vdmo5d1Azby9mRDlDUDZBL2xELzBQK3cveWovUVA2SS9jRDhlUHo0L1BEOUVQOElBR2dBOEFDd0FRZ0N3QUZBQWFnQW9BQXdBWkFCS0FJWUE3QUQ4QU1JQktBRGtBSmdBZGdBNEFBUUFTQUJBQUVJQWJBQStQOVkvNEQvR0FCNEFBZ0FTUDg0L3hEL2NQNEEvaUQraVA3QS9yRCtvUDdRL3FEL2dBREFBT0QveVA0dy9saiswUDRnLzBEL2NQL1EvL0Qvb1A4by8wai8wUDhnQURnQVlBQlFBRmdBaUFDUUFCQUFjUDh3LzVEL01BQ1FBQ2dBY1A4US82aitLUDdvL2NqOXlQMG8va0QvYUFEd0FIZ0JDQUl3QXRBQlFBR2dBSWdBNEFENEFLQUFXQUI0QUZBQXNQOEkvNkQrd1A1SS85ai9FQUI0LzVEKytQMm8vVWo5T1AwNC9zRC84QURJQVVnQ2VBS1FBZz09XCI7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFRQTtBQUhBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Metronome.ts\n");

/***/ }),

/***/ "./src/SlimTabV2.ts":
/*!**************************!*\
  !*** ./src/SlimTabV2.ts ***!
  \**************************/
/*! exports provided: SLTab */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SLTab\", function() { return SLTab; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _SlimTabV2Canvas__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./SlimTabV2Canvas */ \"./src/SlimTabV2Canvas.ts\");\n//Tablature\r\n/**\r\n  * render pipeline: caculate each note position and actual note number (calNoteRawData)\r\n  *                 => draw necessary lines (drawAllLine)\r\n  *                 => create enough svg element and reuse them (setAllNoteElementData)\r\n  *                 => set elements data  (setNoteElementData)\r\n  *\r\n  */\r\n\r\n\r\nclass SLTab {\r\n    constructor(data) {\r\n        this.lengthPerBeat = 4;\r\n        this.beatPerSection = 4;\r\n        this.lineWidth = 800;\r\n        this.sectionPerLine = 2;\r\n        this.stringPadding = 16; // distance between each string\r\n        this.linePerPage = 20;\r\n        this.lineMargin = 42; // only for left and right\r\n        this.linePadding = [32, 14];\r\n        this.lineDistance = 90; // distance between each line\r\n        this.sectionAddNoteNumber = 16;\r\n        this.noteElement = [];\r\n        this.linkerElement = [];\r\n        this.sectionBarElement = [];\r\n        this.lineElement = [];\r\n        this.sectionIndicatorElement = [];\r\n        this.startPosition = [this.lineMargin + this.linePadding[0] + 20, 120 + this.linePadding[1]]; // x, y\r\n        this.lineInfo = [0, this.lineMargin, 120]; // total line number, last line X, last line Y\r\n        Object.assign(this, data);\r\n        this.tabCanvas = new _SlimTabV2Canvas__WEBPACK_IMPORTED_MODULE_1__[\"SLCanvas\"](_SlimTabV2Canvas__WEBPACK_IMPORTED_MODULE_1__[\"SLLayer\"]);\r\n        this.callbacks = new _utils__WEBPACK_IMPORTED_MODULE_0__[\"Callbacks\"]([\"noteclick\", \"sectionchange\"]);\r\n    }\r\n    setNoteData(data) {\r\n        this.notes = data;\r\n    }\r\n    /**\r\n     * add a note\r\n     * @param { [number, number[], any] }   data, note length, [block number, index is string number,], user data\r\n     * @param { number }                    section, if give -1, note will be appended at last section. Index start from 0\r\n     * @param { number }                    note, if give -1, note will be appended at last note. Index start from 0\r\n     */\r\n    instrumentNoteInput(correction, data, section = -1, note = -1) {\r\n        if (section == -1)\r\n            section = this.notes.length - 1;\r\n        if (note == -1)\r\n            note = this.notes[section].length - 1;\r\n        correction(this, data, section, note);\r\n        this.render();\r\n    }\r\n    attach(anchor) {\r\n        anchor.append(this.tabCanvas.domElement);\r\n    }\r\n    render() {\r\n        let width = this.lineWidth + this.linePadding[0] * 2 + 42 * 2;\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(this.tabCanvas.domElement, { width: `${width}`, height: \"600\" });\r\n        //this.setAllLine();\r\n        let [noteRawData, linkerData, sectionPosition] = this.calNoteRawData();\r\n        //this.setSectionIndicator(sectionPosition);\r\n        this.setAllNoteElementData(noteRawData);\r\n        //this.setLinker(linkerData);\r\n    }\r\n    on(ename, cbk) {\r\n        if (ename in this.callbacks) {\r\n            this.callbacks[ename].push(cbk);\r\n        }\r\n    }\r\n    setAllLine() {\r\n        let ln = Math.ceil(this.notes.length / this.sectionPerLine);\r\n        if (ln > this.lineInfo[0]) {\r\n            for (let i = 0; i < ln - this.lineInfo[0]; i++) {\r\n                let nl = this.createLine(this.lineInfo[1], this.lineInfo[2], i);\r\n                this.lineElement.push(nl);\r\n                this.svgElement.children[0].appendChild(nl);\r\n                this.lineInfo[2] += this.stringPadding * 5 + this.lineDistance;\r\n            }\r\n        }\r\n        this.lineInfo[0] = ln;\r\n    }\r\n    setSectionIndicator(position) {\r\n        if (position.length > this.sectionIndicatorElement.length) {\r\n            let nsNumber = position.length - this.sectionIndicatorElement.length;\r\n            for (let i = 0; i < nsNumber; i++) {\r\n                let ns = this.createSectionIndicator();\r\n                this.svgElement.children[1].appendChild(ns);\r\n                this.sectionIndicatorElement.push(ns);\r\n            }\r\n        }\r\n        for (let i = 0; i < position.length; i++) {\r\n            let width = position[i][1][0] - position[i][0][0];\r\n            let height = this.stringPadding * 5;\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(this.sectionIndicatorElement[i], { x: `${position[i][0][0]}`, y: `${position[i][0][1]}`, width: `${width}`, height: `${height}` });\r\n        }\r\n    }\r\n    createSectionIndicator() {\r\n        let square = document.createElementNS('http://www.w3.org/2000/svg', \"rect\");\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(square, { \"stroke-width\": \"0\", fill: \"rgba(0, 255, 255, 0.13)\" });\r\n        return square;\r\n    }\r\n    createLine(x, y, lineNumber) {\r\n        let ng = document.createElementNS('http://www.w3.org/2000/svg', \"g\");\r\n        let lineBack = document.createElementNS('http://www.w3.org/2000/svg', \"rect\");\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(lineBack, { x: `${x}`, y: `${y}`, style: \"fill: rgba(255, 255, 255, 0.09)\", width: `${this.linePadding[0] * 2 + this.lineWidth}`, height: `${this.linePadding[1] * 2 + this.stringPadding * 5}` });\r\n        ng.appendChild(lineBack);\r\n        x += this.linePadding[0];\r\n        y += this.linePadding[1];\r\n        for (let i = 0; i < 6; i++) {\r\n            let l = this.lineWidth;\r\n            let newLine = document.createElementNS('http://www.w3.org/2000/svg', \"line\");\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(newLine, { x1: `${x}`, y1: `${y + i * this.stringPadding}`, x2: `${x + l}`, y2: `${y + i * this.stringPadding}`, style: \"stroke:rgba(255, 255, 255, 0.24) ;stroke-width:2\" });\r\n            ng.appendChild(newLine);\r\n        }\r\n        ng.appendChild(this.drawLineTitle(x - 30, y));\r\n        ng.appendChild(this.createBar(x, y));\r\n        for (let i = 0; i < this.sectionPerLine; i++) {\r\n            let bar = this.createBar(0, 0);\r\n            this.sectionBarElement.push(bar);\r\n            ng.appendChild(bar);\r\n        }\r\n        return ng;\r\n    }\r\n    drawLineTitle(x, y) {\r\n        let title = document.createElementNS('http://www.w3.org/2000/svg', \"g\");\r\n        title.innerHTML = `\r\n        <text style=\"fill:#959595;font:17px arial;\">\r\n            <tspan x='${x + 10}' y='${y + 26}'>T</tspan>\r\n            <tspan x='${x + 10}' y='${y + 22 + 26}'>A</tspan>\r\n            <tspan x='${x + 10}' y='${y + 44 + 26}'>B</tspan>\r\n        </text>\r\n        `;\r\n        return title;\r\n    }\r\n    createBar(x, y) {\r\n        let bar = document.createElementNS('http://www.w3.org/2000/svg', \"line\");\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(bar, { style: 'stroke:rgba(255, 255, 255, 0.24) ;stroke-width:2' });\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(bar, { x1: `${x}`, y1: `${y}`, x2: `${x}`, y2: `${y + this.stringPadding * 5}` });\r\n        return bar;\r\n    }\r\n    setBarPosition(bar, x, y) {\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(bar, { x1: `${x}`, y1: `${y}`, x2: `${x}`, y2: `${y + this.stringPadding * 5}` });\r\n    }\r\n    createNoteElement(x = 200, y = 20) {\r\n        let note = document.createElementNS('http://www.w3.org/2000/svg', \"g\");\r\n        let noteHtml = `<g>\r\n        <line style=\"stroke:white;stroke-width:1\" x1=\"${x}\" y1=\"140\" x2=\"${x}\" y2=\"${y}\"></line>\r\n        <line style=\"stroke:white;stroke-width:2\" x1=\"${x}\" y1=\"138\" x2=\"${x + 10}\" y2=\"138\"></line>\r\n        <line style=\"stroke:white;stroke-width:2\" x1=\"${x}\" y1=\"130\" x2=\"${x + 10}\" y2=\"130\"></line>\r\n        <line style=\"stroke:white;stroke-width:2\"></line>\r\n        </g>`;\r\n        for (let i = 0; i < 6; i++) {\r\n            noteHtml += `\r\n                <g>\r\n                <ellipse cx='${x}' cy='${y + this.stringPadding * i}' rx='4' ry='6' fill='#444' stroke-width='0' stroke='black' style='cursor:pointer;'></ellipse>\r\n                <text x='${x}' y='${y + this.stringPadding * i + 4}' text-anchor=\"middle\" style=\"font:12px Sans-serif; fill:#fff\">3</text>\r\n                </g>\r\n            `;\r\n        }\r\n        note.innerHTML = noteHtml;\r\n        this.svgElement.children[2].appendChild(note);\r\n        this.noteElement.push(note);\r\n        note.addEventListener(\"click\", this.onNoteClicked.bind(this));\r\n    }\r\n    /**\r\n     * @return { caculatedNoteData[], number[][] } array of [x, y , length, block of every chord, tail length, section index, note index], linker data, section x position\r\n     */\r\n    calNoteRawData() {\r\n        let [x, y] = this.startPosition;\r\n        let rawData = [];\r\n        let sectionLength = this.beatPerSection / this.lengthPerBeat;\r\n        let linker = [];\r\n        let sectionIndicator = [];\r\n        let seperaterLength = 1 / 4;\r\n        let accumulatedLength = 0;\r\n        rawData.push([0, 0, 0, null, null, 0, 0]); // give a initial data, remove it at the end of function\r\n        for (let s = 0; s < this.notes.length; s++) { // section\r\n            let line = Math.floor(s / this.sectionPerLine);\r\n            let lineTotalNote = 0;\r\n            for (let i = 0; i < this.sectionPerLine; i++) {\r\n                if (this.notes[line * this.sectionPerLine + i]) {\r\n                    lineTotalNote += this.notes[line * this.sectionPerLine + i].length + this.sectionAddNoteNumber;\r\n                }\r\n                else {\r\n                    lineTotalNote += this.sectionAddNoteNumber;\r\n                }\r\n            }\r\n            let sectionWidth = this.lineWidth * (this.notes[s].length + this.sectionAddNoteNumber) / lineTotalNote;\r\n            let sectionTotalBeat = 0;\r\n            for (let i = 0; i < this.notes[s].length; i++) {\r\n                sectionTotalBeat += this.lengthPerBeat / this.notes[s][i][0];\r\n            }\r\n            let beatLength = (sectionWidth - 20) / sectionTotalBeat;\r\n            if (s % this.sectionPerLine == 0) { // change line\r\n                x = this.startPosition[0];\r\n                if (s != 0)\r\n                    y += this.stringPadding * 5 + this.lineDistance;\r\n            }\r\n            let sx = [[x - 20, y], [0, y]]; // section position\r\n            let nx = x + sectionWidth;\r\n            sx[1][0] = nx - 20;\r\n            //this.setBarPosition(this.sectionBarElement[s], nx -20, y);\r\n            sectionIndicator.push(sx);\r\n            for (let i = 0; i < this.notes[s].length; i++) { // note\r\n                let note = this.notes[s][i];\r\n                let noteLength = this.lengthPerBeat / note[0];\r\n                let tail;\r\n                if (accumulatedLength + noteLength / this.lengthPerBeat >= seperaterLength) { // the note is the end of a seperater or the note's length equals to seperater length\r\n                    tail = this.calculateTail(rawData[rawData.length - 1][2], note[0], -1, beatLength);\r\n                    accumulatedLength = 0;\r\n                }\r\n                else {\r\n                    tail = this.calculateTail(rawData[rawData.length - 1][2], note[0], accumulatedLength, beatLength);\r\n                    accumulatedLength += noteLength / this.lengthPerBeat;\r\n                }\r\n                let step = beatLength * this.lengthPerBeat / note[0];\r\n                rawData.push([x, y, note[0], note[1], tail, s, i]);\r\n                if (note[2] === \"linkStart\" || note[2] === \"linkEnd\") {\r\n                    linker.push([x, y]);\r\n                }\r\n                x += step;\r\n            }\r\n            x = nx;\r\n        }\r\n        rawData.shift();\r\n        return [rawData, linker, sectionIndicator];\r\n    }\r\n    calculateTail(lastNoteLength, noteLength, accumulatedLength, beatLength) {\r\n        let step = beatLength * this.lengthPerBeat / lastNoteLength * -1;\r\n        let basicLength = 8;\r\n        if (accumulatedLength == -1)\r\n            basicLength = -8;\r\n        if (accumulatedLength == 0) { // start of a seperate note\r\n            if (noteLength == 8) {\r\n                return [8, 0, 0];\r\n            }\r\n            else if (noteLength == 16) {\r\n                return [8, 8, 0];\r\n            }\r\n            else if (noteLength == 32) {\r\n                return [8, 8, 8];\r\n            }\r\n        }\r\n        else {\r\n            if (noteLength == 8) {\r\n                if (lastNoteLength == 8 || lastNoteLength == 16 || lastNoteLength == 32) {\r\n                    return [step, 0, 0];\r\n                }\r\n            }\r\n            else if (noteLength == 16) {\r\n                if (lastNoteLength == 8) {\r\n                    return [step, basicLength, 0];\r\n                }\r\n                else if (lastNoteLength == 16 || lastNoteLength == 32) {\r\n                    return [step, step, 0];\r\n                }\r\n            }\r\n            else if (noteLength == 32) {\r\n                if (lastNoteLength == 8) {\r\n                    return [step, basicLength, basicLength];\r\n                }\r\n                else if (lastNoteLength == 16) {\r\n                    return [step, step, basicLength];\r\n                }\r\n                else if (lastNoteLength == 32) {\r\n                    return [step, step, step];\r\n                }\r\n            }\r\n        }\r\n        return [0, 0, 0];\r\n    }\r\n    /**\r\n     * receive data from calNoteRawData and set elements\r\n     * @param { [number, number, number, number[]][] } data\r\n     */\r\n    setAllNoteElementData(data) {\r\n        let noteElement = this.tabCanvas.layers.notes.noteElements;\r\n        let ne = data.length - noteElement.length;\r\n        for (let i = 0; i < ne; i++) {\r\n            this.tabCanvas.layers.notes.createNote();\r\n        }\r\n        for (let i = 0; i < data.length; i++) {\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(noteElement[i].element, { display: \"unset\" });\r\n            this.setNoteElementData(noteElement[i], data[i]);\r\n        }\r\n        for (let i = data.length; i < this.noteElement.length; i++) {\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(noteElement[i].element, { display: \"none\" });\r\n        }\r\n    }\r\n    setNoteElementData(el, data) {\r\n        this.setElementPosition(el, data[0], data[1], data[4], data[5], data[6]);\r\n        this.setChordVisiable(el, data[1], data[3]);\r\n    }\r\n    setElementPosition(e, x, y, tail, sectionIndex, noteIndex) {\r\n        // set note bar's position and bar tail's length\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(e.lineGroup[0], { x1: `${x}`, y1: `${26 + y + this.stringPadding * 5}`, x2: `${x}`, y2: `${y}` });\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(e.lineGroup[1], { x1: `${x}`, y1: `${25 + y + this.stringPadding * 5}`, x2: `${x + tail[0]}`, y2: `${25 + y + this.stringPadding * 5}` });\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(e.lineGroup[2], { x1: `${x}`, y1: `${21 + y + this.stringPadding * 5}`, x2: `${x + tail[1]}`, y2: `${21 + y + this.stringPadding * 5}` });\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(e.lineGroup[3], { x1: `${x}`, y1: `${17 + y + this.stringPadding * 5}`, x2: `${x + tail[2]}`, y2: `${17 + y + this.stringPadding * 5}` });\r\n        // set note word position\r\n        for (let i = 0; i < 6; i++) {\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(e.blockGroup[i].ellipse, { cx: `${x}`, cy: `${y + this.stringPadding * (i - 1)}` });\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(e.blockGroup[i].word, { x: `${x}`, y: `${y + this.stringPadding * (i - 1) + 4}` });\r\n        }\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(e.element, { \"data-section\": `${sectionIndex}`, \"data-note\": `${noteIndex}` });\r\n    }\r\n    setChordVisiable(e, y, data) {\r\n        for (let i = 0; i < 6; i++) {\r\n            e.blockGroup[i].word.innerHTML = `${data[i]}`;\r\n            if (data[i] == -1) {\r\n                _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(e.blockGroup[i].ellipse, { display: \"none\" });\r\n                _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(e.blockGroup[i].word, { display: \"none\" });\r\n            }\r\n            else {\r\n                _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(e.blockGroup[i].ellipse, { display: \"block\" });\r\n                _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(e.blockGroup[i].word, { display: \"block\" });\r\n            }\r\n        }\r\n        // note bar should reach the top word\r\n        let hc = -1;\r\n        for (let i = 0; i < 6; i++) {\r\n            if (data[i] != -1) {\r\n                hc = i;\r\n                break;\r\n            }\r\n        }\r\n        if (hc != -1) {\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(e.lineGroup[0], { y2: `${y + this.stringPadding * hc}` });\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(e.lineGroup[0], { display: \"block\" });\r\n        }\r\n        else {\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(e.lineGroup[0], { display: \"none\" });\r\n        }\r\n    }\r\n    setLinker(linkerData) {\r\n        let lenumber = Math.floor(linkerData.length / 2);\r\n        let existNumber = this.linkerElement.length;\r\n        for (let i = 0; i < lenumber - existNumber; i++) {\r\n            this.createLinkerElement();\r\n        }\r\n        for (let i = 0; i < lenumber; i++) {\r\n            this.setLinkerData(this.linkerElement[i], linkerData[i * 2], linkerData[i * 2 + 1]);\r\n        }\r\n    }\r\n    createLinkerElement() {\r\n        let linker = document.createElementNS('http://www.w3.org/2000/svg', \"path\");\r\n        this.svgElement.children[3].appendChild(linker);\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(linker, { fill: `white` });\r\n        this.linkerElement.push(linker);\r\n    }\r\n    setLinkerData(linkElement, start, end) {\r\n        let ly = start[1] + 31 + this.stringPadding * 5;\r\n        if (start[1] !== end[1]) {\r\n            let ex = start[0] + 30;\r\n            let sx = start[0];\r\n            let path = `M ${sx} ${ly} C ${sx + 4} ${ly + 15}, ${ex - 4} ${ly + 15}, ${ex} ${ly} C ${ex - 4} ${ly + 12}, ${sx + 4} ${ly + 12}, ${sx} ${ly} `;\r\n            ly = end[1] + 31 + this.stringPadding * 5;\r\n            sx = end[0] - 30;\r\n            ex = end[0];\r\n            path += `M ${sx} ${ly} C ${sx + 4} ${ly + 15}, ${ex - 4} ${ly + 15}, ${ex} ${ly} C ${ex - 4} ${ly + 12}, ${sx + 4} ${ly + 12}, ${sx} ${ly}`;\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(linkElement, { d: path });\r\n        }\r\n        else {\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(linkElement, { d: `M ${start[0]} ${ly} C ${start[0] + 4} ${ly + 15}, ${end[0] - 4} ${ly + 15}, ${end[0]} ${ly} C ${end[0] - 4} ${ly + 12}, ${start[0] + 4} ${ly + 12}, ${start[0]} ${ly}` });\r\n        }\r\n    }\r\n    onNoteClicked(ev) {\r\n        this.callbacks[\"noteclick\"].callAll(Number(ev.currentTarget.dataset.section), Number(ev.currentTarget.dataset.note));\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU2xpbVRhYlYyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL1NsaW1UYWJWMi50cz85NzBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vVGFibGF0dXJlXHJcbi8qKlxyXG4gICogcmVuZGVyIHBpcGVsaW5lOiBjYWN1bGF0ZSBlYWNoIG5vdGUgcG9zaXRpb24gYW5kIGFjdHVhbCBub3RlIG51bWJlciAoY2FsTm90ZVJhd0RhdGEpXHJcbiAgKiAgICAgICAgICAgICAgICAgPT4gZHJhdyBuZWNlc3NhcnkgbGluZXMgKGRyYXdBbGxMaW5lKVxyXG4gICogICAgICAgICAgICAgICAgID0+IGNyZWF0ZSBlbm91Z2ggc3ZnIGVsZW1lbnQgYW5kIHJldXNlIHRoZW0gKHNldEFsbE5vdGVFbGVtZW50RGF0YSlcclxuICAqICAgICAgICAgICAgICAgICA9PiBzZXQgZWxlbWVudHMgZGF0YSAgKHNldE5vdGVFbGVtZW50RGF0YSlcclxuICAqICAgICAgICAgICAgICAgICAgXHJcbiAgKi9cclxuXHJcbmltcG9ydCB7dXRpbHMsIENhbGxiYWNrc30gZnJvbSBcIi4vdXRpbHNcIlxyXG5pbXBvcnQgeyBzZWN0aW9uLCBub3RlLCBzdmdOb3RlIH0gZnJvbSBcIi4vU2xpbVRhYlYyVHlwZXNcIlxyXG5pbXBvcnQgeyBDb3JyZWN0aW9uIH0gZnJvbSBcIi4vU2xpbVRhYlYySW50ZXJmYWNlXCJcclxuaW1wb3J0IHsgU0xDYW52YXMsIFNMTGF5ZXIgfSBmcm9tIFwiLi9TbGltVGFiVjJDYW52YXNcIlxyXG5cclxudHlwZSBjYWN1bGF0ZWROb3RlRGF0YSA9IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJbXSwgbnVtYmVyW10sIG51bWJlciwgbnVtYmVyXTsgLy9beCwgeSAsIGxlbmd0aCwgYmxvY2sgb2YgZXZlcnkgY2hvcmQsIHRhaWwgbGVuZ3RoLCBzZWN0aW9uIGluZGV4LCBub3RlIGluZGV4XVxyXG5cclxuZXhwb3J0IGNsYXNzIFNMVGFiIHtcclxuICAgIHJlYWRvbmx5IGxlbmd0aFBlckJlYXQ6IG51bWJlciA9IDQ7XHJcbiAgICByZWFkb25seSBiZWF0UGVyU2VjdGlvbjogbnVtYmVyID0gNDtcclxuICAgIHByaXZhdGUgbGluZVdpZHRoOiBudW1iZXIgPSA4MDA7XHJcbiAgICBwcml2YXRlIHNlY3Rpb25QZXJMaW5lOiBudW1iZXIgPSAyO1xyXG4gICAgcHJpdmF0ZSBzdHJpbmdQYWRkaW5nOiBudW1iZXIgPSAxNjsgLy8gZGlzdGFuY2UgYmV0d2VlbiBlYWNoIHN0cmluZ1xyXG4gICAgcHJpdmF0ZSBsaW5lUGVyUGFnZTogbnVtYmVyID0gMjA7XHJcbiAgICBwcml2YXRlIGxpbmVNYXJnaW46IG51bWJlciA9IDQyOyAvLyBvbmx5IGZvciBsZWZ0IGFuZCByaWdodFxyXG4gICAgcHJpdmF0ZSBsaW5lUGFkZGluZzogW251bWJlciwgbnVtYmVyXSA9IFszMiwgMTRdO1xyXG4gICAgcHJpdmF0ZSBsaW5lRGlzdGFuY2U6IG51bWJlciA9IDkwOyAvLyBkaXN0YW5jZSBiZXR3ZWVuIGVhY2ggbGluZVxyXG4gICAgcHJpdmF0ZSBzZWN0aW9uQWRkTm90ZU51bWJlciA9IDE2O1xyXG4gICAgbm90ZXM6IHNlY3Rpb25bXTtcclxuICAgIHByaXZhdGUgbm90ZUVsZW1lbnQ6IFNWR0VsZW1lbnRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBsaW5rZXJFbGVtZW50OiBTVkdFbGVtZW50W10gPSBbXTtcclxuICAgIHByaXZhdGUgc3ZnRWxlbWVudDogU1ZHRWxlbWVudDtcclxuICAgIHByaXZhdGUgc2VjdGlvbkJhckVsZW1lbnQ6IFNWR0VsZW1lbnRbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBsaW5lRWxlbWVudDogU1ZHRWxlbWVudFtdID0gW107XHJcbiAgICBwcml2YXRlIHNlY3Rpb25JbmRpY2F0b3JFbGVtZW50OiBTVkdFbGVtZW50W10gPSBbXTtcclxuICAgIHByaXZhdGUgc3RhcnRQb3NpdGlvbjogbnVtYmVyW10gPSBbdGhpcy5saW5lTWFyZ2luICsgdGhpcy5saW5lUGFkZGluZ1swXSArIDIwLCAxMjAgKyB0aGlzLmxpbmVQYWRkaW5nWzFdXTsgLy8geCwgeVxyXG4gICAgcHJpdmF0ZSBsaW5lSW5mbzogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzAsIHRoaXMubGluZU1hcmdpbiwgMTIwXTsgLy8gdG90YWwgbGluZSBudW1iZXIsIGxhc3QgbGluZSBYLCBsYXN0IGxpbmUgWVxyXG4gICAgdGFiQ2FudmFzOiBTTENhbnZhczxTTExheWVyPjtcclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsYmFja3NcclxuICAgICAqIEF2YWlsYWJsZSBjYWxsYmFja3NcclxuICAgICAqIG5vdGVjbGljazogdHJpZ2dlcmVkIHdoZW4gYSBub3RlIGVsZW1lbnQgaXMgY2xpY2tlZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGxiYWNrczogQ2FsbGJhY2tzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGE/OiB7bGVuZ3RoUGVyQmVhdD86IG51bWJlciwgYmVhdFBlclNlY3Rpb24/OiBudW1iZXIsIGxpbmVXaWR0aD86IG51bWJlciwgc2VjdGlvblBlckxpbmU/OiBudW1iZXIsIGxpbmVQZXJQYWdlPzogbnVtYmVyfSkge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgZGF0YSk7XHJcbiAgICAgICAgdGhpcy50YWJDYW52YXMgPSBuZXcgU0xDYW52YXM8U0xMYXllcj4oU0xMYXllcik7XHJcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBuZXcgQ2FsbGJhY2tzKFtcIm5vdGVjbGlja1wiLCBcInNlY3Rpb25jaGFuZ2VcIl0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldE5vdGVEYXRhKGRhdGE6IFtudW1iZXIsIG51bWJlcltdLCBhbnldW11bXSkge1xyXG4gICAgICAgIHRoaXMubm90ZXMgPSBkYXRhO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIGFkZCBhIG5vdGVcclxuICAgICAqIEBwYXJhbSB7IFtudW1iZXIsIG51bWJlcltdLCBhbnldIH0gICBkYXRhLCBub3RlIGxlbmd0aCwgW2Jsb2NrIG51bWJlciwgaW5kZXggaXMgc3RyaW5nIG51bWJlcixdLCB1c2VyIGRhdGFcclxuICAgICAqIEBwYXJhbSB7IG51bWJlciB9ICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLCBpZiBnaXZlIC0xLCBub3RlIHdpbGwgYmUgYXBwZW5kZWQgYXQgbGFzdCBzZWN0aW9uLiBJbmRleCBzdGFydCBmcm9tIDBcclxuICAgICAqIEBwYXJhbSB7IG51bWJlciB9ICAgICAgICAgICAgICAgICAgICBub3RlLCBpZiBnaXZlIC0xLCBub3RlIHdpbGwgYmUgYXBwZW5kZWQgYXQgbGFzdCBub3RlLiBJbmRleCBzdGFydCBmcm9tIDBcclxuICAgICAqL1xyXG4gICAgaW5zdHJ1bWVudE5vdGVJbnB1dChjb3JyZWN0aW9uOiBDb3JyZWN0aW9uLCBkYXRhOiBub3RlLCBzZWN0aW9uOiBudW1iZXIgPSAtMSwgbm90ZTogbnVtYmVyID0gLTEpIHtcclxuICAgICAgICBpZihzZWN0aW9uID09IC0xKXNlY3Rpb24gPSB0aGlzLm5vdGVzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgaWYobm90ZSA9PSAtMSlub3RlID0gdGhpcy5ub3Rlc1tzZWN0aW9uXS5sZW5ndGggLSAxO1xyXG4gICAgICAgIGNvcnJlY3Rpb24odGhpcywgZGF0YSwgc2VjdGlvbiwgbm90ZSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXR0YWNoKGFuY2hvcjogSFRNTEVsZW1lbnQpe1xyXG4gICAgICAgIGFuY2hvci5hcHBlbmQodGhpcy50YWJDYW52YXMuZG9tRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCB3aWR0aCA9IHRoaXMubGluZVdpZHRoICsgdGhpcy5saW5lUGFkZGluZ1swXSoyICsgNDIqMjtcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKHRoaXMudGFiQ2FudmFzLmRvbUVsZW1lbnQse3dpZHRoOiBgJHt3aWR0aH1gLCBoZWlnaHQ6IFwiNjAwXCJ9KTtcclxuICAgICAgICAvL3RoaXMuc2V0QWxsTGluZSgpO1xyXG4gICAgICAgIGxldCBbbm90ZVJhd0RhdGEsIGxpbmtlckRhdGEsIHNlY3Rpb25Qb3NpdGlvbl0gPSB0aGlzLmNhbE5vdGVSYXdEYXRhKCk7XHJcbiAgICAgICAgLy90aGlzLnNldFNlY3Rpb25JbmRpY2F0b3Ioc2VjdGlvblBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnNldEFsbE5vdGVFbGVtZW50RGF0YShub3RlUmF3RGF0YSk7XHJcbiAgICAgICAgLy90aGlzLnNldExpbmtlcihsaW5rZXJEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBvbihlbmFtZTogc3RyaW5nLCBjYms6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCkge1xyXG4gICAgICAgIGlmKGVuYW1lIGluIHRoaXMuY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzW2VuYW1lXS5wdXNoKGNiayk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0QWxsTGluZSgpIHtcclxuICAgICAgICBsZXQgbG4gPSBNYXRoLmNlaWwodGhpcy5ub3Rlcy5sZW5ndGggLyB0aGlzLnNlY3Rpb25QZXJMaW5lKTtcclxuICAgICAgICBpZihsbiA+IHRoaXMubGluZUluZm9bMF0pe1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbG4gLSB0aGlzLmxpbmVJbmZvWzBdOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgbGV0IG5sID0gdGhpcy5jcmVhdGVMaW5lKHRoaXMubGluZUluZm9bMV0sIHRoaXMubGluZUluZm9bMl0sIGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lRWxlbWVudC5wdXNoKG5sKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3ZnRWxlbWVudC5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChubCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVJbmZvWzJdICs9IHRoaXMuc3RyaW5nUGFkZGluZyAqIDUgKyB0aGlzLmxpbmVEaXN0YW5jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpbmVJbmZvWzBdID0gbG47XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldFNlY3Rpb25JbmRpY2F0b3IocG9zaXRpb246IFtudW1iZXJbXSwgbnVtYmVyW11dW10pe1xyXG4gICAgICAgIGlmKHBvc2l0aW9uLmxlbmd0aCA+IHRoaXMuc2VjdGlvbkluZGljYXRvckVsZW1lbnQubGVuZ3RoKXtcclxuICAgICAgICAgICAgbGV0IG5zTnVtYmVyID0gcG9zaXRpb24ubGVuZ3RoIC0gdGhpcy5zZWN0aW9uSW5kaWNhdG9yRWxlbWVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBuc051bWJlcjsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGxldCBucyA9IHRoaXMuY3JlYXRlU2VjdGlvbkluZGljYXRvcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdmdFbGVtZW50LmNoaWxkcmVuWzFdLmFwcGVuZENoaWxkKG5zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkluZGljYXRvckVsZW1lbnQucHVzaChucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHBvc2l0aW9uLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gcG9zaXRpb25baV1bMV1bMF0gLSBwb3NpdGlvbltpXVswXVswXTtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHRoaXMuc3RyaW5nUGFkZGluZyAqIDU7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXModGhpcy5zZWN0aW9uSW5kaWNhdG9yRWxlbWVudFtpXSwge3g6IGAke3Bvc2l0aW9uW2ldWzBdWzBdfWAsIHk6IGAke3Bvc2l0aW9uW2ldWzBdWzFdfWAsIHdpZHRoOiBgJHt3aWR0aH1gLCBoZWlnaHQ6IGAke2hlaWdodH1gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVTZWN0aW9uSW5kaWNhdG9yKCk6IFNWR0VsZW1lbnR7XHJcbiAgICAgICAgbGV0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwicmVjdFwiKTtcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKHNxdWFyZSwge1wic3Ryb2tlLXdpZHRoXCI6IFwiMFwiLCBmaWxsOiBcInJnYmEoMCwgMjU1LCAyNTUsIDAuMTMpXCJ9KTtcclxuICAgICAgICByZXR1cm4gc3F1YXJlO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjcmVhdGVMaW5lKHg6IG51bWJlciwgeTogbnVtYmVyLCBsaW5lTnVtYmVyOiBudW1iZXIpOiBTVkdFbGVtZW50IHtcclxuICAgICAgICBsZXQgbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcImdcIik7XHJcbiAgICAgICAgbGV0IGxpbmVCYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJyZWN0XCIpO1xyXG4gICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMobGluZUJhY2sse3g6IGAke3h9YCwgeTpgJHt5fWAsc3R5bGU6IFwiZmlsbDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjA5KVwiLCB3aWR0aDpgJHt0aGlzLmxpbmVQYWRkaW5nWzBdKjIgKyB0aGlzLmxpbmVXaWR0aH1gLCBoZWlnaHQ6IGAke3RoaXMubGluZVBhZGRpbmdbMV0qMiArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YH0pO1xyXG4gICAgICAgIG5nLmFwcGVuZENoaWxkKGxpbmVCYWNrKTtcclxuICAgICAgICB4ICs9IHRoaXMubGluZVBhZGRpbmdbMF07XHJcbiAgICAgICAgeSArPSB0aGlzLmxpbmVQYWRkaW5nWzFdO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCA2OyBpKyspe1xyXG4gICAgICAgICAgICBsZXQgbCA9IHRoaXMubGluZVdpZHRoO1xyXG4gICAgICAgICAgICBsZXQgbmV3TGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwibGluZVwiKTtcclxuICAgICAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhuZXdMaW5lLHt4MTogYCR7eH1gLCB5MTogYCR7eSArIGkqdGhpcy5zdHJpbmdQYWRkaW5nfWAsIHgyOiBgJHt4ICsgbH1gLCB5MjogYCR7eSArIGkqdGhpcy5zdHJpbmdQYWRkaW5nfWAsIHN0eWxlOiBcInN0cm9rZTpyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMjQpIDtzdHJva2Utd2lkdGg6MlwifSk7XHJcbiAgICAgICAgICAgIG5nLmFwcGVuZENoaWxkKG5ld0xpbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZy5hcHBlbmRDaGlsZCh0aGlzLmRyYXdMaW5lVGl0bGUoeCAtIDMwLCB5KSk7XHJcbiAgICAgICAgbmcuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVCYXIoeCAsIHkpKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWN0aW9uUGVyTGluZTsgaSsrKXtcclxuICAgICAgICAgICAgbGV0IGJhciA9IHRoaXMuY3JlYXRlQmFyKDAsIDApO1xyXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25CYXJFbGVtZW50LnB1c2goYmFyKTtcclxuICAgICAgICAgICAgbmcuYXBwZW5kQ2hpbGQoYmFyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZztcclxuICAgIH1cclxuICAgIHByaXZhdGUgZHJhd0xpbmVUaXRsZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IFNWR0VsZW1lbnQge1xyXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwiZ1wiKTtcclxuICAgICAgICB0aXRsZS5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPHRleHQgc3R5bGU9XCJmaWxsOiM5NTk1OTU7Zm9udDoxN3B4IGFyaWFsO1wiPlxyXG4gICAgICAgICAgICA8dHNwYW4geD0nJHt4ICsgMTB9JyB5PScke3kgKyAyNn0nPlQ8L3RzcGFuPlxyXG4gICAgICAgICAgICA8dHNwYW4geD0nJHt4ICsgMTB9JyB5PScke3kgKyAyMiArIDI2fSc+QTwvdHNwYW4+XHJcbiAgICAgICAgICAgIDx0c3BhbiB4PScke3ggKyAxMH0nIHk9JyR7eSArIDQ0ICsgMjZ9Jz5CPC90c3Bhbj5cclxuICAgICAgICA8L3RleHQ+XHJcbiAgICAgICAgYDtcclxuICAgICAgICByZXR1cm4gdGl0bGU7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGNyZWF0ZUJhcih4OiBudW1iZXIsIHk6IG51bWJlcik6IFNWR0VsZW1lbnQge1xyXG4gICAgICAgIGxldCBiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcImxpbmVcIik7XHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhiYXIse3N0eWxlOiAnc3Ryb2tlOnJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yNCkgO3N0cm9rZS13aWR0aDoyJ30pXHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhiYXIse3gxOiBgJHt4fWAsIHkxOiBgJHt5fWAsIHgyOiBgJHt4fWAsIHkyOiBgJHt5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gfSlcclxuICAgICAgICByZXR1cm4gYmFyO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0QmFyUG9zaXRpb24oYmFyOlNWR0VsZW1lbnQsIHg6IG51bWJlciwgeTogbnVtYmVyKXtcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGJhcix7eDE6IGAke3h9YCwgeTE6IGAke3l9YCwgeDI6IGAke3h9YCwgeTI6IGAke3kgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1fWB9KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlTm90ZUVsZW1lbnQoeDogbnVtYmVyID0gMjAwLCB5Om51bWJlciA9IDIwKXtcclxuICAgICAgICBsZXQgbm90ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwiZ1wiKTtcclxuICAgICAgICBsZXQgbm90ZUh0bWwgPSBgPGc+XHJcbiAgICAgICAgPGxpbmUgc3R5bGU9XCJzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjFcIiB4MT1cIiR7eH1cIiB5MT1cIjE0MFwiIHgyPVwiJHt4fVwiIHkyPVwiJHt5fVwiPjwvbGluZT5cclxuICAgICAgICA8bGluZSBzdHlsZT1cInN0cm9rZTp3aGl0ZTtzdHJva2Utd2lkdGg6MlwiIHgxPVwiJHt4fVwiIHkxPVwiMTM4XCIgeDI9XCIke3grMTB9XCIgeTI9XCIxMzhcIj48L2xpbmU+XHJcbiAgICAgICAgPGxpbmUgc3R5bGU9XCJzdHJva2U6d2hpdGU7c3Ryb2tlLXdpZHRoOjJcIiB4MT1cIiR7eH1cIiB5MT1cIjEzMFwiIHgyPVwiJHt4KzEwfVwiIHkyPVwiMTMwXCI+PC9saW5lPlxyXG4gICAgICAgIDxsaW5lIHN0eWxlPVwic3Ryb2tlOndoaXRlO3N0cm9rZS13aWR0aDoyXCI+PC9saW5lPlxyXG4gICAgICAgIDwvZz5gO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCA2IDsgaSsrKXtcclxuICAgICAgICAgICAgbm90ZUh0bWwgKz0gYFxyXG4gICAgICAgICAgICAgICAgPGc+XHJcbiAgICAgICAgICAgICAgICA8ZWxsaXBzZSBjeD0nJHt4fScgY3k9JyR7eSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIGl9JyByeD0nNCcgcnk9JzYnIGZpbGw9JyM0NDQnIHN0cm9rZS13aWR0aD0nMCcgc3Ryb2tlPSdibGFjaycgc3R5bGU9J2N1cnNvcjpwb2ludGVyOyc+PC9lbGxpcHNlPlxyXG4gICAgICAgICAgICAgICAgPHRleHQgeD0nJHt4IH0nIHk9JyR7eSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIGkgKyA0fScgdGV4dC1hbmNob3I9XCJtaWRkbGVcIiBzdHlsZT1cImZvbnQ6MTJweCBTYW5zLXNlcmlmOyBmaWxsOiNmZmZcIj4zPC90ZXh0PlxyXG4gICAgICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub3RlLmlubmVySFRNTCA9IG5vdGVIdG1sO1xyXG4gICAgICAgIHRoaXMuc3ZnRWxlbWVudC5jaGlsZHJlblsyXS5hcHBlbmRDaGlsZChub3RlKTtcclxuICAgICAgICB0aGlzLm5vdGVFbGVtZW50LnB1c2gobm90ZSk7XHJcblxyXG4gICAgICAgIG5vdGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMub25Ob3RlQ2xpY2tlZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7IGNhY3VsYXRlZE5vdGVEYXRhW10sIG51bWJlcltdW10gfSBhcnJheSBvZiBbeCwgeSAsIGxlbmd0aCwgYmxvY2sgb2YgZXZlcnkgY2hvcmQsIHRhaWwgbGVuZ3RoLCBzZWN0aW9uIGluZGV4LCBub3RlIGluZGV4XSwgbGlua2VyIGRhdGEsIHNlY3Rpb24geCBwb3NpdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbE5vdGVSYXdEYXRhKCk6WyBjYWN1bGF0ZWROb3RlRGF0YVtdLCBudW1iZXJbXVtdLCBbbnVtYmVyW10sIG51bWJlcltdXVtdIF17XHJcbiAgICAgICAgbGV0IFt4LCB5XSA9IHRoaXMuc3RhcnRQb3NpdGlvbjtcclxuICAgICAgICBsZXQgcmF3RGF0YTogY2FjdWxhdGVkTm90ZURhdGFbXSA9IFtdO1xyXG4gICAgICAgIGxldCBzZWN0aW9uTGVuZ3RoID0gdGhpcy5iZWF0UGVyU2VjdGlvbiAvIHRoaXMubGVuZ3RoUGVyQmVhdDtcclxuICAgICAgICBsZXQgbGlua2VyID0gW107XHJcbiAgICAgICAgbGV0IHNlY3Rpb25JbmRpY2F0b3I6IFtudW1iZXJbXSwgbnVtYmVyW11dW10gPSBbXTtcclxuICAgICAgICBsZXQgc2VwZXJhdGVyTGVuZ3RoID0gMSAvIDQ7XHJcbiAgICAgICAgbGV0IGFjY3VtdWxhdGVkTGVuZ3RoID0gMDtcclxuICAgICAgICByYXdEYXRhLnB1c2goWzAsIDAsIDAsIG51bGwsIG51bGwsIDAsIDBdKTsgLy8gZ2l2ZSBhIGluaXRpYWwgZGF0YSwgcmVtb3ZlIGl0IGF0IHRoZSBlbmQgb2YgZnVuY3Rpb25cclxuXHJcbiAgICAgICAgZm9yKGxldCBzID0gMDsgcyA8IHRoaXMubm90ZXMubGVuZ3RoOyBzKyspeyAvLyBzZWN0aW9uXHJcbiAgICAgICAgICAgIGxldCBsaW5lID0gTWF0aC5mbG9vcihzIC8gdGhpcy5zZWN0aW9uUGVyTGluZSk7XHJcbiAgICAgICAgICAgIGxldCBsaW5lVG90YWxOb3RlID0gMDtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuc2VjdGlvblBlckxpbmU7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLm5vdGVzW2xpbmUgKiB0aGlzLnNlY3Rpb25QZXJMaW5lICsgaV0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVUb3RhbE5vdGUgKz0gdGhpcy5ub3Rlc1tsaW5lICogdGhpcy5zZWN0aW9uUGVyTGluZSArIGldLmxlbmd0aCArIHRoaXMuc2VjdGlvbkFkZE5vdGVOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lVG90YWxOb3RlICs9IHRoaXMuc2VjdGlvbkFkZE5vdGVOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHNlY3Rpb25XaWR0aCA9IHRoaXMubGluZVdpZHRoICogKHRoaXMubm90ZXNbc10ubGVuZ3RoICsgdGhpcy5zZWN0aW9uQWRkTm90ZU51bWJlcikgLyBsaW5lVG90YWxOb3RlO1xyXG4gICAgICAgICAgICBsZXQgc2VjdGlvblRvdGFsQmVhdCA9IDA7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLm5vdGVzW3NdLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIHNlY3Rpb25Ub3RhbEJlYXQgKz0gdGhpcy5sZW5ndGhQZXJCZWF0IC90aGlzLm5vdGVzW3NdW2ldWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBiZWF0TGVuZ3RoID0gKHNlY3Rpb25XaWR0aCAtIDIwKSAvIHNlY3Rpb25Ub3RhbEJlYXQ7XHJcblxyXG4gICAgICAgICAgICBpZihzICUgdGhpcy5zZWN0aW9uUGVyTGluZSA9PSAwKXsgLy8gY2hhbmdlIGxpbmVcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLnN0YXJ0UG9zaXRpb25bMF07XHJcbiAgICAgICAgICAgICAgICBpZihzICE9IDApeSArPSB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1ICsgdGhpcy5saW5lRGlzdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHN4OiBbbnVtYmVyW10sIG51bWJlcltdXSA9IFtbeCAtIDIwLCB5XSwgWzAsIHldXTsgLy8gc2VjdGlvbiBwb3NpdGlvblxyXG4gICAgICAgICAgICBsZXQgbnggPSB4ICsgc2VjdGlvbldpZHRoO1xyXG4gICAgICAgICAgICBzeFsxXVswXSA9IG54IC0gMjA7XHJcbiAgICAgICAgICAgIC8vdGhpcy5zZXRCYXJQb3NpdGlvbih0aGlzLnNlY3Rpb25CYXJFbGVtZW50W3NdLCBueCAtMjAsIHkpO1xyXG4gICAgICAgICAgICBzZWN0aW9uSW5kaWNhdG9yLnB1c2goc3gpO1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5ub3Rlc1tzXS5sZW5ndGg7IGkrKyl7IC8vIG5vdGVcclxuICAgICAgICAgICAgICAgIGxldCBub3RlID0gdGhpcy5ub3Rlc1tzXVtpXTtcclxuICAgICAgICAgICAgICAgIGxldCBub3RlTGVuZ3RoID0gdGhpcy5sZW5ndGhQZXJCZWF0IC8gbm90ZVswXTtcclxuICAgICAgICAgICAgICAgIGxldCB0YWlsOiBudW1iZXJbXTtcclxuICAgICAgICAgICAgICAgIGlmKGFjY3VtdWxhdGVkTGVuZ3RoICsgbm90ZUxlbmd0aCAvIHRoaXMubGVuZ3RoUGVyQmVhdCA+PSBzZXBlcmF0ZXJMZW5ndGgpeyAvLyB0aGUgbm90ZSBpcyB0aGUgZW5kIG9mIGEgc2VwZXJhdGVyIG9yIHRoZSBub3RlJ3MgbGVuZ3RoIGVxdWFscyB0byBzZXBlcmF0ZXIgbGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgdGFpbCA9IHRoaXMuY2FsY3VsYXRlVGFpbChyYXdEYXRhW3Jhd0RhdGEubGVuZ3RoIC0gMV1bMl0sIG5vdGVbMF0sIC0xLCBiZWF0TGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlZExlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0YWlsID0gdGhpcy5jYWxjdWxhdGVUYWlsKHJhd0RhdGFbcmF3RGF0YS5sZW5ndGggLSAxXVsyXSwgbm90ZVswXSwgYWNjdW11bGF0ZWRMZW5ndGgsIGJlYXRMZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVkTGVuZ3RoICs9IG5vdGVMZW5ndGggLyB0aGlzLmxlbmd0aFBlckJlYXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RlcCA9IGJlYXRMZW5ndGggKiB0aGlzLmxlbmd0aFBlckJlYXQgLyBub3RlWzBdO1xyXG4gICAgICAgICAgICAgICAgcmF3RGF0YS5wdXNoKFt4LCB5LCBub3RlWzBdLCBub3RlWzFdLCB0YWlsLCBzLCBpXSk7XHJcbiAgICAgICAgICAgICAgICBpZihub3RlWzJdID09PSBcImxpbmtTdGFydFwiIHx8IG5vdGVbMl0gPT09IFwibGlua0VuZFwiKXtcclxuICAgICAgICAgICAgICAgICAgICBsaW5rZXIucHVzaChbeCx5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB4ICs9IHN0ZXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeCA9IG54O1xyXG4gICAgICAgIH1cclxuICAgICAgICByYXdEYXRhLnNoaWZ0KCk7XHJcbiAgICAgICAgcmV0dXJuIFtyYXdEYXRhLCBsaW5rZXIsIHNlY3Rpb25JbmRpY2F0b3JdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FsY3VsYXRlVGFpbChsYXN0Tm90ZUxlbmd0aDogbnVtYmVyLCBub3RlTGVuZ3RoOiBudW1iZXIsIGFjY3VtdWxhdGVkTGVuZ3RoOiBudW1iZXIsIGJlYXRMZW5ndGg6IG51bWJlcik6IG51bWJlcltde1xyXG4gICAgICAgIGxldCBzdGVwID0gYmVhdExlbmd0aCAqIHRoaXMubGVuZ3RoUGVyQmVhdCAvIGxhc3ROb3RlTGVuZ3RoICogLTE7XHJcbiAgICAgICAgbGV0IGJhc2ljTGVuZ3RoID0gODtcclxuICAgICAgICBpZihhY2N1bXVsYXRlZExlbmd0aCA9PSAtMSliYXNpY0xlbmd0aCA9IC04O1xyXG4gICAgICAgIGlmKGFjY3VtdWxhdGVkTGVuZ3RoID09IDApeyAvLyBzdGFydCBvZiBhIHNlcGVyYXRlIG5vdGVcclxuICAgICAgICAgICAgaWYobm90ZUxlbmd0aCA9PSA4KXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbOCwgMCwgMF07XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKG5vdGVMZW5ndGggPT0gMTYpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFs4LCA4LCAwXTtcclxuICAgICAgICAgICAgfWVsc2UgaWYobm90ZUxlbmd0aCA9PSAzMil7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gWzgsIDgsIDhdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKG5vdGVMZW5ndGggPT0gOCl7XHJcbiAgICAgICAgICAgICAgICBpZihsYXN0Tm90ZUxlbmd0aCA9PSA4IHx8IGxhc3ROb3RlTGVuZ3RoID09IDE2IHx8IGxhc3ROb3RlTGVuZ3RoID09IDMyKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3N0ZXAsIDAsIDBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZSBpZihub3RlTGVuZ3RoID09IDE2KXtcclxuICAgICAgICAgICAgICAgIGlmKGxhc3ROb3RlTGVuZ3RoID09IDggKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3N0ZXAsIGJhc2ljTGVuZ3RoLCAwXTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGxhc3ROb3RlTGVuZ3RoID09IDE2IHx8IGxhc3ROb3RlTGVuZ3RoID09IDMyKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3N0ZXAsIHN0ZXAsIDBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZSBpZihub3RlTGVuZ3RoID09IDMyKXtcclxuICAgICAgICAgICAgICAgIGlmKGxhc3ROb3RlTGVuZ3RoID09IDgpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbc3RlcCwgYmFzaWNMZW5ndGgsIGJhc2ljTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGxhc3ROb3RlTGVuZ3RoID09IDE2KXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3N0ZXAsIHN0ZXAsIGJhc2ljTGVuZ3RoXTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGxhc3ROb3RlTGVuZ3RoID09IDMyKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3N0ZXAsIHN0ZXAsIHN0ZXBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbMCwgMCwgMF07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHJlY2VpdmUgZGF0YSBmcm9tIGNhbE5vdGVSYXdEYXRhIGFuZCBzZXQgZWxlbWVudHNcclxuICAgICAqIEBwYXJhbSB7IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJbXV1bXSB9IGRhdGEgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0QWxsTm90ZUVsZW1lbnREYXRhKGRhdGE6IGNhY3VsYXRlZE5vdGVEYXRhW10pe1xyXG4gICAgICAgIGxldCBub3RlRWxlbWVudCA9IHRoaXMudGFiQ2FudmFzLmxheWVycy5ub3Rlcy5ub3RlRWxlbWVudHNcclxuICAgICAgICBsZXQgbmUgPSBkYXRhLmxlbmd0aCAtIG5vdGVFbGVtZW50Lmxlbmd0aDtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbmU7IGkrKyl7XHJcbiAgICAgICAgICAgIHRoaXMudGFiQ2FudmFzLmxheWVycy5ub3Rlcy5jcmVhdGVOb3RlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUobm90ZUVsZW1lbnRbaV0uZWxlbWVudCx7IGRpc3BsYXk6IFwidW5zZXRcIn0pO1xyXG4gICAgICAgICAgICB0aGlzLnNldE5vdGVFbGVtZW50RGF0YShub3RlRWxlbWVudFtpXSwgZGF0YVtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcihsZXQgaSA9IGRhdGEubGVuZ3RoOyBpIDwgdGhpcy5ub3RlRWxlbWVudC5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKG5vdGVFbGVtZW50W2ldLmVsZW1lbnQseyBkaXNwbGF5OiBcIm5vbmVcIn0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0Tm90ZUVsZW1lbnREYXRhKGVsOiBzdmdOb3RlLCBkYXRhOiBjYWN1bGF0ZWROb3RlRGF0YSl7XHJcbiAgICAgICAgdGhpcy5zZXRFbGVtZW50UG9zaXRpb24oZWwsIGRhdGFbMF0sIGRhdGFbMV0sIGRhdGFbNF0sIGRhdGFbNV0sIGRhdGFbNl0pO1xyXG4gICAgICAgIHRoaXMuc2V0Q2hvcmRWaXNpYWJsZShlbCwgZGF0YVsxXSwgZGF0YVszXSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNldEVsZW1lbnRQb3NpdGlvbihlOiBzdmdOb3RlLCB4Om51bWJlciwgeTpudW1iZXIsIHRhaWw6IG51bWJlcltdLCBzZWN0aW9uSW5kZXg6IG51bWJlciwgbm90ZUluZGV4OiBudW1iZXIpe1xyXG4gICAgICAgIC8vIHNldCBub3RlIGJhcidzIHBvc2l0aW9uIGFuZCBiYXIgdGFpbCdzIGxlbmd0aFxyXG4gICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5saW5lR3JvdXBbMF0se3gxOiBgJHt4fWAsIHkxOiBgJHsyNiArIHkgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1fWAsIHgyOiBgJHt4fWAsIHkyOiBgJHt5fWB9KTtcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGUubGluZUdyb3VwWzFdLHt4MTogYCR7eH1gLCB5MTogYCR7MjUgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gLCB4MjogYCR7eCArIHRhaWxbMF19YCwgeTI6IGAkezI1ICsgeSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YH0pO1xyXG4gICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5saW5lR3JvdXBbMl0se3gxOiBgJHt4fWAsIHkxOiBgJHsyMSArIHkgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1fWAsIHgyOiBgJHt4ICsgdGFpbFsxXX1gLCB5MjogYCR7MjEgKyB5ICsgdGhpcy5zdHJpbmdQYWRkaW5nICogNX1gfSk7XHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhlLmxpbmVHcm91cFszXSx7eDE6IGAke3h9YCwgeTE6IGAkezE3ICsgeSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDV9YCwgeDI6IGAke3ggKyB0YWlsWzJdfWAsIHkyOiBgJHsxNyArIHkgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1fWB9KTtcclxuICAgICAgICAvLyBzZXQgbm90ZSB3b3JkIHBvc2l0aW9uXHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCA2OyBpKyspe1xyXG4gICAgICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGUuYmxvY2tHcm91cFtpXS5lbGxpcHNlLCB7Y3g6IGAke3h9YCwgY3k6IGAke3kgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiAoaS0xKX1gfSk7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMoZS5ibG9ja0dyb3VwW2ldLndvcmQsIHt4OiBgJHt4fWAsIHk6IGAke3kgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiAoaS0xKSArIDR9YH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGUuZWxlbWVudCwge1wiZGF0YS1zZWN0aW9uXCI6IGAke3NlY3Rpb25JbmRleH1gLCBcImRhdGEtbm90ZVwiOiBgJHtub3RlSW5kZXh9YH0pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzZXRDaG9yZFZpc2lhYmxlKGU6c3ZnTm90ZSwgeTogbnVtYmVyLCBkYXRhOiBudW1iZXJbXSl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yKGxldCBpID0gMCA7IGkgPCA2OyBpKyspe1xyXG4gICAgICAgICAgICBlLmJsb2NrR3JvdXBbaV0ud29yZC5pbm5lckhUTUwgPSBgJHtkYXRhW2ldfWA7XHJcbiAgICAgICAgICAgIGlmKGRhdGFbaV0gPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoZS5ibG9ja0dyb3VwW2ldLmVsbGlwc2UsIHtkaXNwbGF5OiBcIm5vbmVcIn0pO1xyXG4gICAgICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoZS5ibG9ja0dyb3VwW2ldLndvcmQsIHtkaXNwbGF5OiBcIm5vbmVcIn0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKGUuYmxvY2tHcm91cFtpXS5lbGxpcHNlLCB7ZGlzcGxheTogXCJibG9ja1wifSk7XHJcbiAgICAgICAgICAgICAgICB1dGlscy5zZXRTdHlsZShlLmJsb2NrR3JvdXBbaV0ud29yZCwge2Rpc3BsYXk6IFwiYmxvY2tcIn0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIG5vdGUgYmFyIHNob3VsZCByZWFjaCB0aGUgdG9wIHdvcmRcclxuICAgICAgICBsZXQgaGM6IG51bWJlciA9IC0xO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDAgOyBpIDwgNjsgaSsrKXtcclxuICAgICAgICAgICAgaWYoZGF0YVtpXSAhPSAtMSl7XHJcbiAgICAgICAgICAgICAgICBoYyA9IGk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfSAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaGMgIT0gLTEpe1xyXG4gICAgICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGUubGluZUdyb3VwWzBdLHt5MjogYCR7eSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIGhjfWB9KTtcclxuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoPEhUTUxFbGVtZW50PmUubGluZUdyb3VwWzBdLCB7ZGlzcGxheTogXCJibG9ja1wifSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldFN0eWxlKDxIVE1MRWxlbWVudD5lLmxpbmVHcm91cFswXSwge2Rpc3BsYXk6IFwibm9uZVwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0TGlua2VyKGxpbmtlckRhdGE6IG51bWJlcltdW10pe1xyXG4gICAgICAgIGxldCBsZW51bWJlciA9IE1hdGguZmxvb3IobGlua2VyRGF0YS5sZW5ndGggLyAyKTtcclxuICAgICAgICBsZXQgZXhpc3ROdW1iZXIgPSB0aGlzLmxpbmtlckVsZW1lbnQubGVuZ3RoXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGxlbnVtYmVyIC0gZXhpc3ROdW1iZXI7IGkrKyl7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlTGlua2VyRWxlbWVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgbGVudW1iZXI7IGkrKyl7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TGlua2VyRGF0YSh0aGlzLmxpbmtlckVsZW1lbnRbaV0sIGxpbmtlckRhdGFbaSoyXSwgbGlua2VyRGF0YVtpKjIrMV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgY3JlYXRlTGlua2VyRWxlbWVudCgpe1xyXG4gICAgICAgIGxldCBsaW5rZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcInBhdGhcIik7XHJcbiAgICAgICAgdGhpcy5zdmdFbGVtZW50LmNoaWxkcmVuWzNdLmFwcGVuZENoaWxkKGxpbmtlcik7XHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhsaW5rZXIsIHtmaWxsOiBgd2hpdGVgfSk7XHJcbiAgICAgICAgdGhpcy5saW5rZXJFbGVtZW50LnB1c2gobGlua2VyKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2V0TGlua2VyRGF0YShsaW5rRWxlbWVudDpTVkdFbGVtZW50LCBzdGFydDogbnVtYmVyW10sIGVuZDogbnVtYmVyW10pe1xyXG4gICAgICAgIGxldCBseSA9IHN0YXJ0WzFdICsgMzEgKyB0aGlzLnN0cmluZ1BhZGRpbmcgKiA1O1xyXG4gICAgICAgIGlmKHN0YXJ0WzFdICE9PSBlbmRbMV0pe1xyXG4gICAgICAgICAgICBsZXQgZXggPSBzdGFydFswXSArIDMwO1xyXG4gICAgICAgICAgICBsZXQgc3ggPSBzdGFydFswXTtcclxuICAgICAgICAgICAgbGV0IHBhdGggPSBgTSAke3N4fSAke2x5fSBDICR7c3grNH0gJHtseSsxNX0sICR7ZXgtNH0gJHtseSsxNX0sICR7ZXh9ICR7bHl9IEMgJHtleC00fSAke2x5KzEyfSwgJHtzeCs0fSAke2x5KzEyfSwgJHtzeH0gJHtseX0gYDtcclxuICAgICAgICAgICAgbHkgPSBlbmRbMV0gKyAzMSArIHRoaXMuc3RyaW5nUGFkZGluZyAqIDU7XHJcbiAgICAgICAgICAgIHN4ID0gZW5kWzBdIC0gMzA7XHJcbiAgICAgICAgICAgIGV4ID0gZW5kWzBdO1xyXG4gICAgICAgICAgICBwYXRoICs9IGBNICR7c3h9ICR7bHl9IEMgJHtzeCs0fSAke2x5KzE1fSwgJHtleC00fSAke2x5KzE1fSwgJHtleH0gJHtseX0gQyAke2V4LTR9ICR7bHkrMTJ9LCAke3N4KzR9ICR7bHkrMTJ9LCAke3N4fSAke2x5fWA7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMobGlua0VsZW1lbnQsIHtkOiBwYXRofSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHV0aWxzLnNldEF0dHJpYnV0ZXMobGlua0VsZW1lbnQsIHtkOiBgTSAke3N0YXJ0WzBdfSAke2x5fSBDICR7c3RhcnRbMF0rNH0gJHtseSsxNX0sICR7ZW5kWzBdLTR9ICR7bHkrMTV9LCAke2VuZFswXX0gJHtseX0gQyAke2VuZFswXS00fSAke2x5KzEyfSwgJHtzdGFydFswXSs0fSAke2x5KzEyfSwgJHtzdGFydFswXX0gJHtseX1gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb25Ob3RlQ2xpY2tlZChldjogTW91c2VFdmVudCkge1xyXG4gICAgICAgIHRoaXMuY2FsbGJhY2tzW1wibm90ZWNsaWNrXCJdLmNhbGxBbGwoTnVtYmVyKChldi5jdXJyZW50VGFyZ2V0IGFzIFNWR0dFbGVtZW50KS5kYXRhc2V0LnNlY3Rpb24pLCBOdW1iZXIoKGV2LmN1cnJlbnRUYXJnZXQgYXMgU1ZHR0VsZW1lbnQpLmRhdGFzZXQubm90ZSkpO1xyXG4gICAgfVxyXG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7Ozs7OztBQU1BO0FBRUE7QUFHQTtBQUlBO0FBNkJBO0FBNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/SlimTabV2.ts\n");

/***/ }),

/***/ "./src/SlimTabV2Canvas.ts":
/*!********************************!*\
  !*** ./src/SlimTabV2Canvas.ts ***!
  \********************************/
/*! exports provided: Layer, Layers, SLLayer, SLCanvas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Layer\", function() { return Layer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Layers\", function() { return Layers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SLLayer\", function() { return SLLayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SLCanvas\", function() { return SLCanvas; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n\r\nclass Layer {\r\n    constructor() {\r\n        this.domElement = document.createElementNS('http://www.w3.org/2000/svg', \"g\");\r\n    }\r\n    clear() {\r\n        this.domElement.innerHTML = \"\";\r\n    }\r\n    createRect(x, y, width, height, target) {\r\n        const inst = document.createElementNS('http://www.w3.org/2000/svg', \"rect\");\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(inst, {\r\n            x: `${x}`, y: `${y}`,\r\n            width: `${width}`, height: `${height}`\r\n        });\r\n        if (!target)\r\n            this.domElement.appendChild(inst);\r\n        else\r\n            target.appendChild(inst);\r\n        return inst;\r\n    }\r\n    createEllipse(cx, cy, rx, ry, target) {\r\n        const inst = document.createElementNS('http://www.w3.org/2000/svg', \"ellipse\");\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(inst, {\r\n            cx: `${cx}`, cy: `${cy}`,\r\n            rx: `${rx}`, ry: `${ry}`\r\n        });\r\n        if (!target)\r\n            this.domElement.appendChild(inst);\r\n        else\r\n            target.appendChild(inst);\r\n        return inst;\r\n    }\r\n    createText(x, y, str, anchor, target) {\r\n        const inst = document.createElementNS('http://www.w3.org/2000/svg', \"text\");\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(inst, {\r\n            x: `${x}`, y: `${y}`,\r\n            'text-anchor': `${anchor}`\r\n        });\r\n        inst.innerHTML = `${str}`;\r\n        if (!target)\r\n            this.domElement.appendChild(inst);\r\n        else\r\n            target.appendChild(inst);\r\n        return inst;\r\n    }\r\n    createLine(x1, y1, x2, y2, width, color, target) {\r\n        const inst = document.createElementNS('http://www.w3.org/2000/svg', \"line\");\r\n        _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(inst, {\r\n            x1: `${x1}`, y1: `${y1}`,\r\n            x2: `${x2}`, y2: `${y2}`,\r\n            stroke: `${color}`,\r\n            \"stroke-width\": `${width}`\r\n        });\r\n        if (!target)\r\n            this.domElement.appendChild(inst);\r\n        else\r\n            target.appendChild(inst);\r\n        return inst;\r\n    }\r\n    ;\r\n}\r\nclass NoteLayer extends Layer {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.noteElements = [];\r\n    }\r\n    createNote() {\r\n        const note = document.createElementNS('http://www.w3.org/2000/svg', \"g\");\r\n        const blockGroup = document.createElementNS('http://www.w3.org/2000/svg', \"g\");\r\n        const blockArray = [];\r\n        const lineGroup = document.createElementNS('http://www.w3.org/2000/svg', \"g\");\r\n        this.createLine(0, 0, 0, 0, 1, \"white\", lineGroup);\r\n        for (let i = 0; i < 3; i++) {\r\n            this.createLine(0, 0, 0, 0, 2, \"white\", lineGroup);\r\n        }\r\n        note.append(lineGroup);\r\n        for (let i = 0; i < 6; i++) {\r\n            const wordGroup = document.createElementNS('http://www.w3.org/2000/svg', \"g\");\r\n            const elipse = this.createEllipse(0, 0, 4, 6, wordGroup);\r\n            const word = this.createText(0, 0, \"\", \"middle\", wordGroup);\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(elipse, { \"stroke-width\": '0', \"stroke\": \"black\", style: \"cursor:pointer;\" });\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setStyle(word, { \"font\": \"12px Sans-serif\", \"fill\": \"#fff\" });\r\n            blockGroup.append(wordGroup);\r\n            blockArray.push({ word: word, ellipse: elipse });\r\n            _utils__WEBPACK_IMPORTED_MODULE_0__[\"utils\"].setAttributes(wordGroup, { \"data-block\": `${i}` });\r\n        }\r\n        note.append(blockGroup);\r\n        this.noteElements.push({ element: note, blockGroup: blockArray, lineGroup: lineGroup.children });\r\n        this.domElement.append(note);\r\n        return note;\r\n    }\r\n}\r\nclass SheetLayer extends Layer {\r\n    note(x, y, fredIdx) {\r\n    }\r\n}\r\nclass UILayer extends Layer {\r\n}\r\nclass Layers {\r\n    constructor() {\r\n        this.background = new Layer();\r\n        this.sheet = new SheetLayer();\r\n        this.notes = new NoteLayer();\r\n        this.foreground = new Layer();\r\n    }\r\n    get flattened() {\r\n        return [this.background, this.sheet, this.notes, this.foreground];\r\n    }\r\n}\r\nclass SLLayer extends Layers {\r\n    constructor() {\r\n        super();\r\n        this.ui = new UILayer();\r\n    }\r\n    get flattened() {\r\n        return [this.background, this.sheet, this.notes, this.foreground, this.ui];\r\n    }\r\n}\r\nclass SLCanvas {\r\n    constructor(layerType) {\r\n        this.layerType = layerType;\r\n        this.layers = new layerType();\r\n        this.domElement = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\r\n        this.layers.flattened.forEach(layer => this.domElement.appendChild(layer.domElement));\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU2xpbVRhYlYyQ2FudmFzLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL1NsaW1UYWJWMkNhbnZhcy50cz8zYWM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7dXRpbHN9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgeyBzdmdOb3RlIH0gZnJvbSAnLi9TbGltVGFiVjJUeXBlcyc7XHJcblxyXG5pbnRlcmZhY2UgU1ZHUHJpbWl0aXZlUmVuZGVyZXIge1xyXG4gICAgY2xlYXIoKTogdm9pZDtcclxuICAgIGNyZWF0ZVJlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogU1ZHUmVjdEVsZW1lbnQ7XHJcbiAgICBjcmVhdGVFbGxpcHNlKGN4OiBudW1iZXIsIGN5OiBudW1iZXIsIHJ4OiBudW1iZXIsIHJ5OiBudW1iZXIpOiBTVkdFbGxpcHNlRWxlbWVudDtcclxuICAgIGNyZWF0ZVRleHQoeDogbnVtYmVyLCB5OiBudW1iZXIsIHN0cjogc3RyaW5nLCBhbmNob3I6IHN0cmluZyk6IFNWR1RleHRFbGVtZW50O1xyXG4gICAgY3JlYXRlTGluZSh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBjb2xvcj86IHN0cmluZyk6IFNWR0VsZW1lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMYXllciBpbXBsZW1lbnRzIFNWR1ByaW1pdGl2ZVJlbmRlcmVyIHtcclxuICAgIHJlYWRvbmx5IGRvbUVsZW1lbnQ6IFNWR0VsZW1lbnQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5kb21FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJnXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVJlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCB0YXJnZXQ/OiBTVkdFbGVtZW50KTogU1ZHUmVjdEVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IGluc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcInJlY3RcIik7XHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhpbnN0LCB7XHJcbiAgICAgICAgICAgIHg6IGAke3h9YCwgeTpgJHt5fWAsXHJcbiAgICAgICAgICAgIHdpZHRoOmAke3dpZHRofWAsIGhlaWdodDogYCR7aGVpZ2h0fWBcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZighdGFyZ2V0KVxyXG4gICAgICAgICAgICB0aGlzLmRvbUVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5zdCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoaW5zdCk7XHJcbiAgICAgICAgcmV0dXJuIGluc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRWxsaXBzZShjeDogbnVtYmVyLCBjeTogbnVtYmVyLCByeDogbnVtYmVyLCByeTogbnVtYmVyLCB0YXJnZXQ/OiBTVkdFbGVtZW50KTogU1ZHRWxsaXBzZUVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IGluc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcImVsbGlwc2VcIik7XHJcbiAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhpbnN0LCB7XHJcbiAgICAgICAgICAgIGN4OiBgJHtjeH1gLCBjeTogYCR7Y3l9YCxcclxuICAgICAgICAgICAgcng6IGAke3J4fWAsIHJ5OiBgJHtyeX1gXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmKCF0YXJnZXQpXHJcbiAgICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChpbnN0KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChpbnN0KTtcclxuICAgICAgICByZXR1cm4gaW5zdDtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVUZXh0KHg6IG51bWJlciwgeTogbnVtYmVyLCBzdHI6IHN0cmluZywgYW5jaG9yOiBzdHJpbmcsIHRhcmdldD86IFNWR0VsZW1lbnQpOiBTVkdUZXh0RWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgaW5zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwidGV4dFwiKTtcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGluc3QsIHtcclxuICAgICAgICAgICAgeDogYCR7eH1gLCB5OiBgJHt5fWAsXHJcbiAgICAgICAgICAgICd0ZXh0LWFuY2hvcic6IGAke2FuY2hvcn1gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaW5zdC5pbm5lckhUTUwgPSBgJHtzdHJ9YDtcclxuXHJcbiAgICAgICAgaWYoIXRhcmdldClcclxuICAgICAgICAgICAgdGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKGluc3QpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGluc3QpO1xyXG4gICAgICAgIHJldHVybiBpbnN0O1xyXG4gICAgfVxyXG4gICAgY3JlYXRlTGluZSh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBjb2xvcjogc3RyaW5nLCB0YXJnZXQ/OiBTVkdFbGVtZW50KTogU1ZHRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgaW5zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwibGluZVwiKTtcclxuICAgICAgICB1dGlscy5zZXRBdHRyaWJ1dGVzKGluc3QsIHtcclxuICAgICAgICAgICAgeDE6IGAke3gxfWAsIHkxOiBgJHt5MX1gLFxyXG4gICAgICAgICAgICB4MjogYCR7eDJ9YCwgeTI6IGAke3kyfWAsXHJcbiAgICAgICAgICAgIHN0cm9rZTogYCR7Y29sb3J9YCxcclxuICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogYCR7d2lkdGh9YFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCF0YXJnZXQpXHJcbiAgICAgICAgICAgIHRoaXMuZG9tRWxlbWVudC5hcHBlbmRDaGlsZChpbnN0KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChpbnN0KTtcclxuICAgICAgICByZXR1cm4gaW5zdDtcclxuICAgIH07XHJcbiAgICBcclxufVxyXG5cclxuY2xhc3MgTm90ZUxheWVyIGV4dGVuZHMgTGF5ZXIge1xyXG4gICAgbm90ZUVsZW1lbnRzOiBzdmdOb3RlW10gPSBbXTtcclxuXHJcbiAgICBjcmVhdGVOb3RlKCk6IFNWR0VsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IG5vdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcImdcIik7XHJcbiAgICAgICAgY29uc3QgYmxvY2tHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLFwiZ1wiKTtcclxuICAgICAgICBjb25zdCBibG9ja0FycmF5OiB7d29yZDogSFRNTEVsZW1lbnQsIGVsbGlwc2U6IEhUTUxFbGVtZW50fVtdID0gW107XHJcbiAgICAgICAgY29uc3QgbGluZUdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJnXCIpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlTGluZSgwLCAwLCAwLCAwLCAxLCBcIndoaXRlXCIsIGxpbmVHcm91cCk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IDMgOyBpKyspe1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUxpbmUoMCwgMCwgMCwgMCwgMiwgXCJ3aGl0ZVwiLCBsaW5lR3JvdXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub3RlLmFwcGVuZChsaW5lR3JvdXApO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCA2IDsgaSsrKXtcclxuICAgICAgICAgICAgY29uc3Qgd29yZEdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXCJnXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBlbGlwc2UgPSB0aGlzLmNyZWF0ZUVsbGlwc2UoMCwgMCAsIDQsIDYsIHdvcmRHcm91cCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHdvcmQgPSB0aGlzLmNyZWF0ZVRleHQoMCwgMCwgXCJcIiwgXCJtaWRkbGVcIiwgd29yZEdyb3VwKTtcclxuICAgICAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyhlbGlwc2UsIHtcInN0cm9rZS13aWR0aFwiOiAnMCcsIFwic3Ryb2tlXCI6IFwiYmxhY2tcIiwgc3R5bGU6IFwiY3Vyc29yOnBvaW50ZXI7XCJ9KTtcclxuICAgICAgICAgICAgdXRpbHMuc2V0U3R5bGUoPEhUTUxFbGVtZW50Pjx1bmtub3duPndvcmQsIHtcImZvbnRcIjogXCIxMnB4IFNhbnMtc2VyaWZcIiwgXCJmaWxsXCI6IFwiI2ZmZlwifSk7XHJcbiAgICAgICAgICAgIGJsb2NrR3JvdXAuYXBwZW5kKHdvcmRHcm91cCk7XHJcbiAgICAgICAgICAgIGJsb2NrQXJyYXkucHVzaCh7d29yZDogPEhUTUxFbGVtZW50Pjx1bmtub3duPndvcmQsIGVsbGlwc2U6IDxIVE1MRWxlbWVudD48dW5rbm93bj5lbGlwc2V9KTtcclxuICAgICAgICAgICAgdXRpbHMuc2V0QXR0cmlidXRlcyh3b3JkR3JvdXAsIHtcImRhdGEtYmxvY2tcIjogYCR7aX1gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vdGUuYXBwZW5kKGJsb2NrR3JvdXApO1xyXG4gICAgICAgIHRoaXMubm90ZUVsZW1lbnRzLnB1c2goe2VsZW1lbnQ6IDxIVE1MRWxlbWVudD48dW5rbm93bj5ub3RlLCBibG9ja0dyb3VwOiBibG9ja0FycmF5LCBsaW5lR3JvdXA6IGxpbmVHcm91cC5jaGlsZHJlbn0pO1xyXG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5hcHBlbmQobm90ZSk7XHJcbiAgICAgICAgcmV0dXJuIG5vdGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFNoZWV0TGF5ZXIgZXh0ZW5kcyBMYXllciB7XHJcbiAgICBub3RlKHg6IG51bWJlciwgeTogbnVtYmVyLCBmcmVkSWR4OiBudW1iZXIpIHtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFVJTGF5ZXIgZXh0ZW5kcyBMYXllciB7XHJcblxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGF5ZXJzIHtcclxuICAgIHJlYWRvbmx5IGJhY2tncm91bmQ6IExheWVyO1xyXG4gICAgcmVhZG9ubHkgc2hlZXQ6IFNoZWV0TGF5ZXI7XHJcbiAgICByZWFkb25seSBub3RlczogTm90ZUxheWVyO1xyXG4gICAgcmVhZG9ubHkgZm9yZWdyb3VuZDogTGF5ZXI7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IG5ldyBMYXllcigpO1xyXG4gICAgICAgIHRoaXMuc2hlZXQgPSBuZXcgU2hlZXRMYXllcigpO1xyXG4gICAgICAgIHRoaXMubm90ZXMgPSBuZXcgTm90ZUxheWVyKCk7XHJcbiAgICAgICAgdGhpcy5mb3JlZ3JvdW5kID0gbmV3IExheWVyKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgZmxhdHRlbmVkKCk6IExheWVyW10ge1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5iYWNrZ3JvdW5kLCB0aGlzLnNoZWV0LCB0aGlzLm5vdGVzLCB0aGlzLmZvcmVncm91bmRdO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNMTGF5ZXIgZXh0ZW5kcyBMYXllcnN7XHJcbiAgICByZWFkb25seSB1aTogVUlMYXllcjtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnVpID0gbmV3IFVJTGF5ZXIoKTtcclxuICAgIH1cclxuICAgIGdldCBmbGF0dGVuZWQoKTogTGF5ZXJbXSB7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLmJhY2tncm91bmQsIHRoaXMuc2hlZXQsIHRoaXMubm90ZXMsIHRoaXMuZm9yZWdyb3VuZCwgdGhpcy51aV07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTTENhbnZhczxUIGV4dGVuZHMgTGF5ZXJzPiB7XHJcbiAgICByZWFkb25seSBkb21FbGVtZW50OiBTVkdFbGVtZW50O1xyXG4gICAgcmVhZG9ubHkgbGF5ZXJzOiBUO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbGF5ZXJUeXBlOiBuZXcgKCkgPT4gVCkge1xyXG4gICAgICAgIHRoaXMubGF5ZXJzID0gbmV3IGxheWVyVHlwZSgpO1xyXG5cclxuICAgICAgICB0aGlzLmRvbUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcInN2Z1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5sYXllcnMuZmxhdHRlbmVkLmZvckVhY2gobGF5ZXIgPT4gdGhpcy5kb21FbGVtZW50LmFwcGVuZENoaWxkKGxheWVyLmRvbUVsZW1lbnQpKTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFXQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQUE7O0FBQ0E7QUEyQkE7QUF6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/SlimTabV2Canvas.ts\n");

/***/ }),

/***/ "./src/demo.ts":
/*!*********************!*\
  !*** ./src/demo.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _SlimTabV2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SlimTabV2 */ \"./src/SlimTabV2.ts\");\n/* harmony import */ var _DataAdapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DataAdapter */ \"./src/DataAdapter.ts\");\n/* harmony import */ var _LiCAP__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LiCAP */ \"./src/LiCAP.ts\");\n/* harmony import */ var _Metronome__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Metronome */ \"./src/Metronome.ts\");\n/* harmony import */ var _instrumentCorrection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./instrumentCorrection */ \"./src/instrumentCorrection.ts\");\n\r\n\r\n\r\n\r\n\r\nlet nt = new _SlimTabV2__WEBPACK_IMPORTED_MODULE_0__[\"SLTab\"]();\r\nlet data = [\r\n    [\r\n        // [4, [3, -1, -1, 4, -1, -1], null],// note length, [block number, index is string number,], user data\r\n        [4, [-1, 5, 2, -1, -1, -1], null],\r\n        [4, [-1, 5, 2, -1, -1, -1], null],\r\n        [4, [-1, 5, 2, -1, -1, -1], null],\r\n        [4, [-1, 5, 2, -1, -1, -1], null],\r\n    ],\r\n    [\r\n        [4, [-1, 5, 2, -1, -1, -1], null],\r\n        [4, [-1, 5, 2, -1, -1, -1], null],\r\n        [8, [-1, 5, 2, -1, -1, -1], null],\r\n        [8, [-1, 5, 2, -1, -1, -1], null],\r\n        [8, [-1, 5, 2, -1, -1, -1], null],\r\n    ]\r\n];\r\nnt.setNoteData(data);\r\nnt.attach(document.getElementById(\"slimtab\"));\r\nnt.render();\r\nlet da = new _DataAdapter__WEBPACK_IMPORTED_MODULE_1__[\"DataAdapter\"]();\r\n_LiCAP__WEBPACK_IMPORTED_MODULE_2__[\"LiCAP\"].enumerate().then((devs) => {\r\n    if (devs.length > 0) {\r\n        devs[0].on(\"pick\", da.receiveData.bind(da));\r\n    }\r\n});\r\n//da.setSendDataCallBack(nt.instrumentNoteInput.bind(nt));\r\nlet beep = null;\r\nlet bs = 0;\r\nlet beepEle = document.getElementById(\"metronome\");\r\nbeepEle.onclick = function (event) {\r\n    if (!beep) {\r\n        beep = new _Metronome__WEBPACK_IMPORTED_MODULE_3__[\"Metronome\"](120);\r\n    }\r\n    if (bs == 0) {\r\n        beep.startTick();\r\n        beepEle.style.background = \"#e99415\";\r\n        bs = 1;\r\n    }\r\n    else {\r\n        beep.stopTick();\r\n        beepEle.style.background = \"\";\r\n        bs = 0;\r\n    }\r\n};\r\n//setInterval(function(){nt.instrumentNoteInput([8, [-1, -1, -1, 4, -1, 6], null])}, 1000);\r\nnt.instrumentNoteInput(_instrumentCorrection__WEBPACK_IMPORTED_MODULE_4__[\"instrumentCorrection\"], [4, [-1, -1, -1, 4, -1, 6], null]);\r\nfunction pad(num, size) { return ('000000000' + num).substr(-size); }\r\nnt.on(\"noteclick\", (section_idx, note_idx) => {\r\n    document.getElementById(\"section-idx\").innerText = pad(section_idx + 1, 3) + \".\";\r\n});\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGVtby50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1tuYW1lXS8uL3NyYy9kZW1vLnRzPzJjY2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2VjdGlvbiB9IGZyb20gXCIuL1NsaW1UYWJWMlR5cGVzXCJcclxuaW1wb3J0IHsgU0xUYWIgfSBmcm9tIFwiLi9TbGltVGFiVjJcIjtcclxuaW1wb3J0IHsgRGF0YUFkYXB0ZXIgfSBmcm9tIFwiLi9EYXRhQWRhcHRlclwiXHJcbmltcG9ydCB7IExpQ0FQIH0gZnJvbSBcIi4vTGlDQVBcIlxyXG5pbXBvcnQgeyBNZXRyb25vbWUgfSBmcm9tIFwiLi9NZXRyb25vbWVcIlxyXG5pbXBvcnQgeyBpbnN0cnVtZW50Q29ycmVjdGlvbiB9IGZyb20gXCIuL2luc3RydW1lbnRDb3JyZWN0aW9uXCJcclxubGV0IG50ID0gbmV3IFNMVGFiKCk7XHJcbmxldCBkYXRhOiBzZWN0aW9uW10gPSBbXHJcbiAgICBbLy8gc2VjdGlvblxyXG4gICAgICAgIC8vIFs0LCBbMywgLTEsIC0xLCA0LCAtMSwgLTFdLCBudWxsXSwvLyBub3RlIGxlbmd0aCwgW2Jsb2NrIG51bWJlciwgaW5kZXggaXMgc3RyaW5nIG51bWJlcixdLCB1c2VyIGRhdGFcclxuICAgICAgICBbNCwgWy0xLCA1LCAyLCAtMSwgLTEsIC0xXSwgbnVsbF0sXHJcbiAgICAgICAgWzQsIFstMSwgNSwgMiwgLTEsIC0xLCAtMV0sIG51bGxdLFxyXG4gICAgICAgIFs0LCBbLTEsIDUsIDIsIC0xLCAtMSwgLTFdLCBudWxsXSxcclxuICAgICAgICBbNCwgWy0xLCA1LCAyLCAtMSwgLTEsIC0xXSwgbnVsbF0sXHJcbiAgICBdLFxyXG4gICAgW1xyXG4gICAgICAgIFs0LCBbLTEsIDUsIDIsIC0xLCAtMSwgLTFdLCBudWxsXSxcclxuICAgICAgICBbNCwgWy0xLCA1LCAyLCAtMSwgLTEsIC0xXSwgbnVsbF0sXHJcbiAgICAgICAgWzgsIFstMSwgNSwgMiwgLTEsIC0xLCAtMV0sIG51bGxdLFxyXG4gICAgICAgIFs4LCBbLTEsIDUsIDIsIC0xLCAtMSwgLTFdLCBudWxsXSxcclxuICAgICAgICBbOCwgWy0xLCA1LCAyLCAtMSwgLTEsIC0xXSwgbnVsbF0sXHJcbiAgICBdXHJcbl07XHJcbm50LnNldE5vdGVEYXRhKGRhdGEpO1xyXG5udC5hdHRhY2goZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGltdGFiXCIpKTtcclxubnQucmVuZGVyKCk7XHJcblxyXG5sZXQgZGEgPSBuZXcgRGF0YUFkYXB0ZXIoKTtcclxuTGlDQVAuZW51bWVyYXRlKCkudGhlbigoZGV2cyk9PntcclxuICAgIGlmKGRldnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGRldnNbMF0ub24oXCJwaWNrXCIsIGRhLnJlY2VpdmVEYXRhLmJpbmQoZGEpKTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vL2RhLnNldFNlbmREYXRhQ2FsbEJhY2sobnQuaW5zdHJ1bWVudE5vdGVJbnB1dC5iaW5kKG50KSk7XHJcblxyXG5sZXQgYmVlcDogTWV0cm9ub21lID0gbnVsbDtcclxubGV0IGJzID0gMDtcclxubGV0IGJlZXBFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1ldHJvbm9tZVwiKTtcclxuXHJcbmJlZXBFbGUub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgIGlmKCFiZWVwKXtcclxuICAgICAgICBiZWVwID0gbmV3IE1ldHJvbm9tZSgxMjApO1xyXG4gICAgfVxyXG4gICAgaWYoYnMgPT0gMCl7XHJcbiAgICAgICAgYmVlcC5zdGFydFRpY2soKTtcclxuICAgICAgICBiZWVwRWxlLnN0eWxlLmJhY2tncm91bmQgPSBcIiNlOTk0MTVcIjtcclxuICAgICAgICBicyA9IDE7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBiZWVwLnN0b3BUaWNrKCk7XHJcbiAgICAgICAgYmVlcEVsZS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJcIjtcclxuICAgICAgICBicyA9IDA7XHJcbiAgICB9XHJcbn1cclxuLy9zZXRJbnRlcnZhbChmdW5jdGlvbigpe250Lmluc3RydW1lbnROb3RlSW5wdXQoWzgsIFstMSwgLTEsIC0xLCA0LCAtMSwgNl0sIG51bGxdKX0sIDEwMDApO1xyXG5udC5pbnN0cnVtZW50Tm90ZUlucHV0KGluc3RydW1lbnRDb3JyZWN0aW9uLFs0LCBbLTEsIC0xLCAtMSwgNCwgLTEsIDZdLCBudWxsXSk7XHJcblxyXG5cclxuZnVuY3Rpb24gcGFkKG51bTogc3RyaW5nLCBzaXplOiBudW1iZXIpeyByZXR1cm4gKCcwMDAwMDAwMDAnICsgbnVtKS5zdWJzdHIoLXNpemUpOyB9XHJcblxyXG5udC5vbihcIm5vdGVjbGlja1wiLCAoc2VjdGlvbl9pZHgsIG5vdGVfaWR4KSA9PiB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlY3Rpb24taWR4XCIpLmlubmVyVGV4dCA9IHBhZChzZWN0aW9uX2lkeCsxLCAzKSArIFwiLlwiO1xyXG59KVxyXG4iXSwibWFwcGluZ3MiOiJBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/demo.ts\n");

/***/ }),

/***/ "./src/instrumentCorrection.ts":
/*!*************************************!*\
  !*** ./src/instrumentCorrection.ts ***!
  \*************************************/
/*! exports provided: instrumentCorrection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"instrumentCorrection\", function() { return instrumentCorrection; });\nconst instrumentCorrection = function (sltab, addData, section, note) {\r\n    sltab.notes[section] = sltab.notes[section].slice(0, note + 1);\r\n    let stackLength = 0; // unit in beat\r\n    for (let i = 0; i <= note; i++) {\r\n        stackLength += sltab.lengthPerBeat / sltab.notes[section][i][0];\r\n    }\r\n    if (stackLength >= sltab.beatPerSection) {\r\n        sltab.notes.splice(section + 1, 0, []);\r\n        sltab.notes[section + 1].push(addData);\r\n    }\r\n    else if (stackLength + sltab.lengthPerBeat / addData[0] > sltab.beatPerSection) {\r\n        let restLength = sltab.beatPerSection - stackLength;\r\n        let addLength = sltab.lengthPerBeat / (sltab.lengthPerBeat / addData[0] - restLength);\r\n        restLength = sltab.lengthPerBeat / restLength;\r\n        sltab.notes[section].push([restLength, addData[1], \"linkStart\"]);\r\n        sltab.notes.splice(section + 1, 0, []);\r\n        sltab.notes[section + 1].push([addLength, addData[1], \"linkEnd\"]);\r\n    }\r\n    else {\r\n        let noteRestLength = 1 - stackLength % 1; // unit in beat\r\n        if (noteRestLength >= sltab.lengthPerBeat / addData[0]) {\r\n            sltab.notes[section].push(addData);\r\n        }\r\n        else {\r\n            let noteAddLength = sltab.lengthPerBeat / addData[0] - noteRestLength;\r\n            sltab.notes[section].push([sltab.lengthPerBeat / noteRestLength, addData[1], \"linkStart\"]);\r\n            sltab.notes[section].push([sltab.lengthPerBeat / noteAddLength, addData[1], \"linkEnd\"]);\r\n        }\r\n    }\r\n};\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5zdHJ1bWVudENvcnJlY3Rpb24udHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvaW5zdHJ1bWVudENvcnJlY3Rpb24udHM/MzlhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb3JyZWN0aW9uIH0gZnJvbSBcIi4vU2xpbVRhYlYySW50ZXJmYWNlXCJcclxuaW1wb3J0IHsgbm90ZSwgc2VjdGlvbiB9IGZyb20gXCIuL1NsaW1UYWJWMlR5cGVzXCJcclxuaW1wb3J0IHsgU0xUYWIgfSBmcm9tIFwiLi9TbGltVGFiVjJcIlxyXG5jb25zdCBpbnN0cnVtZW50Q29ycmVjdGlvbjogQ29ycmVjdGlvbiA9IGZ1bmN0aW9uKHNsdGFiOiBTTFRhYiwgYWRkRGF0YTogbm90ZSwgc2VjdGlvbjogbnVtYmVyLCBub3RlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHNsdGFiLm5vdGVzW3NlY3Rpb25dID0gc2x0YWIubm90ZXNbc2VjdGlvbl0uc2xpY2UoMCwgbm90ZSArIDEpO1xyXG4gICAgbGV0IHN0YWNrTGVuZ3RoID0gMDsvLyB1bml0IGluIGJlYXRcclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPD0gbm90ZTsgaSsrKXtcclxuICAgICAgICBzdGFja0xlbmd0aCArPSBzbHRhYi5sZW5ndGhQZXJCZWF0IC8gc2x0YWIubm90ZXNbc2VjdGlvbl1baV1bMF07XHJcbiAgICB9XHJcbiAgICBpZihzdGFja0xlbmd0aCA+PSBzbHRhYi5iZWF0UGVyU2VjdGlvbil7XHJcbiAgICAgICAgc2x0YWIubm90ZXMuc3BsaWNlKHNlY3Rpb24gKyAxLCAwLCBbXSk7XHJcbiAgICAgICAgc2x0YWIubm90ZXNbc2VjdGlvbiArIDFdLnB1c2goYWRkRGF0YSk7XHJcbiAgICB9ZWxzZSBpZihzdGFja0xlbmd0aCArIHNsdGFiLmxlbmd0aFBlckJlYXQgLyBhZGREYXRhWzBdID4gc2x0YWIuYmVhdFBlclNlY3Rpb24pe1xyXG4gICAgICAgIGxldCByZXN0TGVuZ3RoID0gc2x0YWIuYmVhdFBlclNlY3Rpb24gLSBzdGFja0xlbmd0aDtcclxuICAgICAgICBsZXQgYWRkTGVuZ3RoID0gc2x0YWIubGVuZ3RoUGVyQmVhdCAvIChzbHRhYi5sZW5ndGhQZXJCZWF0IC8gYWRkRGF0YVswXSAtIHJlc3RMZW5ndGgpO1xyXG4gICAgICAgIHJlc3RMZW5ndGggPSBzbHRhYi5sZW5ndGhQZXJCZWF0IC8gcmVzdExlbmd0aDtcclxuICAgICAgICBzbHRhYi5ub3Rlc1tzZWN0aW9uXS5wdXNoKFtyZXN0TGVuZ3RoLCBhZGREYXRhWzFdLCBcImxpbmtTdGFydFwiXSk7XHJcbiAgICAgICAgc2x0YWIubm90ZXMuc3BsaWNlKHNlY3Rpb24gKyAxLCAwLCBbXSk7XHJcbiAgICAgICAgc2x0YWIubm90ZXNbc2VjdGlvbiArIDFdLnB1c2goW2FkZExlbmd0aCwgYWRkRGF0YVsxXSwgXCJsaW5rRW5kXCJdKTsgICBcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGxldCBub3RlUmVzdExlbmd0aCA9IDEgLSBzdGFja0xlbmd0aCAlIDE7IC8vIHVuaXQgaW4gYmVhdFxyXG4gICAgICAgIGlmKG5vdGVSZXN0TGVuZ3RoID49IHNsdGFiLmxlbmd0aFBlckJlYXQgLyBhZGREYXRhWzBdKXtcclxuICAgICAgICAgICAgc2x0YWIubm90ZXNbc2VjdGlvbl0ucHVzaChhZGREYXRhKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgbGV0IG5vdGVBZGRMZW5ndGggPSBzbHRhYi5sZW5ndGhQZXJCZWF0IC8gYWRkRGF0YVswXSAtIG5vdGVSZXN0TGVuZ3RoO1xyXG4gICAgICAgICAgICBzbHRhYi5ub3Rlc1tzZWN0aW9uXS5wdXNoKFtzbHRhYi5sZW5ndGhQZXJCZWF0IC8gbm90ZVJlc3RMZW5ndGgsIGFkZERhdGFbMV0sIFwibGlua1N0YXJ0XCJdKTtcclxuICAgICAgICAgICAgc2x0YWIubm90ZXNbc2VjdGlvbl0ucHVzaChbc2x0YWIubGVuZ3RoUGVyQmVhdCAvIG5vdGVBZGRMZW5ndGgsIGFkZERhdGFbMV0sIFwibGlua0VuZFwiXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydCB7IGluc3RydW1lbnRDb3JyZWN0aW9uIH07Il0sIm1hcHBpbmdzIjoiQUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/instrumentCorrection.ts\n");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! exports provided: utils, Callbacks */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"utils\", function() { return utils; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Callbacks\", function() { return Callbacks; });\nvar utils;\r\n(function (utils) {\r\n    function setAttributes(el, attr) {\r\n        for (let k in attr) {\r\n            el.setAttribute(k, attr[k]);\r\n        }\r\n    }\r\n    utils.setAttributes = setAttributes;\r\n    function setStyle(el, style) {\r\n        for (let k in style) {\r\n            el.style.setProperty(k, style[k]);\r\n        }\r\n    }\r\n    utils.setStyle = setStyle;\r\n    const noteNumber = { \"C\": 0, \"C#\": 1, \"D\": 2, \"D#\": 3, \"E\": 4, \"F\": 5, \"F#\": 6, \"G\": 7, \"G#\": 8, \"A\": 9, \"A#\": 10, \"B\": 11 };\r\n    const regex = /^([CDEFGAB]#?)([0-9])$/;\r\n    function noteToDecimal(note) {\r\n        let groups = regex.exec(note);\r\n        if (groups.length != 3)\r\n            return -1;\r\n        return noteNumber[groups[1]] + (Number(groups[2]) + 1) * 12;\r\n    }\r\n    utils.noteToDecimal = noteToDecimal;\r\n})(utils || (utils = {}));\r\nclass ArrayFunction {\r\n    constructor() {\r\n        this.funcs = [];\r\n    }\r\n    callAll(...args) {\r\n        this.funcs.forEach((func) => {\r\n            func(...args);\r\n        });\r\n    }\r\n    push(cbk) {\r\n        this.funcs.push(cbk);\r\n    }\r\n}\r\n;\r\nclass Callbacks {\r\n    constructor(eventType) {\r\n        eventType.forEach(element => {\r\n            this[element] = new ArrayFunction();\r\n        });\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMudHM/N2RkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgbmFtZXNwYWNlIHV0aWxzIHtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGVsOiBFbGVtZW50LCBhdHRyOntba2V5OiBzdHJpbmddOiBzdHJpbmd9KXtcclxuICAgICAgICBmb3IobGV0IGsgaW4gYXR0cil7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShrLCBhdHRyW2tdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0U3R5bGUoZWw6IEhUTUxFbGVtZW50LCBzdHlsZTp7W2tleTogc3RyaW5nXTogc3RyaW5nfSl7XHJcbiAgICAgICAgZm9yKGxldCBrIGluIHN0eWxlKXtcclxuICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoaywgc3R5bGVba10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub3RlTnVtYmVyID0ge1wiQ1wiOiAwLCBcIkMjXCI6IDEsIFwiRFwiOiAyLCBcIkQjXCI6IDMsIFwiRVwiOiA0LCBcIkZcIjogNSwgXCJGI1wiOiA2LCBcIkdcIjogNywgXCJHI1wiOiA4LCBcIkFcIjogOSwgXCJBI1wiOiAxMCwgXCJCXCI6IDExfTtcclxuICAgIGNvbnN0IHJlZ2V4ID0gL14oW0NERUZHQUJdIz8pKFswLTldKSQvO1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG5vdGVUb0RlY2ltYWwobm90ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGdyb3VwcyA9IHJlZ2V4LmV4ZWMobm90ZSk7XHJcbiAgICAgICAgaWYoZ3JvdXBzLmxlbmd0aCAhPSAzKVxyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgcmV0dXJuIG5vdGVOdW1iZXJbZ3JvdXBzWzFdIGFzIGtleW9mIHR5cGVvZiBub3RlTnVtYmVyXSsoTnVtYmVyKGdyb3Vwc1syXSkrMSkqMTI7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBBcnJheUZ1bmN0aW9uIHtcclxuICAgIHByaXZhdGUgZnVuY3M6IEFycmF5PEZ1bmN0aW9uPiA9IFtdO1xyXG4gICAgY2FsbEFsbCguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgICAgIHRoaXMuZnVuY3MuZm9yRWFjaCgoZnVuYykgPT4ge1xyXG4gICAgICAgICAgICBmdW5jKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVzaChjYms6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZnVuY3MucHVzaChjYmspO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIENhbGxiYWNrcyB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheUZ1bmN0aW9uO1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRUeXBlOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgZXZlbnRUeXBlLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXNbZWxlbWVudF0gPSBuZXcgQXJyYXlGdW5jdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFNQTtBQUdBO0FBQUE7QUFDQTtBQVVBO0FBVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils.ts\n");

/***/ })

/******/ });